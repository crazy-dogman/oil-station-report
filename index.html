<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>加油站销售数据报告生成器</title>
    
    <!-- 加油站应用逻辑架构 - 任务1.3完整实现 -->
    <script>
        /**
         * 加油站销售数据报告生成器 - 主应用架构
         * 严格按照重构计划规范实现完整的数据结构和核心方法
         *
         * 核心原则：
         * 1. 精确性优先 - 所有计算必须精确，数字格式严格按要求
         * 2. 用户体验至上 - 界面必须适合加油站工作环境
         * 3. 视觉震撼 - 动画效果必须炫酷，给用户带来惊艳体验
         * 4. 容错性强 - 智能解析微信消息，处理各种格式变体
         * 5. 移动优先 - 优化移动端体验，大字体防眩光设计
         */
        function gasStationApp() {
            return {
                // ===== 应用状态管理 =====

                // 当前步骤 (1-7个步骤)
                currentStep: 1,

                // 演示模式 (在演示阶段跳过严格验证)
                demoMode: true,

                // 应用状态信息
                appStatus: {
                    initialized: false,
                    loading: false,
                    error: null,
                    message: '应用初始化中...'
                },

                // 步骤配置
                steps: [
                    { id: 1, name: '基础信息', title: '📅 设置日期和基本信息', completed: false },
                    { id: 2, name: '昨日数据', title: '📋 粘贴昨日数据(可选)', completed: false },
                    { id: 3, name: '油品销售', title: '⛽ 输入今日油品销售数据', completed: false },
                    { id: 4, name: '非油销售', title: '🛒 输入非油销售数据', completed: false },
                    { id: 5, name: '其他数据', title: '📊 输入其他业务数据', completed: false },
                    { id: 6, name: '数据验证', title: '🔍 验证数据和异常检测', completed: false },
                    { id: 7, name: '生成报告', title: '📄 生成标准报告', completed: false }
                ],

                // ===== 表单数据结构 =====

                formData: {
                    // 基础信息
                    stationName: '宝湖加油站',
                    date: '',
                    yesterdayData: '',      // 昨日数据文本

                    // 油品销售数据 (升数输入，自动计算吨数)
                    gasoline92: {
                        liters: 0,
                        tons: 0,
                        label: '92#汽油',
                        unit: '升',
                        conversionRate: 0.00075
                    },
                    gasoline95: {
                        liters: 0,
                        tons: 0,
                        label: '95#汽油',
                        unit: '升',
                        conversionRate: 0.00075
                    },
                    gasoline98: {
                        liters: 0,
                        tons: 0,
                        label: '98#汽油',
                        unit: '升',
                        conversionRate: 0.00075
                    },
                    diesel: {
                        liters: 0,
                        tons: 0,
                        label: '柴油',
                        unit: '升',
                        conversionRate: 0.00085
                    },

                    // 非油销售数据
                    nonOilSales: {
                        today: 0,           // 当日非油销售
                        yesterday: 0,       // 昨日非油销售
                        lastYear: 0,        // 去年同期
                        // monthTotal: 0,   // 移除：改为自动计算 calculatedResults.monthlyNonOilTotal
                        label: '非油销售',
                        unit: '元'
                    },

                    // 电子券数据
                    electronicVouchers: {
                        today: 0,           // 当日核销
                        // total: 0,        // 移除：改为自动计算 calculatedResults.cumulativeVouchers
                        label: '电子券核销',
                        unit: '张'
                    },

                    // 工行积分兑换
                    icbcPoints: {
                        count: 0,           // 兑换笔数
                        amount: 0,          // 兑换金额
                        label: '工行积分兑换',
                        unit: '笔/元'
                    },

                    // 工行ETC
                    icbcETC: {
                        count: 0,
                        label: '工行ETC',
                        unit: '单'
                    },

                    // 三端订单
                    threeEndOrders: {
                        count: 0,
                        label: '三端订单消费',
                        unit: '笔'
                    },

                    // 实际评价
                    actualReviews: {
                        count: 0,
                        label: '实际评价数量',
                        unit: '笔'
                    },

                    // 电子卡办理
                    electronicCards: {
                        count: 0,
                        label: '电子卡办理',
                        unit: '张'
                    }
                },

                // ===== 昨日数据 (用于环比计算) =====

                yesterdayData: {
                    // 单个汽油字段（用于手动输入和详细分析）
                    gasoline92: 0,          // 昨日92#汽油
                    gasoline95: 0,          // 昨日95#汽油
                    gasoline98: 0,          // 昨日98#汽油
                    diesel: 0,              // 昨日柴油
                    nonOilSales: 0,         // 昨日非油销售
                    monthlyGasoline: 0,     // 昨日月累计汽油
                    monthlyDiesel: 0,       // 昨日月累计柴油
                    monthlyTotal: 0,        // 昨日月累计总计
                    monthlyNonOil: 0,       // 昨日月累计非油
                    vouchersTotal: 0,       // 昨日累计电子券核销
                    // 汇总字段（智能解析直接获取，手动输入自动计算）
                    gasolineTotal: 0,       // 昨日汽油合计
                    totalSales: 0,          // 昨日柴汽合计
                    parsed: false           // 是否已解析/填入
                },

                expectedYesterdayDate: '',  // 期望的昨日日期

                // ===== 验证相关 =====

                validationErrors: [],       // 验证错误列表
                anomalies: [],             // 异常数据列表
                missingFields: [],         // 缺失字段列表

                // 检测状态管理
                validationStatus: 'not_checked',  // 'not_checked' | 'checking' | 'completed'

                // ===== 计算结果 =====

                calculatedResults: {
                    // 汇总数据
                    gasolineTotal: 0,       // 汽油合计
                    totalSales: 0,          // 柴汽合计

                    // 月累计数据
                    monthlyGasoline: 0,     // 本月累计汽油
                    monthlyDiesel: 0,       // 本月累计柴油
                    monthlyTotal: 0,        // 本月累计总计

                    // 自动计算的累计数据
                    monthlyNonOilTotal: 0,  // 本月累计非油销售（自动计算）
                    cumulativeVouchers: 0,  // 累计电子券核销（自动计算）

                    // 环比数据
                    comparisonData: {
                        change: 0,              // 变化量
                        changeRate: 0,          // 变化率
                        changeType: '增加',      // 增加/减少
                        changeRateType: '增幅',  // 增幅/减幅
                        processText: ''         // 计算过程
                    },

                    // 汽油环比
                    gasolineComparison: {
                        change: 0,
                        changeRate: 0,
                        changeType: '增加',
                        changeRateType: '增幅'
                    },

                    // 柴油环比
                    dieselComparison: {
                        change: 0,
                        changeRate: 0,
                        changeType: '增加',
                        changeRateType: '增幅'
                    },

                    // 非油环比
                    nonOilComparison: {
                        change: 0,
                        changeRate: 0,
                        changeType: '增加',
                        changeRateType: '增幅'
                    },

                    // 测评率
                    evaluationRate: 0
                },

                // ===== 计算过程展示 =====

                calculationProcesses: {
                    gasoline92: '',
                    gasoline95: '',
                    gasoline98: '',
                    diesel: '',
                    evaluationRate: '',
                    comparison: ''
                },

                // ===== 报告生成状态 =====

                reportStatus: {
                    success: false,         // 生成是否成功
                    message: '',           // 状态消息
                    report: ''             // 生成的报告内容
                },

                copyStatus: {
                    success: false,        // 复制是否成功
                    message: ''           // 复制状态消息
                },

                // ===== UI状态管理 =====

                uiState: {
                    showAnomalyModal: false,        // 异常确认弹窗
                    showParseOptions: false,        // 解析选项弹窗
                    showCalculationDetails: false,  // 计算详情展示
                    showFireworks: false,          // 庆祝动画
                    showLoading: false,            // 加载状态
                    highlightedField: ''           // 高亮字段
                },

                // ===== 动画状态 =====

                animations: {
                    entrance: '',                   // 入场动画
                    interaction: '',                // 交互动画
                    background: '',                 // 背景特效
                    celebration: false              // 庆祝状态
                },

                // ===== 核心方法 - 应用生命周期 =====

                /**
                 * 应用初始化方法
                 * 设置默认值，初始化日期，准备应用状态
                 */
                init() {
                    console.log('🚀 加油站应用架构初始化开始...');

                    try {
                        // 初始化日期
                        this.initializeDate();

                        // 设置应用状态
                        this.appStatus.initialized = true;
                        this.appStatus.loading = false;
                        this.appStatus.message = '应用已就绪，开始数据录入';

                        // 初始化步骤状态
                        this.updateStepStatus();

                        // 初始化自动计算
                        this.calculateMonthlyNonOilTotal();
                        this.calculateCumulativeVouchers();

                        // 设置响应式数据监听
                        this.setupReactiveWatchers();

                        // 初始化时计算所有升转吨数据
                        this.calculateTons('gasoline92');
                        this.calculateTons('gasoline95');
                        this.calculateTons('gasoline98');
                        this.calculateTons('diesel');

                        // 触发入场动画
                        this.triggerDefaultEntranceAnimation();

                        console.log('✅ 加油站应用架构初始化完成');
                        console.log('📊 数据结构:', this.formData);
                        console.log('🎯 当前步骤:', this.currentStep);

                    } catch (error) {
                        console.error('❌ 应用初始化失败:', error);
                        this.appStatus.error = '应用初始化失败: ' + error.message;
                        this.appStatus.message = '初始化失败，请刷新页面重试';
                    }
                },

                /**
                 * 设置响应式数据监听器
                 * 监听关键数据变化，自动触发相关计算
                 */
                setupReactiveWatchers() {
                    console.log('🔄 设置响应式数据监听器...');

                    // 监听非油销售当日数据变化
                    this.$watch('formData.nonOilSales.today', (newValue, oldValue) => {
                        console.log(`📊 非油销售当日数据变化: ${oldValue} → ${newValue}`);
                        this.calculateMonthlyNonOilTotal();
                    });

                    // 监听电子券核销当日数据变化
                    this.$watch('formData.electronicVouchers.today', (newValue, oldValue) => {
                        console.log(`🎫 电子券核销当日数据变化: ${oldValue} → ${newValue}`);
                        this.calculateCumulativeVouchers();
                    });

                    // 监听昨日数据解析状态变化
                    this.$watch('yesterdayData.parsed', (newValue) => {
                        if (newValue) {
                            console.log('📈 昨日数据解析完成，重新计算累计数据...');
                            this.calculateMonthlyNonOilTotal();
                            this.calculateCumulativeVouchers();
                        }
                    });

                    // 监听昨日月累计非油销售数据变化
                    this.$watch('yesterdayData.monthlyNonOil', (newValue, oldValue) => {
                        console.log(`💰 昨日月累计非油销售数据变化: ${oldValue} → ${newValue}`);
                        this.calculateMonthlyNonOilTotal();
                    });

                    // 监听昨日累计电子券核销数据变化
                    this.$watch('yesterdayData.vouchersTotal', (newValue, oldValue) => {
                        console.log(`🎫 昨日累计电子券核销数据变化: ${oldValue} → ${newValue}`);
                        this.calculateCumulativeVouchers();
                    });

                    // 监听92#汽油升数变化，自动计算吨数
                    this.$watch('formData.gasoline92.liters', (newValue, oldValue) => {
                        console.log(`⛽ 92#汽油升数变化: ${oldValue} → ${newValue}`);
                        this.calculateTons('gasoline92');
                    });

                    // 监听95#汽油升数变化，自动计算吨数
                    this.$watch('formData.gasoline95.liters', (newValue, oldValue) => {
                        console.log(`⛽ 95#汽油升数变化: ${oldValue} → ${newValue}`);
                        this.calculateTons('gasoline95');
                    });

                    // 监听98#汽油升数变化，自动计算吨数
                    this.$watch('formData.gasoline98.liters', (newValue, oldValue) => {
                        console.log(`⛽ 98#汽油升数变化: ${oldValue} → ${newValue}`);
                        this.calculateTons('gasoline98');
                    });

                    // 监听柴油升数变化，自动计算吨数
                    this.$watch('formData.diesel.liters', (newValue, oldValue) => {
                        console.log(`⛽ 柴油升数变化: ${oldValue} → ${newValue}`);
                        this.calculateTons('diesel');
                    });

                    console.log('✅ 响应式数据监听器设置完成');
                },

                /**
                 * 初始化日期系统
                 * 自动获取当前日期，计算期望的昨日日期
                 */
                initializeDate() {
                    const today = new Date();
                    const month = today.getMonth() + 1;
                    const day = today.getDate();

                    // 设置今日日期
                    this.formData.date = `${month}月${day}日`;

                    // 计算期望的昨日日期
                    const yesterday = new Date(today);
                    yesterday.setDate(yesterday.getDate() - 1);
                    const yMonth = yesterday.getMonth() + 1;
                    const yDay = yesterday.getDate();
                    this.expectedYesterdayDate = `${yMonth}月${yDay}日`;

                    console.log(`📅 日期初始化: 今日=${this.formData.date}, 期望昨日=${this.expectedYesterdayDate}`);
                },

                /**
                 * 更新步骤状态
                 * 根据当前步骤和数据完整性更新步骤完成状态
                 */
                updateStepStatus() {
                    // 重置所有步骤状态
                    this.steps.forEach(step => {
                        step.completed = step.id < this.currentStep;
                    });

                    // 检查当前步骤的数据完整性
                    this.validateCurrentStep();
                },

                /**
                 * 触发入场动画
                 * 为当前步骤触发适当的入场动画效果
                 */
                triggerDefaultEntranceAnimation() {
                    // 使用默认的磁悬浮入场动画
                    this.triggerMagneticEntrance();
                },

                // ===== 核心方法 - 导航控制 =====

                /**
                 * 下一步
                 * 验证当前步骤后进入下一步
                 * 修复：让动画完全控制步骤切换过程，避免Alpine.js响应式更新产生的快速缩放
                 */
                nextStep() {
                    if (this.currentStep < 7) {
                        // 验证当前步骤
                        if (this.validateCurrentStep()) {
                            // 标记当前步骤完成
                            this.steps[this.currentStep - 1].completed = true;

                            // 先触发动画，在动画过程中更新步骤
                            this.triggerStepAnimation('next', () => {
                                // 在动画隐藏阶段更新currentStep，避免Alpine.js响应式冲突
                                this.currentStep++;
                                console.log(`➡️ 进入步骤 ${this.currentStep}: ${this.steps[this.currentStep - 1].title}`);

                                // 滚动到步骤内容卡片顶部，留出适当间距（解决时序竞争问题）
                                this.$nextTick(() => {
                                    requestAnimationFrame(() => {
                                        setTimeout(() => {
                                            const stepCard = document.querySelector('.card[x-show="currentStep >= 1"]');
                                            if (stepCard) {
                                                const rect = stepCard.getBoundingClientRect();
                                                const offsetTop = window.pageYOffset + rect.top - 200; // 留出200px间距
                                                window.scrollTo({ top: offsetTop, behavior: 'smooth' });
                                                console.log('📜 自动滚动到步骤内容卡片顶部（留出200px间距，解决时序问题）');
                                            }
                                        }, 16); // 一个动画帧的时间
                                    });
                                });
                            });
                        } else {
                            console.warn('⚠️ 当前步骤验证失败，无法进入下一步');
                        }
                    }
                },

                /**
                 * 上一步
                 * 返回上一步骤
                 * 修复：让动画完全控制步骤切换过程，避免Alpine.js响应式更新产生的快速缩放
                 */
                prevStep() {
                    if (this.currentStep > 1) {
                        // 先触发动画，在动画过程中更新步骤
                        this.triggerStepAnimation('prev', () => {
                            // 在动画隐藏阶段更新currentStep，避免Alpine.js响应式冲突
                            this.currentStep--;
                            console.log(`⬅️ 返回步骤 ${this.currentStep}: ${this.steps[this.currentStep - 1].title}`);

                            // 滚动到步骤内容卡片顶部，留出适当间距（解决时序竞争问题）
                            this.$nextTick(() => {
                                requestAnimationFrame(() => {
                                    setTimeout(() => {
                                        const stepCard = document.querySelector('.card[x-show="currentStep >= 1"]');
                                        if (stepCard) {
                                            const rect = stepCard.getBoundingClientRect();
                                            const offsetTop = window.pageYOffset + rect.top - 200; // 留出200px间距
                                            window.scrollTo({ top: offsetTop, behavior: 'smooth' });
                                            console.log('📜 自动滚动到步骤内容卡片顶部（留出200px间距，解决时序问题）');
                                        }
                                    }, 16); // 一个动画帧的时间
                                });
                            });
                        });
                    }
                },

                /**
                 * 跳转到指定步骤
                 * @param {number} targetStep 目标步骤
                 * 修复：让动画完全控制步骤切换过程，避免Alpine.js响应式更新产生的快速缩放
                 */
                goToStep(targetStep) {
                    if (targetStep >= 1 && targetStep <= 7) {
                        const direction = targetStep > this.currentStep ? 'next' : 'prev';

                        // 先触发动画，在动画过程中更新步骤
                        this.triggerStepAnimation(direction, () => {
                            // 在动画隐藏阶段更新currentStep，避免Alpine.js响应式冲突
                            this.currentStep = targetStep;
                            console.log(`🎯 跳转到步骤 ${this.currentStep}: ${this.steps[this.currentStep - 1].title}`);

                            // 滚动到步骤内容卡片顶部，留出适当间距（解决时序竞争问题）
                            this.$nextTick(() => {
                                requestAnimationFrame(() => {
                                    setTimeout(() => {
                                        const stepCard = document.querySelector('.card[x-show="currentStep >= 1"]');
                                        if (stepCard) {
                                            const rect = stepCard.getBoundingClientRect();
                                            const offsetTop = window.pageYOffset + rect.top - 200; // 留出200px间距
                                            window.scrollTo({ top: offsetTop, behavior: 'smooth' });
                                            console.log('📜 自动滚动到步骤内容卡片顶部（留出200px间距，解决时序问题）');
                                        }
                                    }, 16); // 一个动画帧的时间
                                });
                            });
                        });
                    }
                },

                /**
                 * 触发步骤切换动画
                 * 集成磁悬浮入场特效到步骤切换流程
                 * 修复：支持回调函数，在动画隐藏阶段更新currentStep
                 * @param {string} direction 方向: 'next' | 'prev'
                 * @param {function} stepUpdateCallback 步骤更新回调函数
                 */
                triggerStepAnimation(direction, stepUpdateCallback = null) {
                    console.log(`🎭 步骤切换动画: ${direction} -> 当前步骤 ${this.currentStep}`);

                    // 使用磁悬浮入场特效作为步骤切换动画
                    // 这是优雅的商务风格，适合加油站专业环境
                    this.triggerMagneticEntrance(stepUpdateCallback);

                    // 添加步骤切换的特殊效果
                    this.enhanceStepTransition(direction);
                },

                /**
                 * 增强步骤切换效果
                 * 为步骤切换添加额外的视觉反馈
                 * @param {string} direction 切换方向
                 */
                enhanceStepTransition(direction) {
                    // 高亮当前步骤指示器
                    this.highlightCurrentStepIndicator();

                    // 滚动到顶部，确保用户看到新步骤内容
                    this.scrollToTop();

                    // 触发步骤内容更新
                    this.updateStepContent();
                },

                /**
                 * 高亮当前步骤指示器
                 * 为当前步骤添加视觉强调效果
                 */
                highlightCurrentStepIndicator() {
                    // 移除所有步骤的高亮效果
                    const stepIndicators = document.querySelectorAll('.step-indicator');
                    stepIndicators.forEach(indicator => {
                        indicator.classList.remove('step-active', 'step-highlight');
                    });

                    // 为当前步骤添加高亮效果
                    const currentIndicator = document.querySelector(`[data-step="${this.currentStep}"]`);
                    if (currentIndicator) {
                        currentIndicator.classList.add('step-active', 'step-highlight');

                        // 添加临时闪烁效果
                        setTimeout(() => {
                            currentIndicator.classList.remove('step-highlight');
                        }, 1000);
                    }
                },

                /**
                 * 滚动到页面顶部
                 * 确保用户能看到新步骤的内容
                 */
                scrollToTop() {
                    // 平滑滚动到顶部
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                },

                /**
                 * 更新步骤内容
                 * 触发步骤内容的更新和显示
                 */
                updateStepContent() {
                    // 触发Alpine.js的响应式更新
                    // currentStep的变化会自动更新x-show指令
                    console.log(`📋 更新步骤内容: 步骤 ${this.currentStep} - ${this.steps[this.currentStep - 1].title}`);

                    // 确保步骤内容区域可见
                    this.$nextTick(() => {
                        const stepContent = document.querySelector(`[data-step-content="${this.currentStep}"]`);
                        if (stepContent) {
                            stepContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    });
                },

                /**
                 * 手动输入昨日数据后自动计算汇总数据
                 */
                calculateYesterdayTotals() {
                    // 计算昨日汽油合计
                    this.yesterdayData.gasolineTotal = Number((
                        this.yesterdayData.gasoline92 +
                        this.yesterdayData.gasoline95 +
                        this.yesterdayData.gasoline98
                    ).toFixed(2));

                    // 计算昨日柴汽合计
                    this.yesterdayData.totalSales = Number((
                        this.yesterdayData.gasolineTotal +
                        this.yesterdayData.diesel
                    ).toFixed(2));

                    // 设置为已解析状态
                    this.yesterdayData.parsed = true;

                    console.log('✅ 手动输入昨日数据计算完成:', this.yesterdayData);
                },

                // ===== 核心方法 - 数据验证 =====

                /**
                 * 验证当前步骤
                 * 根据当前步骤验证相应的数据完整性
                 * @returns {boolean} 验证是否通过
                 */
                validateCurrentStep() {
                    this.validationErrors = [];

                    // 演示模式下跳过严格验证，允许自由导航
                    if (this.demoMode) {
                        console.log('🎭 演示模式：跳过步骤验证，允许自由导航');
                        return true;
                    }

                    switch (this.currentStep) {
                        case 1: // 基础信息
                            return this.validateBasicInfo();
                        case 2: // 昨日数据 (可选)
                            return true; // 昨日数据是可选的
                        case 3: // 油品销售
                            return this.validateOilSales();
                        case 4: // 非油销售
                            return this.validateNonOilSales();
                        case 5: // 其他数据
                            return this.validateOtherData();
                        case 6: // 数据验证
                            return this.validateAllData();
                        case 7: // 生成报告
                            return this.validateReportGeneration();
                        default:
                            return true;
                    }
                },

                /**
                 * 验证基础信息
                 * @returns {boolean}
                 */
                validateBasicInfo() {
                    if (!this.formData.date) {
                        this.validationErrors.push({
                            field: 'date',
                            message: '请设置日期',
                            severity: 'high'
                        });
                        return false;
                    }
                    return true;
                },

                /**
                 * 验证油品销售数据
                 * @returns {boolean}
                 */
                validateOilSales() {
                    let isValid = true;
                    const oilTypes = ['gasoline92', 'gasoline95', 'gasoline98', 'diesel'];

                    oilTypes.forEach(type => {
                        const data = this.formData[type];
                        if (!data.liters || data.liters <= 0) {
                            this.validationErrors.push({
                                field: type,
                                message: `请输入${data.label}销售数据`,
                                severity: 'medium'
                            });
                            isValid = false;
                        }
                    });

                    return isValid;
                },

                /**
                 * 验证非油销售数据
                 * @returns {boolean}
                 */
                validateNonOilSales() {
                    if (!this.formData.nonOilSales.today || this.formData.nonOilSales.today <= 0) {
                        this.validationErrors.push({
                            field: 'nonOilSales',
                            message: '请输入当日非油销售数据',
                            severity: 'medium'
                        });
                        return false;
                    }
                    return true;
                },

                /**
                 * 验证其他数据
                 * @returns {boolean}
                 */
                validateOtherData() {
                    let isValid = true;

                    // 检查必填字段
                    const requiredFields = [
                        'electronicVouchers', 'threeEndOrders',
                        'actualReviews', 'electronicCards'
                    ];

                    requiredFields.forEach(field => {
                        const data = this.formData[field];
                        const value = data.count !== undefined ? data.count : data.today;

                        if (value === undefined || value < 0) {
                            this.validationErrors.push({
                                field: field,
                                message: `请输入${data.label}数据`,
                                severity: 'medium'
                            });
                            isValid = false;
                        }
                    });

                    return isValid;
                },

                /**
                 * 验证所有数据
                 * @returns {boolean}
                 */
                validateAllData() {
                    // 执行完整性检查
                    const isComplete = this.checkDataCompleteness();

                    // 执行异常检测
                    this.detectAnomalies();

                    return isComplete && this.anomalies.length === 0;
                },

                /**
                 * 验证报告生成
                 * @returns {boolean}
                 */
                validateReportGeneration() {
                    // 执行最终计算
                    this.performFinalCalculations();

                    // 检查计算结果
                    return this.calculatedResults.totalSales > 0;
                },

                // ===== 核心方法 - 数据计算 =====

                /**
                 * 升转吨计算
                 * 精确计算升数转换为吨数
                 * @param {string} type 油品类型
                 */
                calculateTons(type) {
                    const data = this.formData[type];
                    const liters = parseFloat(data.liters) || 0;

                    if (liters <= 0) {
                        data.tons = 0;
                        this.calculationProcesses[type] = '';
                        return;
                    }

                    // 高精度计算
                    const rate = data.conversionRate;
                    const highPrecisionResult = liters * rate;

                    // 四舍五入到2位小数
                    const finalResult = Number(highPrecisionResult.toFixed(2));

                    // 更新数据
                    data.tons = finalResult;

                    // 显示计算过程
                    this.calculationProcesses[type] =
                        `${liters} 升 × ${rate} = ${highPrecisionResult.toFixed(4)} 吨 → ${finalResult} 吨 (四舍五入)`;

                    console.log(`🧮 ${data.label}计算: ${this.calculationProcesses[type]}`);

                    // 触发汇总计算
                    this.calculateTotals();
                },

                /**
                 * 汇总计算
                 * 计算汽油合计、柴汽合计等汇总数据
                 */
                calculateTotals() {
                    // 汽油合计
                    this.calculatedResults.gasolineTotal = Number((
                        this.formData.gasoline92.tons +
                        this.formData.gasoline95.tons +
                        this.formData.gasoline98.tons
                    ).toFixed(2));

                    // 柴汽合计
                    this.calculatedResults.totalSales = Number((
                        this.calculatedResults.gasolineTotal +
                        this.formData.diesel.tons
                    ).toFixed(2));

                    console.log(`📊 汇总计算: 汽油=${this.calculatedResults.gasolineTotal}吨, 总计=${this.calculatedResults.totalSales}吨`);

                    // 计算月累计
                    this.calculateMonthlyCumulative();

                    // 计算自动累计数据
                    this.calculateMonthlyNonOilTotal();
                    this.calculateCumulativeVouchers();

                    // 计算环比
                    if (this.yesterdayData.parsed) {
                        this.calculateComparison();
                    }

                    // 计算测评率
                    this.calculateEvaluationRate();
                },

                /**
                 * 计算月累计数据
                 * 基于昨日月累计 + 今日销量计算本月累计
                 */
                calculateMonthlyCumulative() {
                    if (this.yesterdayData.parsed) {
                        // 本月累计 = 昨日月累计 + 今日销量
                        this.calculatedResults.monthlyGasoline = Number((
                            this.yesterdayData.monthlyGasoline + this.calculatedResults.gasolineTotal
                        ).toFixed(2));

                        this.calculatedResults.monthlyDiesel = Number((
                            this.yesterdayData.monthlyDiesel + this.formData.diesel.tons
                        ).toFixed(2));

                        this.calculatedResults.monthlyTotal = Number((
                            this.calculatedResults.monthlyGasoline + this.calculatedResults.monthlyDiesel
                        ).toFixed(2));
                    } else {
                        // 如果没有昨日数据，月累计等于今日销量
                        this.calculatedResults.monthlyGasoline = this.calculatedResults.gasolineTotal;
                        this.calculatedResults.monthlyDiesel = this.formData.diesel.tons;
                        this.calculatedResults.monthlyTotal = this.calculatedResults.totalSales;
                    }

                    console.log(`📈 月累计计算: 汽油=${this.calculatedResults.monthlyGasoline}吨, 柴油=${this.calculatedResults.monthlyDiesel}吨, 总计=${this.calculatedResults.monthlyTotal}吨`);
                },

                /**
                 * 计算本月累计非油销售
                 * 公式：本月累计非油销售 = 昨日本月累计非油销售 + 当日非油销售
                 */
                calculateMonthlyNonOilTotal() {
                    const yesterdayTotal = this.yesterdayData.monthlyNonOil || 0;
                    const todayAmount = this.formData.nonOilSales.today || 0;
                    this.calculatedResults.monthlyNonOilTotal = Number((yesterdayTotal + todayAmount).toFixed(2));

                    console.log(`💰 本月累计非油销售计算: 昨日累计(${yesterdayTotal}元) + 当日销售(${todayAmount}元) = ${this.calculatedResults.monthlyNonOilTotal}元`);
                },

                /**
                 * 计算累计电子券核销
                 * 公式：累计电子券核销 = 昨日累计核销 + 当日核销
                 */
                calculateCumulativeVouchers() {
                    const yesterdayTotal = this.yesterdayData.vouchersTotal || 0;
                    const todayCount = this.formData.electronicVouchers.today || 0;
                    this.calculatedResults.cumulativeVouchers = yesterdayTotal + todayCount;

                    console.log(`🎫 累计电子券核销计算: 昨日累计(${yesterdayTotal}张) + 当日核销(${todayCount}张) = ${this.calculatedResults.cumulativeVouchers}张`);
                },

                /**
                 * 计算环比数据
                 * 计算今日与昨日的环比变化
                 */
                calculateComparison() {
                    const today = this.calculatedResults.totalSales;
                    const yesterday = this.yesterdayData.totalSales;

                    if (!yesterday || yesterday === 0) {
                        this.calculatedResults.comparisonData = {
                            change: 0,
                            changeRate: 0,
                            changeType: '无法计算',
                            changeRateType: '无法计算',
                            processText: '缺少昨日数据，无法计算环比'
                        };
                        return;
                    }

                    // 计算变化量
                    const change = Number((today - yesterday).toFixed(2));

                    // 计算变化率 (保持高精度)
                    const changeRateHighPrecision = (change / yesterday) * 100;
                    const changeRate = Number(changeRateHighPrecision.toFixed(2));

                    // 确定描述文字
                    const changeType = change >= 0 ? '增加' : '减少';
                    const changeRateType = changeRate >= 0 ? '增幅' : '减幅';

                    // 显示计算过程
                    const processText = `(${today} - ${yesterday}) ÷ ${yesterday} × 100% = ${changeRateHighPrecision.toFixed(4)}% → ${changeRate}% (四舍五入)`;

                    this.calculatedResults.comparisonData = {
                        change: Math.abs(change),
                        changeRate: Math.abs(changeRate),
                        changeType: changeType,
                        changeRateType: changeRateType,
                        processText: processText
                    };

                    console.log(`📊 环比计算: ${changeType}${Math.abs(change)}吨, ${changeRateType}${Math.abs(changeRate)}%`);

                    // 分别计算汽油和柴油的环比
                    this.calculateGasolineComparison();
                    this.calculateDieselComparison();
                },

                /**
                 * 通用环比计算方法
                 * @param {number} today - 今日数据
                 * @param {number} yesterday - 昨日数据
                 * @returns {object} 环比计算结果
                 */
                calculateComparisonHelper(today, yesterday) {
                    if (!yesterday || yesterday <= 0) {
                        return null;
                    }

                    const change = Number((today - yesterday).toFixed(2));
                    const changeRate = Number(((change / yesterday) * 100).toFixed(2));

                    return {
                        change: Math.abs(change),
                        changeRate: Math.abs(changeRate),
                        changeType: change >= 0 ? '增加' : '减少',
                        changeRateType: changeRate >= 0 ? '增幅' : '减幅'
                    };
                },

                /**
                 * 计算汽油环比
                 */
                calculateGasolineComparison() {
                    const today = this.calculatedResults.gasolineTotal;
                    const yesterday = this.yesterdayData.gasolineTotal;

                    const result = this.calculateComparisonHelper(today, yesterday);
                    if (result) {
                        this.calculatedResults.gasolineComparison = result;
                    }
                },

                /**
                 * 计算柴油环比
                 */
                calculateDieselComparison() {
                    const today = this.formData.diesel.tons;
                    const yesterday = this.yesterdayData.diesel;

                    const result = this.calculateComparisonHelper(today, yesterday);
                    if (result) {
                        this.calculatedResults.dieselComparison = result;
                    }
                },

                /**
                 * 计算测评率
                 * 计算三端订单的测评率
                 */
                calculateEvaluationRate() {
                    const reviews = this.formData.actualReviews.count || 0;
                    const orders = this.formData.threeEndOrders.count || 0;

                    if (!orders || orders === 0) {
                        this.calculatedResults.evaluationRate = 0;
                        this.calculationProcesses.evaluationRate = '订单数为0，无法计算测评率';
                        return;
                    }

                    // 高精度计算
                    const rateHighPrecision = (reviews / orders) * 100;
                    const finalRate = Number(rateHighPrecision.toFixed(2));

                    // 显示计算过程
                    const processText = `${reviews} ÷ ${orders} × 100% = ${rateHighPrecision.toFixed(4)}% → ${finalRate}% (四舍五入)`;

                    this.calculatedResults.evaluationRate = finalRate;
                    this.calculationProcesses.evaluationRate = processText;

                    console.log(`📊 测评率计算: ${processText}`);
                },

                // ===== 核心方法 - 数据完整性和异常检测 =====

                /**
                 * 检查数据完整性
                 * @returns {boolean}
                 */
                checkDataCompleteness() {
                    this.missingFields = [];

                    // 必填字段定义
                    const requiredFields = {
                        step1: ['date'],
                        step3: ['gasoline92.liters', 'gasoline95.liters', 'gasoline98.liters', 'diesel.liters'],
                        step4: ['nonOilSales.today'],
                        step5: ['electronicVouchers.today', 'threeEndOrders.count', 'actualReviews.count', 'electronicCards.count']
                    };

                    // 检查各步骤的必填字段
                    Object.keys(requiredFields).forEach(step => {
                        requiredFields[step].forEach(fieldPath => {
                            const value = this.getNestedValue(this.formData, fieldPath);

                            // 修复业务逻辑：对于数值字段，0也被认为是无效的
                            let isInvalid = false;

                            if (fieldPath === 'date') {
                                // 日期字段：空字符串、null、undefined为无效
                                isInvalid = value === '' || value === null || value === undefined;
                            } else {
                                // 数值字段：空、null、undefined、小于等于0都为无效
                                isInvalid = value === '' || value === null || value === undefined || value <= 0;
                            }

                            if (isInvalid) {
                                this.missingFields.push({
                                    field: fieldPath,
                                    step: step,
                                    label: this.getFieldDisplayName(fieldPath),
                                    stepName: this.getStepDisplayName(step)
                                });
                            }
                        });
                    });

                    console.log(`📋 数据完整性检查完成，发现${this.missingFields.length}个缺失字段`);
                    return this.missingFields.length === 0;
                },

                /**
                 * 异常检测
                 * 检测数据中的异常情况
                 */
                detectAnomalies() {
                    // 设置检测状态为进行中
                    this.validationStatus = 'checking';
                    console.log('🔍 开始执行数据验证和异常检测...');

                    // 清空之前的结果
                    this.anomalies = [];

                    // 先执行数据完整性检查
                    const isComplete = this.checkDataCompleteness();

                    // 如果数据完整，再执行异常检测
                    if (isComplete) {
                        // 销量异常检测
                        this.checkSalesAnomaly();

                        // 环比异常检测
                        this.checkComparisonAnomaly();

                        // 测评率异常检测
                        this.checkEvaluationAnomaly();

                        // 月累计逻辑异常检测
                        this.checkMonthlyLogicAnomaly();

                        // 数据范围验证
                        this.checkDataRangeAnomaly();
                    }

                    // 设置检测状态为完成
                    this.validationStatus = 'completed';

                    console.log(`🔍 数据验证完成 - 缺失字段:${this.missingFields.length}个, 异常数据:${this.anomalies.length}个`);
                },

                /**
                 * 检查销量异常
                 * 根据计算逻辑优化.md的标准实现
                 */
                checkSalesAnomaly() {
                    if (!this.yesterdayData.parsed) return;

                    const currentData = {
                        totalSales: this.calculatedResults.totalSales
                    };

                    // 使用昨日数据作为历史数据的简化版本
                    const historicalData = [
                        { totalSales: this.yesterdayData.totalSales }
                    ];

                    const avgSales = historicalData.reduce((sum, data) => sum + data.totalSales, 0) / historicalData.length;
                    const threshold = avgSales * 0.3; // 30%阈值

                    if (Math.abs(currentData.totalSales - avgSales) > threshold) {
                        this.anomalies.push({
                            type: 'sales_anomaly',
                            field: 'totalSales',
                            message: `销量异常：当日${currentData.totalSales.toFixed(2)}吨，平均${avgSales.toFixed(2)}吨`,
                            severity: 'high',
                            data: {
                                today: currentData.totalSales,
                                average: avgSales,
                                threshold: threshold.toFixed(2)
                            }
                        });
                    }
                },

                /**
                 * 检查环比异常
                 * 根据计算逻辑优化.md的标准实现
                 */
                checkComparisonAnomaly() {
                    const changeRate = this.calculatedResults.comparisonData.changeRate;

                    if (Math.abs(changeRate) > 50) {
                        this.anomalies.push({
                            type: 'change_anomaly',
                            field: 'changeRate',
                            message: `环比变化异常：${changeRate.toFixed(2)}%`,
                            severity: changeRate > 100 ? 'high' : 'medium',
                            data: { changeRate: changeRate.toFixed(2) }
                        });
                    }
                },

                /**
                 * 检查测评率异常
                 * 根据计算逻辑优化.md的标准实现
                 */
                checkEvaluationAnomaly() {
                    const ratingRate = this.calculatedResults.evaluationRate;
                    const orders = this.formData.threeEndOrders.count;

                    // 检查测评率过低（文档标准：低于50%）
                    if (ratingRate < 50 && orders > 0) {
                        this.anomalies.push({
                            type: 'rating_anomaly',
                            field: 'evaluationRate',
                            message: `测评率过低：${ratingRate.toFixed(2)}%`,
                            severity: 'medium',
                            data: { ratingRate: ratingRate.toFixed(2), orders }
                        });
                    }

                    // 检查测评率逻辑错误（超过100%或有订单但测评率为0）
                    if (ratingRate > 100 || (orders > 0 && ratingRate === 0)) {
                        this.anomalies.push({
                            type: 'rating_logic_error',
                            field: 'evaluationRate',
                            message: '测评率逻辑错误：请检查订单数量和评价数量',
                            severity: 'high',
                            data: { ratingRate: ratingRate.toFixed(2), orders }
                        });
                    }
                },

                /**
                 * 检查月累计逻辑异常
                 */
                checkMonthlyLogicAnomaly() {
                    if (!this.yesterdayData.parsed) return;

                    const todayMonthly = this.calculatedResults.monthlyTotal;
                    const yesterdayMonthly = this.yesterdayData.monthlyTotal;
                    const todayDaily = this.calculatedResults.totalSales;

                    if (yesterdayMonthly) {
                        const expected = yesterdayMonthly + todayDaily;
                        if (Math.abs(todayMonthly - expected) > 0.1) {
                            this.anomalies.push({
                                type: 'monthly',
                                field: 'monthlyTotal',
                                message: '月累计数据逻辑错误：计算结果与预期不符',
                                severity: '高',
                                data: { todayMonthly, expected, difference: (todayMonthly - expected).toFixed(2) }
                            });
                        }
                    }
                },

                // ===== 工具方法 =====

                /**
                 * 获取嵌套对象的值
                 * @param {Object} obj 对象
                 * @param {string} path 路径，如 'gasoline92.liters'
                 * @returns {*} 值
                 */
                getNestedValue(obj, path) {
                    return path.split('.').reduce((current, key) => current?.[key], obj);
                },

                /**
                 * 获取字段显示名称
                 * @param {string} fieldPath 字段路径
                 * @returns {string} 显示名称
                 */
                getFieldDisplayName(fieldPath) {
                    const fieldMap = {
                        'date': '日期',
                        'gasoline92.liters': '92#汽油',
                        'gasoline95.liters': '95#汽油',
                        'gasoline98.liters': '98#汽油',
                        'diesel.liters': '柴油',
                        'nonOilSales.today': '当日非油销售',
                        'electronicVouchers.today': '电子券核销',
                        'threeEndOrders.count': '三端订单',
                        'actualReviews.count': '实际评价',
                        'electronicCards.count': '电子卡办理'
                    };
                    return fieldMap[fieldPath] || fieldPath;
                },

                /**
                 * 获取步骤显示名称
                 * @param {string} step 步骤
                 * @returns {string} 显示名称
                 */
                getStepDisplayName(step) {
                    const stepMap = {
                        'step1': '基础信息',
                        'step3': '油品销售',
                        'step4': '非油销售',
                        'step5': '其他数据'
                    };
                    return stepMap[step] || step;
                },

                /**
                 * 执行最终计算
                 * 在生成报告前执行所有必要的计算
                 */
                performFinalCalculations() {
                    console.log('🧮 执行最终计算...');

                    // 重新计算所有汇总数据
                    this.calculateTotals();

                    // 重新计算月累计
                    this.calculateMonthlyCumulative();

                    // 重新计算环比
                    if (this.yesterdayData.parsed) {
                        this.calculateComparison();
                    }

                    // 重新计算测评率
                    this.calculateEvaluationRate();

                    console.log('✅ 最终计算完成');
                },

                // ===== 测试和演示方法 =====

                /**
                 * 测试按钮点击方法 (保留用于演示)
                 */
                testClick() {
                    console.log('🧪 测试按钮被点击！时间：' + new Date().toLocaleTimeString());

                    // 更新应用状态
                    this.appStatus.message = '测试成功！Alpine.js响应正常 - ' + new Date().toLocaleTimeString();

                    // 演示步骤切换
                    if (this.currentStep < 7) {
                        this.currentStep++;
                    } else {
                        this.currentStep = 1;
                    }

                    // 触发交互动画
                    this.triggerInteractionAnimation();
                },

                /**
                 * 触发交互动画
                 */
                triggerInteractionAnimation() {
                    // 新交互动画系统待实现
                    console.log('🎭 新交互动画系统待实现');
                },

                /**
                 * 检查数据范围异常
                 * 验证数据是否在合理范围内
                 */
                checkDataRangeAnomaly() {
                    // 检查油品销售数据范围
                    const totalSales = this.calculatedResults.totalSales;
                    if (totalSales < 0) {
                        this.anomalies.push({
                            type: 'range_error',
                            field: 'totalSales',
                            message: '数据范围错误：销售量不能为负数',
                            severity: 'high',
                            data: { value: totalSales }
                        });
                    }

                    if (totalSales > 1000) {
                        this.anomalies.push({
                            type: 'range_warning',
                            field: 'totalSales',
                            message: '数据范围警告：单日销售量超过1000吨，请确认数据正确性',
                            severity: 'medium',
                            data: { value: totalSales.toFixed(2) }
                        });
                    }

                    // 检查非油销售数据范围
                    const nonOilSales = this.formData.nonOilSales.today;
                    if (nonOilSales < 0) {
                        this.anomalies.push({
                            type: 'range_error',
                            field: 'nonOilSales',
                            message: '数据范围错误：非油销售额不能为负数',
                            severity: 'high',
                            data: { value: nonOilSales }
                        });
                    }

                    // 检查测评率范围
                    const evaluationRate = this.calculatedResults.evaluationRate;
                    if (evaluationRate < 0 || evaluationRate > 100) {
                        this.anomalies.push({
                            type: 'range_error',
                            field: 'evaluationRate',
                            message: '数据范围错误：测评率必须在0-100%之间',
                            severity: 'high',
                            data: { value: evaluationRate.toFixed(2) }
                        });
                    }
                },

                /**
                 * 演示计算功能
                 */

                // ===== 标准报告生成系统 =====

                /**
                 * 生成标准报告
                 * 严格按照8个部分的标准格式生成报告，集成终极庆祝特效
                 */
                generateFinalReport() {
                    console.log('📄 开始生成标准报告...');

                    try {
                        // 触发终极庆祝特效
                        this.triggerUltimateCelebrationAnimation();

                        // 检查数据完整性
                        if (!this.checkReportDataCompleteness()) {
                            this.reportStatus = {
                                success: false,
                                message: '数据不完整，无法生成报告',
                                report: ''
                            };
                            return;
                        }

                        // 执行最终计算
                        this.performFinalCalculations();

                        // 生成各部分内容
                        const sections = [
                            this.generateReportHeader(),
                            this.generateSection1_OilSales(),
                            this.generateSection2_Comparison(),
                            this.generateSection3_NonOilSales(),
                            this.generateSection4_ElectronicVouchers(),
                            this.generateSection5_ICBCPoints(),
                            this.generateSection6_ICBCETC(),
                            this.generateSection7_ThreeEndOrders(),
                            this.generateSection8_ElectronicCards()
                        ];

                        const finalReport = sections.join('\n');

                        this.reportStatus = {
                            success: true,
                            message: '报告生成成功',
                            report: finalReport
                        };

                        console.log('✅ 标准报告生成完成');
                        console.log('📊 报告内容:', finalReport);

                    } catch (error) {
                        console.error('❌ 报告生成失败:', error);
                        this.reportStatus = {
                            success: false,
                            message: '报告生成过程中发生错误: ' + error.message,
                            report: ''
                        };
                    }
                },

                /**
                 * 检查报告数据完整性
                 * @returns {boolean}
                 */
                checkReportDataCompleteness() {
                    // 检查基础信息
                    if (!this.formData.date || !this.formData.stationName) {
                        console.warn('⚠️ 缺少基础信息');
                        return false;
                    }

                    // 检查油品销售数据
                    if (!this.formData.gasoline92.liters && !this.formData.gasoline95.liters &&
                        !this.formData.gasoline98.liters && !this.formData.diesel.liters) {
                        console.warn('⚠️ 缺少油品销售数据');
                        return false;
                    }

                    return true;
                },

                /**
                 * 执行最终计算
                 * 确保所有计算都是最新的
                 */
                performFinalCalculations() {
                    // 重新计算升转吨
                    this.calculateTotals();

                    // 重新计算环比数据
                    this.calculateComparison();

                    // 计算测评率
                    this.calculateEvaluationRate();
                },

                /**
                 * 生成报告标题
                 * @returns {string}
                 */
                generateReportHeader() {
                    return `${this.formData.stationName}${this.formData.date}:`;
                },

                /**
                 * 生成第一部分：油品销售数据
                 * @returns {string}
                 */
                generateSection1_OilSales() {
                    const g92 = this.formData.gasoline92.tons;
                    const g95 = this.formData.gasoline95.tons;
                    const g98 = this.formData.gasoline98.tons;
                    const diesel = this.formData.diesel.tons;

                    // 计算汽油合计
                    const gasolineTotal = g92 + g95 + g98;
                    // 计算柴汽合计
                    const totalSales = gasolineTotal + diesel;

                    // 月累计数据（从计算结果中获取已计算的累计数据）
                    const monthlyGasoline = this.calculatedResults.monthlyGasoline;
                    const monthlyDiesel = this.calculatedResults.monthlyDiesel;
                    const monthlyTotal = this.calculatedResults.monthlyTotal;

                    return `一、92#汽油销售${g92.toFixed(2)}吨，95#汽油${g95.toFixed(2)}吨，98#汽油销售${g98.toFixed(2)}吨，共计汽油销售${gasolineTotal.toFixed(2)}吨，柴油${diesel.toFixed(2)}吨，柴汽合计销售${totalSales.toFixed(2)}吨。本月累计销售汽油${monthlyGasoline.toFixed(2)}吨，柴油${monthlyDiesel.toFixed(2)}吨，共销售油品${monthlyTotal.toFixed(2)}吨。`;
                },

                /**
                 * 生成第二部分：环比数据
                 * @returns {string}
                 */
                generateSection2_Comparison() {
                    // 如果没有昨日数据，返回默认格式
                    if (!this.yesterdayData.parsed) {
                        return `二、环比昨日数据待补充`;
                    }

                    const todayTotal = this.formData.gasoline92.tons + this.formData.gasoline95.tons +
                                      this.formData.gasoline98.tons + this.formData.diesel.tons;
                    const yesterdayTotal = this.yesterdayData.totalSales;

                    const todayGasoline = this.formData.gasoline92.tons + this.formData.gasoline95.tons + this.formData.gasoline98.tons;
                    const yesterdayGasoline = this.yesterdayData.gasolineTotal;

                    const todayDiesel = this.formData.diesel.tons;
                    const yesterdayDiesel = this.yesterdayData.diesel;

                    // 计算环比变化
                    const totalChange = todayTotal - yesterdayTotal;
                    const totalChangeRate = yesterdayTotal > 0 ? (totalChange / yesterdayTotal * 100) : 0;

                    const gasolineChange = todayGasoline - yesterdayGasoline;
                    const gasolineChangeRate = yesterdayGasoline > 0 ? (gasolineChange / yesterdayGasoline * 100) : 0;

                    const dieselChange = todayDiesel - yesterdayDiesel;
                    const dieselChangeRate = yesterdayDiesel > 0 ? (dieselChange / yesterdayDiesel * 100) : 0;

                    // 选择描述词
                    const totalDesc = totalChange >= 0 ? '增加' : '减少';
                    const totalRateDesc = totalChangeRate >= 0 ? '增幅' : '减幅';
                    const gasolineDesc = gasolineChange >= 0 ? '增加' : '减少';
                    const gasolineRateDesc = gasolineChangeRate >= 0 ? '增幅' : '减幅';
                    const dieselDesc = dieselChange >= 0 ? '增加' : '减少';
                    const dieselRateDesc = dieselChangeRate >= 0 ? '增幅' : '减幅';

                    return `二、环比昨日${totalDesc}${Math.abs(totalChange).toFixed(2)}吨，${totalRateDesc}${Math.abs(totalChangeRate).toFixed(2)}％，其中汽油${gasolineDesc}${Math.abs(gasolineChange).toFixed(2)}吨，${gasolineRateDesc}${Math.abs(gasolineChangeRate).toFixed(2)}%，柴油${dieselDesc}${Math.abs(dieselChange).toFixed(2)}吨，${dieselRateDesc}${Math.abs(dieselChangeRate).toFixed(2)}%`;
                },

                /**
                 * 生成第三部分：非油销售
                 * @returns {string}
                 */
                generateSection3_NonOilSales() {
                    const todayNonOil = this.formData.nonOilSales.today;
                    const monthTotal = this.calculatedResults.monthlyNonOilTotal;

                    // 环比和同比数据（示例，实际需要从昨日数据计算）
                    const yesterdayNonOil = this.yesterdayData.nonOilSales || 0;
                    const change = todayNonOil - yesterdayNonOil;
                    const changeRate = yesterdayNonOil > 0 ? (change / yesterdayNonOil * 100) : 0;

                    const changeDesc = change >= 0 ? '增加' : '减少';
                    const changeRateDesc = changeRate >= 0 ? '增幅' : '减幅';

                    // 同比数据（基于用户输入计算）
                    const lastYearValue = this.formData.nonOilSales.lastYear || 0;
                    const lastYearChange = todayNonOil - lastYearValue;
                    const lastYearChangeRate = lastYearValue > 0 ? (lastYearChange / lastYearValue * 100) : 0;
                    const lastYearDesc = lastYearChange >= 0 ? '增加' : '减少';
                    const lastYearRateDesc = lastYearChangeRate >= 0 ? '增幅' : '减幅';

                    // 🔍 调试信息：同比数据计算过程
                    console.log('🔍 同比数据调试信息:', {
                        原始输入: this.formData.nonOilSales.lastYear,
                        原始输入类型: typeof this.formData.nonOilSales.lastYear,
                        lastYearValue: lastYearValue,
                        lastYearValue类型: typeof lastYearValue,
                        todayNonOil: todayNonOil,
                        lastYearChange: lastYearChange,
                        lastYearChangeRate: lastYearChangeRate,
                        lastYearDesc: lastYearDesc,
                        lastYearRateDesc: lastYearRateDesc,
                        条件判断: lastYearValue > 0,
                        条件判断详细: `${lastYearValue} > 0 = ${lastYearValue > 0}`
                    });

                    // 根据是否有去年数据决定是否显示同比信息
                    const yearComparisonText = lastYearValue > 0
                        ? `，同比去年${lastYearDesc}${Math.abs(lastYearChange).toFixed(1)}元，${lastYearRateDesc}${Math.abs(lastYearChangeRate).toFixed(2)}％`
                        : '';

                    // 🔍 调试信息：最终结果
                    console.log('🔍 同比显示结果:', {
                        yearComparisonText: yearComparisonText,
                        yearComparisonText长度: yearComparisonText.length,
                        是否为空: yearComparisonText === ''
                    });

                    return `三、当日非油销售${todayNonOil.toFixed(2)}元，环比昨日${changeDesc}${Math.abs(change).toFixed(2)}元，${changeRateDesc}${Math.abs(changeRate).toFixed(2)}%${yearComparisonText}，本月累计${monthTotal.toFixed(1)}元。`;
                },

                /**
                 * 生成第四部分：电子券核销
                 * @returns {string}
                 */
                generateSection4_ElectronicVouchers() {
                    const today = this.formData.electronicVouchers.today;
                    const total = this.calculatedResults.cumulativeVouchers;

                    return `四、当日电子券核销${today}张，累计核销${total}张。`;
                },

                /**
                 * 生成第五部分：工行积分兑换
                 * @returns {string}
                 */
                generateSection5_ICBCPoints() {
                    const count = this.formData.icbcPoints.count;
                    const amount = this.formData.icbcPoints.amount;

                    return `五、工行积分兑换${count}笔，兑换金额${amount.toFixed(2)}元`;
                },

                /**
                 * 生成第六部分：工行ETC
                 * @returns {string}
                 */
                generateSection6_ICBCETC() {
                    const count = this.formData.icbcETC.count;

                    return `六、当日工行ETC${count}单。`;
                },

                /**
                 * 生成第七部分：三端订单和测评
                 * @returns {string}
                 */
                generateSection7_ThreeEndOrders() {
                    const orders = this.formData.threeEndOrders.count;
                    const reviews = this.formData.actualReviews.count;
                    const ratingRate = reviews > 0 && orders > 0 ? (reviews / orders * 100) : 0;

                    return `七、三端订单消费${orders}笔，实际评价数量${reviews}笔，测评率${ratingRate.toFixed(2)}％`;
                },

                /**
                 * 生成第八部分：电子卡办理
                 * @returns {string}
                 */
                generateSection8_ElectronicCards() {
                    const count = this.formData.electronicCards.count;

                    return `八、今日办理电子卡${count}张`;
                },

                /**
                 * 一键复制报告到剪贴板
                 * 兼容所有浏览器的复制功能
                 */
                copyReportToClipboard() {
                    if (!this.reportStatus.success || !this.reportStatus.report) {
                        console.warn('⚠️ 没有可复制的报告');
                        return;
                    }

                    try {
                        // 现代浏览器使用 Clipboard API
                        if (navigator.clipboard && window.isSecureContext) {
                            navigator.clipboard.writeText(this.reportStatus.report).then(() => {
                                console.log('✅ 报告已复制到剪贴板 (Clipboard API)');
                                this.showCopySuccess();
                            }).catch(err => {
                                console.error('❌ Clipboard API 复制失败:', err);
                                this.fallbackCopyToClipboard();
                            });
                        } else {
                            // 降级方案
                            this.fallbackCopyToClipboard();
                        }
                    } catch (error) {
                        console.error('❌ 复制功能出错:', error);
                        this.fallbackCopyToClipboard();
                    }
                },

                /**
                 * 降级复制方案
                 * 兼容旧浏览器
                 */
                fallbackCopyToClipboard() {
                    try {
                        // 创建临时文本区域
                        const textArea = document.createElement('textarea');
                        textArea.value = this.reportStatus.report;
                        textArea.style.position = 'fixed';
                        textArea.style.left = '-999999px';
                        textArea.style.top = '-999999px';
                        document.body.appendChild(textArea);

                        textArea.focus();
                        textArea.select();

                        // 执行复制命令
                        const successful = document.execCommand('copy');
                        document.body.removeChild(textArea);

                        if (successful) {
                            console.log('✅ 报告已复制到剪贴板 (execCommand)');
                            this.showCopySuccess();
                        } else {
                            console.error('❌ execCommand 复制失败');
                            this.showCopyError();
                        }
                    } catch (err) {
                        console.error('❌ 降级复制方案失败:', err);
                        this.showCopyError();
                    }
                },

                /**
                 * 显示复制成功提示
                 */
                showCopySuccess() {
                    // 这里可以添加成功提示的UI反馈
                    this.copyStatus = {
                        success: true,
                        message: '报告已成功复制到剪贴板！'
                    };

                    // 3秒后清除提示
                    setTimeout(() => {
                        this.copyStatus = { success: false, message: '' };
                    }, 3000);
                },

                /**
                 * 显示复制失败提示
                 */
                showCopyError() {
                    this.copyStatus = {
                        success: false,
                        message: '复制失败，请手动选择文本复制'
                    };

                    // 5秒后清除提示
                    setTimeout(() => {
                        this.copyStatus = { success: false, message: '' };
                    }, 5000);
                },

                // ===== 智能微信消息解析系统 =====

                /**
                 * 智能微信消息解析（根据计算逻辑优化.md标准）
                 */
                parseYesterdayData() {
                    console.log('🔍 开始智能微信消息解析...');

                    try {
                        // 解析逻辑
                        const text = this.formData.yesterdayData;
                        const extractedData = {};

                        // 根据计算逻辑优化.md的解析规则
                        const patterns = {
                            gasoline92: /92#汽油销售?(\d+\.?\d*)吨/,
                            gasoline95: /95#汽油(\d+\.?\d*)吨/,
                            gasoline98: /98#汽油销售?(\d+\.?\d*)吨/,
                            diesel: /柴油(\d+\.?\d*)吨/,
                            gasolineTotal: /共计汽油销售(\d+\.?\d*)吨/,
                            totalSales: /柴汽合计销售(\d+\.?\d*)吨/,
                            monthlyGasoline: /本月累计销售汽油(\d+\.?\d*)吨/,
                            monthlyDiesel: /柴油(\d+\.?\d*)吨，共销售油品/,
                            monthlyTotal: /共销售油品(\d+\.?\d*)吨/,
                            nonOilSales: /当日非油销售(\d+\.?\d*)元/,
                            monthlyNonOil: /本月累计(\d+\.?\d*)元/,
                            electronicVouchersToday: /当日电子券核销(\d+)张/,
                            electronicVouchersTotal: /累计核销(\d+)张/,
                            icbcPointsExchange: /工行积分兑换(\d+)笔/,
                            icbcExchangeAmount: /兑换?金额(\d+\.?\d*)元/,
                            icbcETC: /当日工行ETC(\d+)单/,
                            threeEndOrders: /三端订单消费(\d+)笔/,
                            actualReviews: /实际评价数量(\d+)笔/,
                            ratingRate: /测评率(\d+)％/,
                            electronicCards: /今日办理电子卡(\d+)张/
                        };

                        let successCount = 0;
                        Object.keys(patterns).forEach(field => {
                            const match = text.match(patterns[field]);
                            if (match) {
                                extractedData[field] = parseFloat(match[1]);
                                successCount++;
                            }
                        });

                        if (successCount >= 5) {
                            // 计算汇总数据
                            const calculatedGasolineTotal = (extractedData.gasoline92 || 0) +
                                                          (extractedData.gasoline95 || 0) +
                                                          (extractedData.gasoline98 || 0);
                            const calculatedTotalSales = calculatedGasolineTotal + (extractedData.diesel || 0);

                            // 应用解析的数据
                            this.yesterdayData = {
                                // 单个汽油字段
                                gasoline92: extractedData.gasoline92 || 0,
                                gasoline95: extractedData.gasoline95 || 0,
                                gasoline98: extractedData.gasoline98 || 0,
                                diesel: extractedData.diesel || 0,
                                nonOilSales: extractedData.nonOilSales || 0,
                                monthlyGasoline: extractedData.monthlyGasoline || 0,
                                monthlyDiesel: extractedData.monthlyDiesel || 0,
                                monthlyTotal: extractedData.monthlyTotal || 0,
                                monthlyNonOil: extractedData.monthlyNonOil || 0,
                                vouchersTotal: extractedData.electronicVouchersTotal || 0,
                                // 汇总数据（优先使用解析结果，如无则使用计算结果）
                                gasolineTotal: extractedData.gasolineTotal || calculatedGasolineTotal,
                                totalSales: extractedData.totalSales || calculatedTotalSales,
                                parsed: true
                            };

                            console.log(`✅ 解析成功！提取了${successCount}个关键数据`);
                            console.log('📊 解析结果:', this.yesterdayData);

                        } else {
                            console.log('❌ 解析失败，请检查数据格式');
                        }

                    } catch (error) {
                        console.error('❌ 解析过程出错:', error);
                    }
                },

                // ===== 任务2.2：现代化动画控制系统 =====

                /**
                 * 通用动画触发方法
                 * 修复：支持步骤更新回调，在动画隐藏阶段更新currentStep，避免Alpine.js响应式冲突
                 * @param {object} config - 动画配置对象
                 */
                triggerEntranceAnimation(config) {
                    console.log(`🎭 触发${config.name}动画 - 真正的入场效果`);

                    // 先重置所有动画状态
                    this.resetAnimations();

                    // 获取所有卡片元素
                    const cards = document.querySelectorAll('.card');

                    // 第一步：立即隐藏所有卡片，实现真正的入场效果
                    cards.forEach(card => {
                        card.style.opacity = '0';
                        card.style.visibility = 'hidden';
                        card.style.transform = 'scale(0.8) translateY(20px)';
                        card.style.transition = 'none'; // 禁用过渡，立即隐藏
                    });

                    // 第二步：在隐藏状态下执行步骤更新回调（如果提供）
                    // 这样Alpine.js的响应式更新发生在卡片已隐藏的状态下，避免快速缩放
                    if (config.stepUpdateCallback && typeof config.stepUpdateCallback === 'function') {
                        setTimeout(() => {
                            config.stepUpdateCallback();
                        }, 75); // 在卡片隐藏后、动画开始前执行
                    }

                    // 第三步：短暂延迟后开始入场动画
                    setTimeout(() => {
                        cards.forEach((card, index) => {
                            // 强制重绘，确保隐藏状态生效
                            card.offsetHeight;

                            // 创建多层视觉效果元素
                            const borderGlow = document.createElement('div');
                            borderGlow.className = config.borderGlowClass;
                            card.appendChild(borderGlow);

                            // 添加GPU加速和动画容器类
                            card.classList.add('gpu-accelerated', 'animation-container');

                            // 延迟应用入场动画，创建层次感
                            setTimeout(() => {
                                // 🔧 修复：确保无缝过渡，避免任何闪现
                                card.style.transition = 'none';

                                // 先应用CSS动画的0%状态，确保与动画起始状态一致
                                if (config.type === 'magnetic') {
                                    card.style.opacity = '0';
                                    card.style.transform = 'translateY(60px) scale(0.8) rotateX(15deg)';
                                    card.style.filter = 'blur(8px) brightness(0.7)';
                                } else if (config.type === 'hologram') {
                                    card.style.opacity = '0';
                                    card.style.transform = 'scale(0.1) rotateX(90deg) skewX(45deg)';
                                    card.style.filter = 'blur(30px) hue-rotate(0deg) saturate(0) brightness(0)';
                                }

                                // 立即显示卡片并添加动画类
                                card.style.visibility = 'visible';
                                card.classList.add(config.animationClass, `delay-${Math.min(index + 1, 5)}`);

                                // 强制重绘，确保所有状态生效
                                card.offsetHeight;

                                // 恢复transition，允许后续的悬停效果
                                card.style.transition = '';
                            }, config.cardDelay(index));
                        });
                    }, 150); // 150ms延迟确保隐藏状态生效

                    // 更新动画状态
                    this.animations.entrance = config.type;

                    // 播放成功提示
                    setTimeout(() => {
                        console.log(`✨ ${config.name}动画完成`);
                        this.appStatus.message = `${config.name}动画已完成 - ` + new Date().toLocaleTimeString();

                        // 确保卡片最终状态正确
                        cards.forEach(card => {
                            card.style.opacity = '';
                            card.style.visibility = '';
                            card.style.transform = '';
                            card.style.transition = '';
                            // 🔧 修复：清理filter内联样式，避免全息投影动画后卡片变黑
                            card.style.filter = '';
                        });

                        // 🔧 修复：扫描动画完成后移除clip-path，恢复圆角
                        if (config.type === 'scanner') {
                            const scanCards = document.querySelectorAll('.light-scan-entrance');
                            scanCards.forEach(card => {
                                card.style.clipPath = 'none';
                            });
                            console.log('🔧 扫描动画完成，已移除clip-path恢复圆角');
                        }

                        // 🔧 修复：全息投影动画完成后清理动画状态，恢复悬停效果
                        if (config.type === 'hologram') {
                            const hologramCards = document.querySelectorAll('.hologram-matrix-entrance');
                            hologramCards.forEach(card => {
                                // 移除动画类，保留基础样式，允许悬停效果
                                setTimeout(() => {
                                    card.classList.remove('hologram-matrix-entrance');
                                    card.classList.add('hologram-matrix-completed');
                                }, 200);
                            });
                            console.log('🔧 全息投影动画完成，已清理动画状态恢复悬停效果');
                        }

                        // 🔧 量子粒子动画完成后清理动画状态，恢复悬停效果
                        if (config.type === 'quantum') {
                            const quantumCards = document.querySelectorAll('.quantum-particle-entrance');
                            quantumCards.forEach(card => {
                                // 移除动画类，保留基础样式，允许悬停效果
                                setTimeout(() => {
                                    card.classList.remove('quantum-particle-entrance');
                                    card.classList.add('quantum-particle-completed');
                                }, 200);
                            });
                            console.log('🔧 量子粒子动画完成，已清理动画状态恢复悬停效果');
                        }
                    }, config.completionDelay);
                },

                /**
                 * 触发磁悬浮入场动画
                 * 现代商业风格，适合加油站专业环境
                 * 修复：支持步骤更新回调，在动画隐藏阶段更新currentStep
                 * @param {function} stepUpdateCallback 步骤更新回调函数
                 */
                triggerMagneticEntrance(stepUpdateCallback = null) {
                    this.triggerEntranceAnimation({
                        name: '磁悬浮入场',
                        type: 'magnetic',
                        borderGlowClass: 'magnetic-border-glow',
                        animationClass: 'magnetic-entrance',
                        cardDelay: (index) => 50 + (index * 10),
                        completionDelay: 1500,
                        stepUpdateCallback: stepUpdateCallback
                    });
                },

                /**
                 * 触发真正的扫描仪入场动画
                 * 模拟真实扫描设备，从左到右扫描显现
                 */
                triggerLightScanEntrance() {
                    this.triggerEntranceAnimation({
                        name: '扫描仪入场',
                        type: 'scanner',
                        borderGlowClass: 'scan-border-glow',
                        animationClass: 'light-scan-entrance',
                        cardDelay: (index) => 200 * index,
                        completionDelay: 2500
                    });
                },

                /**
                 * 触发全息投影矩阵入场动画
                 * 模拟科幻全息投影效果，矩阵扫描线+故障艺术风格
                 */
                triggerHologramMatrixEntrance() {
                    this.triggerEntranceAnimation({
                        name: '全息投影矩阵',
                        type: 'hologram',
                        borderGlowClass: 'hologram-border-glow',
                        animationClass: 'hologram-matrix-entrance',
                        cardDelay: (index) => 50 + (index * 60),
                        completionDelay: 1200
                    });
                },

                /**
                 * 触发量子粒子聚合入场动画
                 * 真正的粒子从四周聚合到中心的效果
                 */
                triggerQuantumParticleEntrance() {
                    console.log('🎭 触发量子粒子聚合动画 - 新版本调试代码已加载！');

                    // 先重置所有动画状态
                    this.resetAnimations();

                    // 获取所有卡片元素
                    const allCards = document.querySelectorAll('.card');

                    // 🔍 调试信息：分析所有卡片
                    console.log(`📊 调试信息：找到 ${allCards.length} 个卡片元素`);

                    allCards.forEach((card, index) => {
                        const rect = card.getBoundingClientRect();
                        const isVisible = rect.width > 0 && rect.height > 0;
                        const computedStyle = window.getComputedStyle(card);
                        const isDisplayed = computedStyle.display !== 'none';
                        const isOpaque = computedStyle.opacity !== '0';

                        // 获取卡片的标识信息
                        const cardId = card.id || 'no-id';
                        const cardClasses = card.className;
                        const cardText = card.querySelector('h1, h2, h3')?.textContent?.substring(0, 30) || '无标题';

                        console.log(`🔍 卡片 ${index + 1}:`, {
                            id: cardId,
                            classes: cardClasses,
                            title: cardText,
                            rect: {
                                top: rect.top.toFixed(1),
                                left: rect.left.toFixed(1),
                                width: rect.width.toFixed(1),
                                height: rect.height.toFixed(1)
                            },
                            isVisible,
                            isDisplayed,
                            isOpaque,
                            shouldAnimate: isVisible && isDisplayed && isOpaque
                        });
                    });

                    // 过滤出需要动画的卡片
                    const cards = Array.from(allCards).filter(card => {
                        const rect = card.getBoundingClientRect();
                        const computedStyle = window.getComputedStyle(card);
                        const isVisible = rect.width > 0 && rect.height > 0;
                        const isDisplayed = computedStyle.display !== 'none';
                        const isOpaque = computedStyle.opacity !== '0';

                        return isVisible && isDisplayed && isOpaque;
                    });

                    console.log(`✅ 过滤后：${cards.length} 个卡片将执行动画`);

                    // 等待重置完成后再应用新动画
                    setTimeout(() => {
                        cards.forEach((card, index) => {
                            // 强制重绘，确保样式重置
                            card.offsetHeight;

                            // 创建粒子聚合效果
                            this.createQuantumParticles(card);

                            // 添加GPU加速和动画容器类
                            card.classList.add('gpu-accelerated', 'animation-container');

                            // 延迟添加卡片显现动画
                            setTimeout(() => {
                                card.classList.add('quantum-particle-entrance', `delay-${Math.min(index + 1, 5)}`);
                            }, 20 + (index * 10));
                        });
                    }, 100);

                    // 更新动画状态
                    this.animations.entrance = 'quantum';

                    // 播放成功提示和清理
                    setTimeout(() => {
                        console.log('✨ 量子粒子聚合动画完成');
                        this.appStatus.message = '量子粒子聚合动画已完成 - ' + new Date().toLocaleTimeString();

                        // 清理动画状态，恢复悬停效果
                        const quantumCards = document.querySelectorAll('.quantum-particle-entrance');
                        quantumCards.forEach(card => {
                            setTimeout(() => {
                                card.classList.remove('quantum-particle-entrance');
                                card.classList.add('quantum-particle-completed');
                            }, 200);
                        });
                        console.log('🔧 量子粒子动画完成，已清理动画状态恢复悬停效果');
                    }, 800);
                },

                /**
                 * 创建量子粒子聚合效果 - 圆形从卡片边框外围随机飞入聚合扩展成卡片
                 * @param {Element} card 目标卡片元素
                 */
                createQuantumParticles(card) {
                    // 🎯 阶段0：立即隐藏卡片，为粒子聚合显示过程做准备
                    card.style.opacity = '0';
                    console.log('🫥 卡片已立即隐藏，开始量子粒子聚合过程');

                    // 检测设备类型，调整粒子大小和外围距离
                    const isMobile = window.innerWidth <= 768;
                    const baseSizeMultiplier = isMobile ? 0.7 : 1;
                    const marginDistance = isMobile ? 120 : 180; // 移动端减少外围距离

                    // RGB颜色库（不含透明度，后续单独控制）
                    const rgbColors = [
                        'rgb(63, 81, 181)',    // 深蓝
                        'rgb(156, 39, 176)',   // 紫色
                        'rgb(33, 150, 243)',   // 蓝色
                        'rgb(103, 58, 183)',   // 深紫
                        'rgb(255, 193, 7)',    // 金色
                        'rgb(76, 175, 80)',    // 绿色
                        'rgb(244, 67, 54)',    // 红色
                        'rgb(233, 30, 99)',    // 粉色
                        'rgb(0, 188, 212)',    // 青色
                        'rgb(255, 152, 0)',    // 橙色
                        'rgb(121, 85, 72)',    // 棕色
                        'rgb(158, 158, 158)',  // 灰色
                        'rgb(96, 125, 139)',   // 蓝灰
                        'rgb(139, 195, 74)',   // 浅绿
                        'rgb(255, 87, 34)'     // 深橙
                    ];

                    // 选择最终超大圆形的随机颜色（固定50%透明度）
                    const finalCircleRgb = rgbColors[Math.floor(Math.random() * rgbColors.length)];
                    const finalCircleOpacity = 0.5; // 固定50%透明度

                    // 获取app-container作为粒子容器
                    const appContainer = document.querySelector('.app-container');
                    if (!appContainer) {
                        console.error('❌ 未找到app-container，无法创建量子粒子');
                        return;
                    }

                    // 计算卡片相对于app-container的位置
                    const cardRect = card.getBoundingClientRect();
                    const containerRect = appContainer.getBoundingClientRect();

                    // 🔍 调试信息：坐标计算详情
                    const cardTitle = card.querySelector('h1, h2, h3')?.textContent?.substring(0, 30) || '无标题';
                    console.log(`🎯 量子粒子坐标计算 - ${cardTitle}:`, {
                        cardRect: {
                            top: cardRect.top.toFixed(1),
                            left: cardRect.left.toFixed(1),
                            width: cardRect.width.toFixed(1),
                            height: cardRect.height.toFixed(1)
                        },
                        containerRect: {
                            top: containerRect.top.toFixed(1),
                            left: containerRect.left.toFixed(1),
                            width: containerRect.width.toFixed(1),
                            height: containerRect.height.toFixed(1)
                        }
                    });

                    // 卡片中心点相对于容器的坐标
                    const cardCenterX = cardRect.left - containerRect.left + cardRect.width / 2;
                    const cardCenterY = cardRect.top - containerRect.top + cardRect.height / 2;

                    // 🔍 调试信息：计算结果
                    console.log(`📍 聚合中心坐标 - ${cardTitle}:`, {
                        cardCenterX: cardCenterX.toFixed(1),
                        cardCenterY: cardCenterY.toFixed(1),
                        isNearZero: cardCenterX < 50 || cardCenterY < 50,
                        isNegative: cardCenterX < 0 || cardCenterY < 0
                    });

                    // 定义卡片外围的矩形区域
                    const outerRect = {
                        left: cardCenterX - cardRect.width/2 - marginDistance,
                        right: cardCenterX + cardRect.width/2 + marginDistance,
                        top: cardCenterY - cardRect.height/2 - marginDistance,
                        bottom: cardCenterY + cardRect.height/2 + marginDistance
                    };

                    // 卡片内部区域（需要排除）
                    const cardInnerRect = {
                        left: cardCenterX - cardRect.width/2,
                        right: cardCenterX + cardRect.width/2,
                        top: cardCenterY - cardRect.height/2,
                        bottom: cardCenterY + cardRect.height/2
                    };

                    // 动态生成随机圆形粒子配置
                    const particleCount = 14; // 14个圆形粒子飞入聚合
                    const particles = [];

                    for (let i = 0; i < particleCount; i++) {
                        let startX, startY;
                        let attempts = 0;
                        const maxAttempts = 50;

                        // 在外围区域随机生成位置，避开卡片内部
                        do {
                            startX = outerRect.left + Math.random() * (outerRect.right - outerRect.left);
                            startY = outerRect.top + Math.random() * (outerRect.bottom - outerRect.top);
                            attempts++;
                        } while (
                            attempts < maxAttempts &&
                            startX > cardInnerRect.left &&
                            startX < cardInnerRect.right &&
                            startY > cardInnerRect.top &&
                            startY < cardInnerRect.bottom
                        );

                        // 简单圆形粒子尺寸 (30-60px)
                        const baseSize = 30 + Math.random() * 30;
                        const size = Math.round(baseSize * baseSizeMultiplier);

                        // 随机颜色（RGB格式）
                        const rgbColor = rgbColors[Math.floor(Math.random() * rgbColors.length)];

                        // 随机透明度 (20%-50%，确保人眼可见)
                        const opacity = 0.2 + Math.random() * 0.3; // 0.2-0.5范围

                        // 随机延迟 (0-300ms)
                        const delay = Math.random() * 300;

                        particles.push({
                            startX,
                            startY,
                            targetX: cardCenterX, // 飞入目标：卡片中心
                            targetY: cardCenterY,
                            size,
                            rgbColor,
                            opacity,
                            delay
                        });
                    }

                    console.log(`🎭 量子粒子生成完成: ${particleCount}个粒子，卡片中心(${cardCenterX.toFixed(1)}, ${cardCenterY.toFixed(1)})`);

                    // 创建飞入圆形粒子
                    this.createFlyingCircles(card, particles, finalCircleRgb, finalCircleOpacity, baseSizeMultiplier, appContainer, cardCenterX, cardCenterY, cardRect);
                },

                /**
                 * 创建飞入圆形动画 - 从边框外围飞入卡片中心
                 * @param {Element} card 卡片元素
                 * @param {Array} particles 圆形粒子配置
                 * @param {string} finalRgbColor 最终超大圆形RGB颜色
                 * @param {number} finalOpacity 最终超大圆形透明度
                 * @param {number} sizeMultiplier 尺寸倍数
                 * @param {Element} container 粒子容器（app-container）
                 * @param {number} cardCenterX 卡片中心X坐标
                 * @param {number} cardCenterY 卡片中心Y坐标
                 * @param {DOMRect} cardRect 卡片尺寸信息
                 */
                createFlyingCircles(card, particles, finalRgbColor, finalOpacity, sizeMultiplier, container, cardCenterX, cardCenterY, cardRect) {

                    // 存储粒子元素引用，用于后续清理
                    const particleElements = [];

                    // 阶段1：创建飞入圆形
                    particles.forEach((particle, index) => {
                        const circleEl = document.createElement('div');
                        circleEl.className = 'quantum-flying-circle';
                        circleEl.setAttribute('data-card-id', card.id || `card-${Date.now()}`);

                        // 设置简单圆形样式 - 性能优化，使用随机透明度
                        circleEl.style.cssText = `
                            position: absolute;
                            width: ${particle.size}px;
                            height: ${particle.size}px;
                            background: ${particle.rgbColor};
                            opacity: ${particle.opacity};
                            border-radius: 50%;
                            top: 0;
                            left: 0;
                            z-index: 20;
                            pointer-events: none;
                            will-change: transform, opacity;
                        `;

                        // 设置初始位置（边框外围的绝对位置）
                        circleEl.style.transform = `translate(${particle.startX - particle.size/2}px, ${particle.startY - particle.size/2}px)`;

                        // 添加到app-container而不是card
                        container.appendChild(circleEl);
                        particleElements.push(circleEl);

                        console.log(`🎯 粒子${index + 1}: 从(${particle.startX.toFixed(1)}, ${particle.startY.toFixed(1)}) 飞向(${particle.targetX.toFixed(1)}, ${particle.targetY.toFixed(1)})，透明度${(particle.opacity * 100).toFixed(0)}%`);

                        // 延迟启动飞入动画
                        setTimeout(() => {
                            // 阶段1：飞入卡片中心 (0-600ms)
                            circleEl.style.transition = 'transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                            circleEl.style.transform = `translate(${particle.targetX - particle.size/2}px, ${particle.targetY - particle.size/2}px)`;

                            // 阶段2：聚合消失 (600-800ms)
                            setTimeout(() => {
                                circleEl.style.transition = 'transform 0.2s ease-out, opacity 0.2s ease-out';
                                circleEl.style.transform = `translate(${particle.targetX - particle.size/2}px, ${particle.targetY - particle.size/2}px) scale(0.1)`;
                                circleEl.style.opacity = '0';
                            }, 600);
                        }, particle.delay);
                    });

                    // 阶段3：创建最终超大圆形和遮罩扩展 (延迟800ms)
                    setTimeout(() => {
                        this.createFinalCircleAndMask(card, finalRgbColor, finalOpacity, sizeMultiplier, container, cardCenterX, cardCenterY, cardRect);
                    }, 800);

                    // 清理所有圆形元素
                    setTimeout(() => {
                        // 清理飞入粒子（从container中移除）
                        particleElements.forEach(el => {
                            if (el.parentNode) {
                                el.parentNode.removeChild(el);
                            }
                        });

                        // 清理最终圆形（从container中移除）
                        const finalCircles = container.querySelectorAll('.quantum-final-circle');
                        finalCircles.forEach(el => {
                            if (el.parentNode) {
                                el.parentNode.removeChild(el);
                            }
                        });

                        console.log('🧹 量子粒子清理完成');
                    }, 2500);
                },

                /**
                 * 创建最终超大圆形和遮罩扩展效果
                 * @param {Element} card 卡片元素
                 * @param {string} finalRgbColor 最终超大圆形RGB颜色
                 * @param {number} finalOpacity 最终超大圆形透明度
                 * @param {number} sizeMultiplier 尺寸倍数
                 * @param {Element} container 粒子容器（app-container）
                 * @param {number} cardCenterX 卡片中心X坐标
                 * @param {number} cardCenterY 卡片中心Y坐标
                 * @param {DOMRect} cardRect 卡片尺寸信息
                 */
                createFinalCircleAndMask(card, finalRgbColor, finalOpacity, sizeMultiplier, container, cardCenterX, cardCenterY, cardRect) {
                    // 超大圆形尺寸 (150-200px) - 简化尺寸避免性能问题
                    const baseFinalSize = 150 + Math.random() * 50;
                    const finalSize = Math.round(baseFinalSize * sizeMultiplier);

                    // 创建最终超大圆形
                    const finalCircleEl = document.createElement('div');
                    finalCircleEl.className = 'quantum-final-circle';
                    finalCircleEl.setAttribute('data-card-id', card.id || `card-${Date.now()}`);
                    finalCircleEl.style.cssText = `
                        position: absolute;
                        width: ${finalSize}px;
                        height: ${finalSize}px;
                        background: ${finalRgbColor};
                        opacity: ${finalOpacity};
                        border-radius: 50%;
                        top: 0;
                        left: 0;
                        z-index: 25;
                        pointer-events: none;
                        will-change: transform, opacity;
                        transform: translate(${cardCenterX - finalSize/2}px, ${cardCenterY - finalSize/2}px) scale(0);
                    `;

                    // 添加到app-container
                    container.appendChild(finalCircleEl);

                    console.log(`🔮 最终圆形创建: 尺寸${finalSize}px，位置(${cardCenterX.toFixed(1)}, ${cardCenterY.toFixed(1)})，透明度${(finalOpacity * 100).toFixed(0)}%`);

                    // 阶段3：超大圆形出现 (0-200ms)
                    setTimeout(() => {
                        finalCircleEl.style.transition = 'transform 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                        finalCircleEl.style.transform = `translate(${cardCenterX - finalSize/2}px, ${cardCenterY - finalSize/2}px) scale(1)`;

                        // 阶段4：开始卡片显示过程 (200ms后)
                        setTimeout(() => {
                            this.startCardRevealProcess(card, finalCircleEl, cardRect);
                        }, 200);
                    }, 50);
                },

                /**
                 * 开始卡片显示过程 - 从大圆形内部逐渐显示完整卡片
                 * @param {Element} card 卡片元素
                 * @param {Element} circleEl 大圆形元素
                 * @param {DOMRect} cardRect 卡片尺寸信息
                 */
                startCardRevealProcess(card, circleEl, cardRect) {
                    // 检测设备类型，调整动画时长
                    const isMobile = window.innerWidth <= 768;
                    const duration = isMobile ? 700 : 900; // 移动端稍快，桌面端舒缓
                    const easing = 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'; // 自然流畅，避免结尾过慢

                    // 计算目标半径：圆形扩展到卡片垂直边界
                    const targetRadius = cardRect.width / 2;

                    // 获取当前圆形尺寸作为起始半径
                    const currentSize = parseInt(circleEl.style.width) || 150;
                    const startRadius = currentSize / 2;

                    console.log(`🎭 开始卡片显示过程: ${startRadius}px → ${targetRadius.toFixed(1)}px，时长${duration}ms`);

                    // 🎯 阶段4A：设置卡片初始遮罩和显示
                    card.style.clipPath = `circle(${startRadius}px at center)`;
                    card.style.opacity = '1'; // 显示卡片（通过遮罩控制可见区域）

                    // 🎯 阶段4B：同步动画 - 遮罩扩展 + 大圆形消失
                    setTimeout(() => {
                        // 动画A：圆形遮罩扩大到卡片垂直边界
                        card.style.transition = `clip-path ${duration}ms ${easing}`;
                        card.style.clipPath = `circle(${targetRadius}px at center)`;

                        // 动画B：大圆形透明度降低到完全消失
                        circleEl.style.transition = `opacity ${duration}ms ${easing}`;
                        circleEl.style.opacity = '0';

                        console.log(`🔄 同步动画启动: 遮罩扩展 + 圆形消失，${duration}ms`);

                        // 🎯 阶段4C：动画完成后清理
                        setTimeout(() => {
                            // 移除遮罩，恢复正常显示
                            card.style.clipPath = '';
                            card.style.transition = '';

                            console.log('✨ 卡片显示过程完成，遮罩已清理');
                        }, duration + 50); // 稍微延迟确保动画完成
                    }, 50); // 短暂延迟确保初始状态设置完成
                },

                /**
                 * 触发数字雨瀑布入场动画
                 * 黑客矩阵风格，数字字符从上到下流动构建卡片
                 */
                triggerDigitalRainEntrance() {
                    console.log('🎭 触发数字雨瀑布动画');

                    // 先重置所有动画状态
                    this.resetAnimations();

                    // 获取所有卡片元素
                    const cards = document.querySelectorAll('.card');

                    // 等待重置完成后再应用新动画
                    setTimeout(() => {
                        cards.forEach((card, index) => {
                            // 强制重绘，确保样式重置
                            card.offsetHeight;

                            // 创建数字雨效果
                            this.createDigitalRain(card);

                            // 创建边框发光效果 - 每个卡片随机颜色
                            const borderGlow = document.createElement('div');
                            borderGlow.className = 'digital-rain-border-glow';

                            // 为边框发光随机选择颜色（与Emoji粒子使用相同的12色颜色池）
                            const glowColors = ['#00ff41', '#ff0080', '#00ffff', '#ff4000', '#8000ff', '#ffff00', '#ff8000', '#0080ff', '#ff0040', '#40ff00', '#ff4080', '#80ff40'];
                            const randomBorderColor = glowColors[Math.floor(Math.random() * glowColors.length)];

                            // 设置随机颜色的渐变背景（保持原有的透明度层次）
                            borderGlow.style.background = `linear-gradient(45deg,
                                ${randomBorderColor}4D,
                                ${randomBorderColor}33,
                                ${randomBorderColor}4D
                            )`;

                            console.log(`🎨 卡片${index + 1}边框发光颜色: ${randomBorderColor}`);

                            card.appendChild(borderGlow);

                            // 添加GPU加速和动画容器类
                            card.classList.add('gpu-accelerated', 'animation-container');

                            // 延迟添加卡片显现动画
                            setTimeout(() => {
                                card.classList.add('digital-rain-entrance', `delay-${Math.min(index + 1, 5)}`);
                            }, 50 + (index * 30));
                        });
                    }, 100);

                    // 更新动画状态
                    this.animations.entrance = 'digital-rain';

                    // 播放成功提示和清理
                    setTimeout(() => {
                        console.log('✨ 数字雨瀑布动画完成');
                        this.appStatus.message = '数字雨瀑布动画已完成 - ' + new Date().toLocaleTimeString();

                        // 清理动画状态，恢复悬停效果
                        const digitalCards = document.querySelectorAll('.digital-rain-entrance');
                        digitalCards.forEach(card => {
                            setTimeout(() => {
                                card.classList.remove('digital-rain-entrance');
                                card.classList.add('digital-rain-completed');
                            }, 200);
                        });
                        console.log('🔧 数字雨动画完成，已清理动画状态恢复悬停效果');
                    }, 2200);
                },

                /**
                 * 创建数字雨瀑布效果
                 * @param {Element} card 目标卡片元素
                 */
                createDigitalRain(card) {
                    // 检测设备类型，调整Emoji字符大小和数量
                    const isMobile = window.innerWidth <= 768;
                    const charCount = isMobile ? 18 : 30; // 增加字符数量，展示更多种类的加油站符号
                    const fontSize = isMobile ? 14 : 18; // Emoji字符稍大一些，增强视觉效果

                    // 加油站主题Emoji字符集 - 使用数组确保正确处理Emoji字符
                    const chars = ['⛽','🛢️','🚗','🚙','🚚','🏎️','🚐','⚡','🔋','⚙️','🔧','🛠️','💰','💳','🏪','📊','📈','🚛','🚌','🏍️','🛵','🚜','🚓','🚑','🚒','🛣️','🛤️','🚥','🛑','⚠️','🏢','🏭','🏗️','🔩','💵','💴','💶','💷','💸','🧾'];

                    // 调试：验证字符数组
                    console.log(`🔍 字符数组验证: 共${chars.length}个符号`, chars.slice(0, 10));

                    // 获取卡片尺寸
                    const cardRect = card.getBoundingClientRect();
                    const cardWidth = cardRect.width;
                    const cardHeight = cardRect.height;

                    // 随机颜色数组 - 炫酷的科技感颜色
                    const glowColors = [
                        '#00ff41', // 经典绿色
                        '#ff0080', // 洋红色
                        '#00ffff', // 青色
                        '#ff4000', // 橙红色
                        '#8000ff', // 紫色
                        '#ffff00', // 黄色
                        '#ff8000', // 橙色
                        '#0080ff', // 蓝色
                        '#ff0040', // 粉红色
                        '#40ff00', // 亮绿色
                        '#ff4080', // 玫瑰色
                        '#80ff40'  // 青绿色
                    ];

                    // 创建数字雨字符
                    for (let i = 0; i < charCount; i++) {
                        const charEl = document.createElement('div');
                        charEl.className = 'digital-rain-char';
                        // 从数组中随机选择一个完整的Emoji字符
                        const selectedChar = chars[Math.floor(Math.random() * chars.length)];
                        charEl.textContent = selectedChar;

                        // 随机选择发光颜色
                        const randomColor = glowColors[Math.floor(Math.random() * glowColors.length)];

                        // 随机位置和样式 - 针对Emoji字符优化
                        const startX = Math.random() * (cardWidth - 20); // 避免Emoji字符被截断
                        const startY = -30 - (Math.random() * 80); // 从卡片上方开始，给Emoji更多空间
                        const duration = 1200 + Math.random() * 800; // 1.2-2秒，稍慢一些让Emoji更清晰
                        const delay = Math.random() * 600; // 0-600ms延迟，增加随机性

                        // 动态计算移动距离：从起始位置移动到卡片下方 + 缓冲区
                        const moveDistance = cardHeight + Math.abs(startY) + 50; // 卡片高度 + 起始偏移 + 50px缓冲

                        charEl.style.cssText = `
                            position: absolute;
                            left: ${startX}px;
                            top: ${startY}px;
                            font-size: ${fontSize}px;
                            opacity: 0;
                            animation: digitalRainFall ${duration}ms linear ${delay}ms both;
                            filter: drop-shadow(0 0 4px ${randomColor}) drop-shadow(0 0 8px ${randomColor}) drop-shadow(0 0 12px ${randomColor});
                            --move-distance: ${moveDistance}px;
                        `;

                        card.appendChild(charEl);

                        // 动画结束后清理字符
                        setTimeout(() => {
                            if (charEl.parentNode) {
                                charEl.parentNode.removeChild(charEl);
                            }
                        }, duration + delay + 100);
                    }

                    console.log(`🌧️ 加油站主题数字雨创建完成: ${charCount}个随机彩色Emoji字符(共${chars.length}种符号，${glowColors.length}种颜色)，卡片尺寸(${cardWidth.toFixed(1)}×${cardHeight.toFixed(1)})，动态移动距离已设置`);
                },

                /**
                 * 重置所有动画
                 * 清除动画类，恢复初始状态
                 */
                resetAnimations() {
                    console.log('🔄 重置所有动画');

                    const cards = document.querySelectorAll('.card');
                    cards.forEach(card => {
                        // 移除所有动画相关的类
                        card.classList.remove(
                            'magnetic-entrance', 'light-scan-entrance', 'hologram-matrix-entrance', 'hologram-matrix-completed',
                            'quantum-particle-entrance', 'quantum-particle-completed',
                            'digital-rain-entrance', 'digital-rain-completed',
                            'gpu-accelerated', 'animation-container',
                            'delay-1', 'delay-2', 'delay-3', 'delay-4', 'delay-5'
                        );

                        // 清理多层视觉效果元素
                        const scanBorderGlow = card.querySelector('.scan-border-glow');
                        if (scanBorderGlow) {
                            scanBorderGlow.remove();
                        }

                        const magneticBorderGlow = card.querySelector('.magnetic-border-glow');
                        if (magneticBorderGlow) {
                            magneticBorderGlow.remove();
                        }

                        const hologramBorderGlow = card.querySelector('.hologram-border-glow');
                        if (hologramBorderGlow) {
                            hologramBorderGlow.remove();
                        }

                        // 🔧 修复：清理量子粒子边框发光效果
                        const quantumBorderGlow = card.querySelector('.quantum-border-glow');
                        if (quantumBorderGlow) {
                            quantumBorderGlow.remove();
                        }

                        // 清理数字雨边框发光效果
                        const digitalRainBorderGlow = card.querySelector('.digital-rain-border-glow');
                        if (digitalRainBorderGlow) {
                            digitalRainBorderGlow.remove();
                        }

                        // 清理数字雨字符元素
                        const digitalRainChars = card.querySelectorAll('.digital-rain-char');
                        digitalRainChars.forEach(char => char.remove());

                        // 🔧 修复：清理量子粒子元素（从卡片中）
                        const quantumParticles = card.querySelectorAll('.quantum-particle, .quantum-flying-particle, .quantum-final-particle, .quantum-flying-circle, .quantum-final-circle');
                        quantumParticles.forEach(particle => particle.remove());

                        // 🔧 修复：清理app-container中的量子粒子元素
                        const appContainer = document.querySelector('.app-container');
                        if (appContainer) {
                            const containerQuantumParticles = appContainer.querySelectorAll('.quantum-flying-circle, .quantum-final-circle');
                            containerQuantumParticles.forEach(particle => {
                                // 检查是否属于当前卡片
                                const cardId = card.id || `card-${Date.now()}`;
                                if (particle.getAttribute('data-card-id') === cardId || !particle.getAttribute('data-card-id')) {
                                    particle.remove();
                                }
                            });
                        }

                        // 🔧 修复：清理遮罩样式
                        card.style.clipPath = '';
                        card.style.transition = '';

                        // 强制重绘，确保样式完全重置
                        card.offsetHeight;

                        // 清除可能残留的内联样式（包括clip-path修复）
                        card.style.animation = '';
                        card.style.transform = '';
                        card.style.opacity = '';
                        card.style.filter = '';
                        card.style.clipPath = '';  // 🔧 修复：清除clip-path属性
                        card.style.webkitClipPath = '';  // 🔧 修复：清除webkit前缀

                        // 强制重新计算样式
                        window.getComputedStyle(card).opacity;

                        // 强制重绘确保样式完全重置
                        card.offsetHeight;
                    });

                    // 清理终极庆祝动画容器
                    const celebrationContainer = document.querySelector('.ultimate-celebration-container');
                    if (celebrationContainer) {
                        celebrationContainer.remove();
                        console.log('🧹 清理终极庆祝动画容器');
                    }

                    // 清理卡片上的庆祝效果
                    const allCards = document.querySelectorAll('.card');
                    allCards.forEach(card => {
                        card.classList.remove('celebration-card-glitch');
                    });

                    this.animations.entrance = '';
                    this.appStatus.message = '动画已重置，圆角始终保持 - ' + new Date().toLocaleTimeString();
                    console.log('✅ 动画重置完成，圆角已固定显示');
                },

                /**
                 * 终极庆祝动画 - 报告完成时的震撼视觉特效
                 * 融合5个顶级特效的精华，创造终极震撼效果
                 * 基于BlockStudio专业标准，达到商业软件水准
                 */
                triggerUltimateCelebrationAnimation() {
                    console.log('🎉 触发终极庆祝动画 - 报告生成完成！');

                    // 先重置所有动画状态
                    this.resetAnimations();

                    // 创建全屏庆祝容器
                    this.createCelebrationContainer();

                    // 执行四阶段庆祝动画序列
                    setTimeout(() => {
                        this.celebrationPhase1_ParticleBurst();
                    }, 100);

                    setTimeout(() => {
                        this.celebrationPhase2_HologramRestructure();
                    }, 1000);

                    setTimeout(() => {
                        this.celebrationPhase3_MagneticText();
                    }, 2000);

                    setTimeout(() => {
                        // 启动第四阶段，并获取动态结束时间
                        const rainEndTime = this.celebrationPhase4_CelebrationRain();

                        // 根据emoji雨的实际结束时间来清理动画
                        setTimeout(() => {
                            this.cleanupCelebrationAnimation();
                        }, rainEndTime);
                    }, 3000);

                    // 更新动画状态
                    this.animations.entrance = 'ultimate-celebration';
                    this.appStatus.message = '🎉 终极庆祝动画播放中 - 报告生成完成！';
                },

                /**
                 * 创建全屏庆祝容器
                 */
                createCelebrationContainer() {
                    // 创建全屏庆祝容器
                    const celebrationContainer = document.createElement('div');
                    celebrationContainer.className = 'ultimate-celebration-container';
                    celebrationContainer.innerHTML = `
                        <div class="celebration-overlay"></div>
                        <div class="celebration-particles-layer"></div>
                        <div class="celebration-text-layer"></div>
                        <div class="celebration-rain-layer"></div>
                    `;

                    document.body.appendChild(celebrationContainer);
                    console.log('🎭 庆祝容器已创建');
                },

                /**
                 * 第一阶段：量子粒子爆发 (0-1秒)
                 * 从中心向四周爆发彩色粒子
                 */
                celebrationPhase1_ParticleBurst() {
                    console.log('🎆 第一阶段：量子粒子爆发');

                    const particlesLayer = document.querySelector('.celebration-particles-layer');
                    if (!particlesLayer) return;

                    // 创建中心爆发点
                    const centerX = window.innerWidth / 2;
                    const centerY = window.innerHeight / 2;

                    // 创建80个超大爆发粒子 - 震撼视觉冲击
                    for (let i = 0; i < 80; i++) {
                        const particle = document.createElement('div');
                        particle.className = 'celebration-burst-particle';

                        // 随机角度和距离 - 超大爆发范围，飞得更远！
                        const angle = (Math.PI * 2 * i) / 80 + Math.random() * 0.8;
                        const distance = 500 + Math.random() * 700; // 500-1200px超远爆发距离！
                        const endX = centerX + Math.cos(angle) * distance;
                        const endY = centerY + Math.sin(angle) * distance;

                        // 随机颜色
                        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
                        const color = colors[Math.floor(Math.random() * colors.length)];

                        // 随机粒子大小 - 超大更震撼
                        const particleSize = 24 + Math.random() * 16; // 24-40px超大粒子！

                        particle.style.cssText = `
                            position: fixed;
                            left: ${centerX}px;
                            top: ${centerY}px;
                            width: ${particleSize}px;
                            height: ${particleSize}px;
                            background: ${color};
                            border-radius: 50%;
                            box-shadow:
                                0 0 40px ${color},
                                0 0 80px ${color}40,
                                0 0 120px ${color}20,
                                0 0 160px ${color}10;
                            z-index: 10000;
                            pointer-events: none;
                            animation: celebrationBurst 1s ease-out forwards;
                            --end-x: ${endX}px;
                            --end-y: ${endY}px;
                        `;

                        particlesLayer.appendChild(particle);
                    }
                },

                /**
                 * 第二阶段：全息矩阵重构 (1-2秒)
                 * 整个界面进行故障艺术重构
                 */
                celebrationPhase2_HologramRestructure() {
                    console.log('🌈 第二阶段：全息矩阵重构');

                    const overlay = document.querySelector('.celebration-overlay');
                    if (!overlay) return;

                    // 添加全息故障效果
                    overlay.classList.add('celebration-hologram-glitch');

                    // 对所有卡片应用故障效果
                    const cards = document.querySelectorAll('.card');
                    cards.forEach((card, index) => {
                        setTimeout(() => {
                            card.classList.add('celebration-card-glitch');
                        }, index * 100);
                    });

                    // 1秒后移除故障效果
                    setTimeout(() => {
                        overlay.classList.remove('celebration-hologram-glitch');
                        cards.forEach(card => {
                            card.classList.remove('celebration-card-glitch');
                        });
                    }, 1000);
                },

                /**
                 * 第三阶段：磁悬浮庆祝文字 (2-3秒)
                 * "报告生成完成"文字以磁悬浮效果出现
                 */
                celebrationPhase3_MagneticText() {
                    console.log('✨ 第三阶段：磁悬浮庆祝文字');

                    const textLayer = document.querySelector('.celebration-text-layer');
                    if (!textLayer) return;

                    // 创建庆祝文字
                    const celebrationText = document.createElement('div');
                    celebrationText.className = 'celebration-magnetic-text';
                    celebrationText.innerHTML = `
                        <div class="celebration-title">🎉 报告生成完成 🎉</div>
                        <div class="celebration-subtitle">Gas Station 数据报告已成功生成</div>
                    `;

                    textLayer.appendChild(celebrationText);

                    // 1秒后开始淡出
                    setTimeout(() => {
                        celebrationText.classList.add('celebration-text-fadeout');
                    }, 800);
                },

                /**
                 * 第四阶段：庆祝数字雨 (3-?秒)
                 * 庆祝主题的Emoji雨瀑布效果 - 优化版
                 * 更多emoji，等待所有emoji落到浏览器底部再结束
                 */
                celebrationPhase4_CelebrationRain() {
                    console.log('🌧️ 第四阶段：庆祝数字雨 - 优化版');

                    const rainLayer = document.querySelector('.celebration-rain-layer');
                    if (!rainLayer) return 2000; // 默认返回时间

                    // 庆祝主题Emoji字符集
                    const celebrationEmojis = ['🎉','🎊','🎈','🎁','🏆','⭐','✨','💫','🌟','🎯','🎪','🎭','🎨','🎵','🎶','🎤','🎸','🎺','🎷','🥳','😄','😊','👏','🙌','💪','👍','❤️','💖','💝','🔥','💎','🌈','☀️','🌞'];

                    // 🚀 优化：增加emoji数量，从30个增加到80个，创造更震撼的效果
                    const emojiCount = 80;
                    const spawnInterval = 40; // 每40ms生成一个emoji，更密集
                    const fallDuration = 2000; // 下落时间2秒，让用户充分欣赏

                    // 计算最后一个emoji的完整下落时间
                    const lastEmojiSpawnTime = (emojiCount - 1) * spawnInterval;
                    const totalAnimationTime = lastEmojiSpawnTime + fallDuration + 500; // 额外500ms缓冲

                    console.log(`🎯 庆祝雨参数：${emojiCount}个emoji，总时长${totalAnimationTime}ms`);

                    // 创建更多庆祝Emoji雨滴
                    for (let i = 0; i < emojiCount; i++) {
                        setTimeout(() => {
                            const rainDrop = document.createElement('div');
                            rainDrop.className = 'celebration-rain-drop';

                            const emoji = celebrationEmojis[Math.floor(Math.random() * celebrationEmojis.length)];
                            const startX = Math.random() * window.innerWidth;
                            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff', '#5f27cd'];
                            const color = colors[Math.floor(Math.random() * colors.length)];

                            rainDrop.style.cssText = `
                                position: fixed;
                                left: ${startX}px;
                                top: -50px;
                                font-size: 24px;
                                z-index: 10001;
                                pointer-events: none;
                                filter: drop-shadow(0 0 8px ${color});
                                animation: celebrationRainFall ${fallDuration}ms linear forwards;
                            `;
                            rainDrop.textContent = emoji;

                            rainLayer.appendChild(rainDrop);
                        }, i * spawnInterval);
                    }

                    // 返回总动画时间，让调用者知道何时清理
                    return totalAnimationTime;
                },

                /**
                 * 清理庆祝动画
                 */
                cleanupCelebrationAnimation() {
                    console.log('🧹 清理终极庆祝动画');

                    const celebrationContainer = document.querySelector('.ultimate-celebration-container');
                    if (celebrationContainer) {
                        celebrationContainer.remove();
                    }

                    // 清理卡片上的庆祝效果
                    const cards = document.querySelectorAll('.card');
                    cards.forEach(card => {
                        card.classList.remove('celebration-card-glitch');
                    });

                    this.animations.entrance = '';
                    this.appStatus.message = '🎉 终极庆祝动画完成 - ' + new Date().toLocaleTimeString();
                    console.log('✅ 终极庆祝动画清理完成');
                },



            }
        }
    </script>


    
    <!-- 加油站环境优化CSS样式系统 - 任务1.2完整实现 -->
    <style>
        /* ===== CSS变量系统 - 按照重构计划规范 ===== */
        :root {
            /* 加油站环境专用配色 - 防眩光高对比度 */
            --primary-color: #2E7D32;          /* 深绿色，护眼 */
            --primary-light: #4CAF50;          /* 浅绿色，成功状态 */
            --primary-dark: #1B5E20;           /* 深绿色，强调 */
            --secondary-color: #FFA726;        /* 橙色，警示 */
            --secondary-light: #FFB74D;        /* 浅橙色，提示 */
            --secondary-dark: #F57C00;         /* 深橙色，错误 */

            /* 背景色系 - 防眩光设计 */
            --background-color: #F5F5F5;       /* 浅灰背景，减少眩光 */
            --background-secondary: #FAFAFA;   /* 更浅的背景 */
            --background-card: rgba(255, 255, 255, 0.95); /* 半透明卡片 */
            --background-overlay: rgba(0, 0, 0, 0.05);     /* 轻微遮罩 */

            /* 文字色系 - 高对比度 */
            --text-color: #212121;             /* 深色文字，高对比度 */
            --text-secondary: #424242;         /* 次要文字 */
            --text-muted: #757575;             /* 辅助文字 */
            --text-light: #FFFFFF;             /* 白色文字 */
            --text-success: #2E7D32;           /* 成功文字 */
            --text-warning: #F57C00;           /* 警告文字 */
            --text-error: #D32F2F;             /* 错误文字 */

            /* 字体大小 - 加油站环境优化 */
            --font-size-xs: 14px;              /* 极小字体 */
            --font-size-sm: 16px;              /* 小字体 */
            --font-size-base: 18px;            /* 基础字体 - 大字体设计 */
            --font-size-lg: 20px;              /* 大字体 */
            --font-size-xl: 24px;              /* 超大字体 */
            --font-size-2xl: 28px;             /* 特大字体 */
            --font-size-3xl: 32px;             /* 巨大字体 */

            /* 组件尺寸 - 触摸友好 */
            --button-height: 48px;             /* 大按钮高度 */
            --button-height-sm: 40px;          /* 小按钮高度 */
            --input-height: 48px;              /* 输入框高度 */
            --touch-target: 44px;              /* 最小触摸目标 */

            /* 间距系统 */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;

            /* 圆角系统 */
            --border-radius-sm: 6px;
            --border-radius: 12px;
            --border-radius-lg: 16px;
            --border-radius-xl: 24px;

            /* 阴影系统 - 防眩光优化 */
            --shadow-soft: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-medium: 0 8px 24px rgba(0,0,0,0.12);
            --shadow-strong: 0 12px 32px rgba(0,0,0,0.15);
            --shadow-inset: inset 0 2px 4px rgba(0,0,0,0.05);

            /* 边框系统 */
            --border-width: 1px;
            --border-width-thick: 2px;
            --border-color: #E0E0E0;
            --border-color-focus: var(--primary-color);

            /* 过渡动画 */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;

            /* 激光束渐变定义 - 减少重复代码 */
            --laser-gradient-h: linear-gradient(90deg, transparent 0%, rgba(139, 195, 74, 0.1) 10%, rgba(139, 195, 74, 0.3) 20%, rgba(139, 195, 74, 0.5) 30%, rgba(76, 175, 80, 0.9) 40%, rgba(139, 195, 74, 0.5) 50%, rgba(139, 195, 74, 0.3) 60%, rgba(139, 195, 74, 0.1) 70%, transparent 80%, transparent 100%);
            --laser-gradient-v: linear-gradient(180deg, transparent 0%, rgba(139, 195, 74, 0.1) 10%, rgba(139, 195, 74, 0.3) 20%, rgba(139, 195, 74, 0.5) 30%, rgba(76, 175, 80, 0.9) 40%, rgba(139, 195, 74, 0.5) 50%, rgba(139, 195, 74, 0.3) 60%, rgba(139, 195, 74, 0.1) 70%, transparent 80%, transparent 100%);
            --laser-gradient-h-reverse: linear-gradient(-90deg, transparent 0%, rgba(139, 195, 74, 0.1) 10%, rgba(139, 195, 74, 0.3) 20%, rgba(139, 195, 74, 0.5) 30%, rgba(76, 175, 80, 0.9) 40%, rgba(139, 195, 74, 0.5) 50%, rgba(139, 195, 74, 0.3) 60%, rgba(139, 195, 74, 0.1) 70%, transparent 80%, transparent 100%);
            --laser-gradient-v-reverse: linear-gradient(-180deg, transparent 0%, rgba(139, 195, 74, 0.1) 10%, rgba(139, 195, 74, 0.3) 20%, rgba(139, 195, 74, 0.5) 30%, rgba(76, 175, 80, 0.9) 40%, rgba(139, 195, 74, 0.5) 50%, rgba(139, 195, 74, 0.3) 60%, rgba(139, 195, 74, 0.1) 70%, transparent 80%, transparent 100%);
            --laser-radial: radial-gradient(circle, rgba(76, 175, 80, 0.9) 0%, rgba(139, 195, 74, 0.5) 50%, transparent 100%);
        }

        /* ===== 基础重置样式 ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        *::before,
        *::after {
            box-sizing: border-box;
        }

        /* ===== 根元素优化 ===== */
        html {
            font-size: var(--font-size-base);
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: var(--background-color);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            /* 加油站环境背景 - 防眩光渐变 */
            background: linear-gradient(135deg,
                var(--background-color) 0%,
                var(--background-secondary) 50%,
                var(--background-color) 100%);
        }

        /* ===== 布局容器系统 ===== */
        .app-container {
            max-width: 100%;
            margin: 0 auto;
            padding: var(--spacing-lg);
            min-height: 100vh;
            position: relative;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .section {
            margin-bottom: var(--spacing-xl);
        }

        /* ===== 卡片组件系统 ===== */
        .card {
            background: var(--background-card);
            /* 移除 backdrop-filter 透明滤镜效果，保持清晰白色背景 */
            border-radius: var(--border-radius-lg) !important;  /* 🔧 强制圆角，不受任何动画影响 */
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-medium);
            border: var(--border-width) solid rgba(255, 255, 255, 0.2);
            transition: var(--transition-normal);
            position: relative;
            /* 🔧 确保圆角始终可见，不被任何样式覆盖 */
            overflow: visible !important;
        }

        .card:hover {
            box-shadow: var(--shadow-strong);
            transform: translateY(-2px);
        }

        .card-header {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: var(--border-width) solid var(--border-color);
        }

        .card-body {
            padding: var(--spacing-md) 0;
        }

        .card-footer {
            margin-top: var(--spacing-lg);
            padding-top: var(--spacing-md);
            border-top: var(--border-width) solid var(--border-color);
        }

        /* ===== 按钮组件系统 - 触摸友好设计 ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: var(--button-height);
            min-width: 120px;
            padding: var(--spacing-sm) var(--spacing-lg);
            font-size: var(--font-size-base);
            font-weight: 600;
            line-height: 1.4;
            text-decoration: none;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition-normal);
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* 按钮变体 */
        .btn-primary {
            background: var(--primary-color);
            color: var(--text-light);
            box-shadow: var(--shadow-soft);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            box-shadow: var(--shadow-medium);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--secondary-color);
            color: var(--text-light);
            box-shadow: var(--shadow-soft);
        }

        .btn-secondary:hover {
            background: var(--secondary-dark);
            box-shadow: var(--shadow-medium);
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-color);
            border: var(--border-width-thick) solid var(--primary-color);
        }

        .btn-outline:hover {
            background: var(--primary-color);
            color: var(--text-light);
        }

        .btn-info {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: var(--text-light);
            border: 2px solid #17a2b8;
            box-shadow:
                0 4px 15px rgba(23, 162, 184, 0.3),
                0 0 20px rgba(23, 162, 184, 0.1);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .btn-info:hover {
            background: linear-gradient(135deg, #138496, #117a8b);
            border-color: #138496;
            box-shadow:
                0 6px 20px rgba(23, 162, 184, 0.4),
                0 0 25px rgba(23, 162, 184, 0.2);
            transform: translateY(-2px);
        }

        .btn-info:active {
            transform: translateY(0);
            box-shadow:
                0 2px 10px rgba(23, 162, 184, 0.3),
                0 0 15px rgba(23, 162, 184, 0.1);
        }

        .btn-large {
            min-height: 56px;
            font-size: var(--font-size-lg);
            padding: var(--spacing-md) var(--spacing-xl);
        }

        /* 终极庆祝按钮特殊样式 */
        .btn-celebration {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4, #45b7d1);
            background-size: 200% 200%;
            color: white;
            border: none;
            font-weight: bold;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            box-shadow:
                0 4px 15px rgba(255, 107, 107, 0.3),
                0 0 20px rgba(78, 205, 196, 0.2);
            animation: celebrationButtonGlow 2s ease-in-out infinite;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .btn-celebration:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow:
                0 8px 25px rgba(255, 107, 107, 0.4),
                0 0 30px rgba(78, 205, 196, 0.3);
            animation-duration: 1s;
        }

        .btn-celebration:active {
            transform: translateY(0) scale(1.02);
        }

        /* 庆祝按钮发光动画 */
        @keyframes celebrationButtonGlow {
            0% {
                background-position: 0% 50%;
                box-shadow:
                    0 4px 15px rgba(255, 107, 107, 0.3),
                    0 0 20px rgba(78, 205, 196, 0.2);
            }
            50% {
                background-position: 100% 50%;
                box-shadow:
                    0 4px 15px rgba(78, 205, 196, 0.4),
                    0 0 25px rgba(255, 107, 107, 0.3);
            }
            100% {
                background-position: 0% 50%;
                box-shadow:
                    0 4px 15px rgba(255, 107, 107, 0.3),
                    0 0 20px rgba(78, 205, 196, 0.2);
            }
        }

        .btn-small {
            min-height: var(--button-height-sm);
            font-size: var(--font-size-sm);
            padding: var(--spacing-xs) var(--spacing-md);
        }

        /* ===== 表单组件系统 - 大字体输入优化 ===== */
        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: var(--spacing-sm);
        }

        .form-input {
            display: block;
            width: 100%;
            min-height: var(--input-height);
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: var(--font-size-base);
            line-height: 1.4;
            color: var(--text-color);
            background: var(--background-card);
            border: var(--border-width-thick) solid var(--border-color);
            border-radius: var(--border-radius);
            transition: var(--transition-normal);
            -webkit-appearance: none;
            appearance: none;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--border-color-focus);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        .form-input::placeholder {
            color: var(--text-muted);
            opacity: 1;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right var(--spacing-sm) center;
            background-repeat: no-repeat;
            background-size: 16px 12px;
            padding-right: var(--spacing-xl);
        }

        /* ===== 文字排版系统 ===== */
        .text-xs { font-size: var(--font-size-xs); }
        .text-sm { font-size: var(--font-size-sm); }
        .text-base { font-size: var(--font-size-base); }
        .text-lg { font-size: var(--font-size-lg); font-weight: 600; }
        .text-xl { font-size: var(--font-size-xl); font-weight: 700; }
        .text-2xl { font-size: var(--font-size-2xl); font-weight: 700; }
        .text-3xl { font-size: var(--font-size-3xl); font-weight: 800; }

        .text-primary { color: var(--text-color); }
        .text-secondary { color: var(--text-secondary); }
        .text-muted { color: var(--text-muted); }
        .text-light { color: var(--text-light); }
        .text-success { color: var(--text-success); }
        .text-warning { color: var(--text-warning); }
        .text-error { color: var(--text-error); }

        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }

        .font-normal { font-weight: 400; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }

        /* ===== 工具类系统 ===== */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .flex-row { flex-direction: row; }
        .items-center { align-items: center; }
        .items-start { align-items: flex-start; }
        .items-end { align-items: flex-end; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .justify-start { justify-content: flex-start; }
        .justify-end { justify-content: flex-end; }

        .w-full { width: 100%; }
        .h-full { height: 100%; }
        .min-h-screen { min-height: 100vh; }

        .m-0 { margin: 0; }
        .mt-auto { margin-top: auto; }
        .mb-auto { margin-bottom: auto; }
        .mx-auto { margin-left: auto; margin-right: auto; }

        .p-0 { padding: 0; }
        .p-sm { padding: var(--spacing-sm); }
        .p-md { padding: var(--spacing-md); }
        .p-lg { padding: var(--spacing-lg); }

        .hidden { display: none; }
        .block { display: block; }
        .inline-block { display: inline-block; }

        .relative { position: relative; }
        .absolute { position: absolute; }
        .fixed { position: fixed; }

        .z-10 { z-index: 10; }
        .z-20 { z-index: 20; }
        .z-30 { z-index: 30; }

        .rounded { border-radius: var(--border-radius); }
        .rounded-lg { border-radius: var(--border-radius-lg); }
        .rounded-full { border-radius: 50%; }

        .shadow-soft { box-shadow: var(--shadow-soft); }
        .shadow-medium { box-shadow: var(--shadow-medium); }
        .shadow-strong { box-shadow: var(--shadow-strong); }

        /* ===== 响应式设计系统 - 移动优先 ===== */

        /* 超小屏幕 (手机竖屏) */
        @media (max-width: 480px) {
            :root {
                --font-size-base: 16px;
                --font-size-lg: 18px;
                --font-size-xl: 22px;
                --button-height: 44px;
                --input-height: 44px;
                --spacing-lg: 16px;
                --spacing-xl: 24px;
            }

            .app-container {
                padding: var(--spacing-md);
            }

            .card {
                padding: var(--spacing-md);
                margin-bottom: var(--spacing-md);
            }

            .btn {
                min-width: 100px;
                font-size: var(--font-size-sm);
            }

            .btn-large {
                min-height: 48px;
                font-size: var(--font-size-base);
            }
        }

        /* 小屏幕 (手机横屏/小平板) */
        @media (min-width: 481px) and (max-width: 768px) {
            .app-container {
                padding: var(--spacing-lg);
            }

            .container {
                padding: 0 var(--spacing-lg);
            }
        }

        /* 中等屏幕 (平板) */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                max-width: 900px;
            }
        }

        /* 大屏幕 (桌面) */
        @media (min-width: 1025px) {
            .container {
                max-width: 1200px;
            }

            .card {
                padding: var(--spacing-xl);
            }
        }

        /* ===== 加油站环境特殊优化 ===== */

        /* 高亮度环境优化 (户外阳光) */
        @media (prefers-contrast: high) {
            :root {
                --text-color: #000000;
                --background-card: rgba(255, 255, 255, 0.98);
                --border-color: #BDBDBD;
                --shadow-medium: 0 8px 24px rgba(0,0,0,0.2);
            }
        }

        /* 减少动画 (性能优化) */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* 触摸设备优化 */
        @media (hover: none) and (pointer: coarse) {
            .btn:hover {
                transform: none;
            }

            .card:hover {
                transform: none;
            }

            .btn {
                min-height: var(--touch-target);
            }
        }

        /* ===== 微信浏览器兼容性 ===== */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            .btn {
                -webkit-appearance: none;
                -webkit-tap-highlight-color: transparent;
            }

            .form-input {
                -webkit-appearance: none;
                -webkit-tap-highlight-color: transparent;
            }

            .form-select {
                -webkit-appearance: none;
            }
        }

        /* iOS Safari 优化 */
        @supports (-webkit-touch-callout: none) {
            .form-input {
                font-size: 16px; /* 防止iOS缩放 */
            }

            .btn {
                -webkit-touch-callout: none;
            }
        }

        /* ===== 步骤指示器样式 ===== */
        .step-indicator {
            transition: all 0.3s ease;
            position: relative;
        }

        .step-indicator.step-active {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(var(--primary-rgb), 0.3);
        }

        .step-indicator.step-highlight {
            animation: stepHighlight 1s ease-out;
        }

        @keyframes stepHighlight {
            0% {
                box-shadow: 0 0 20px rgba(var(--primary-rgb), 0.3);
            }
            50% {
                box-shadow: 0 0 30px rgba(var(--primary-rgb), 0.6);
                transform: scale(1.08);
            }
            100% {
                box-shadow: 0 0 20px rgba(var(--primary-rgb), 0.3);
                transform: scale(1.05);
            }
        }

        /* ===== 表单输入样式增强 ===== */
        .form-input {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            border: var(--border-width) solid var(--border-color);
            border-radius: var(--border-radius);
            background: var(--background-secondary);
            color: var(--text-color);
            font-size: var(--font-size-base);
            transition: var(--transition-normal);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.1);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        /* ===== Alpine.js 过渡动画准备 ===== */
        [x-cloak] {
            display: none !important;
        }

        .fade-enter-active,
        .fade-leave-active {
            transition: opacity var(--transition-normal);
        }

        .fade-enter-from,
        .fade-leave-to {
            opacity: 0;
        }

        /* ===== 加载状态和占位符 ===== */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .skeleton {
            background: linear-gradient(
                90deg,
                var(--background-overlay) 25%,
                rgba(255, 255, 255, 0.1) 50%,
                var(--background-overlay) 75%
            );
            background-size: 200% 100%;
            animation: skeleton 1.5s infinite;
        }

        @keyframes skeleton {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* ===== 任务2.2：现代化动画系统 ===== */

        /* 1. 磁悬浮卡片入场特效 - 现代商业风格 */
        .magnetic-entrance {
            animation: magneticFloat 0.3s cubic-bezier(0.23, 1, 0.32, 1) forwards;
            transform-origin: center center;
            will-change: transform, opacity, filter;
        }

        @keyframes magneticFloat {
            0% { opacity: 0; transform: translateY(60px) scale(0.8) rotateX(15deg); filter: blur(8px) brightness(0.7); }
            1.33% { opacity: 0.02; transform: translateY(59px) scale(0.802) rotateX(14.8deg); filter: blur(7.9px) brightness(0.705); }
            2.67% { opacity: 0.04; transform: translateY(58px) scale(0.804) rotateX(14.6deg); filter: blur(7.8px) brightness(0.71); }
            4% { opacity: 0.06; transform: translateY(57px) scale(0.806) rotateX(14.4deg); filter: blur(7.7px) brightness(0.715); }
            5.33% { opacity: 0.08; transform: translateY(56px) scale(0.808) rotateX(14.2deg); filter: blur(7.6px) brightness(0.72); }
            6.67% { opacity: 0.1; transform: translateY(55px) scale(0.81) rotateX(14deg); filter: blur(7.5px) brightness(0.725); }
            8% { opacity: 0.12; transform: translateY(54px) scale(0.812) rotateX(13.8deg); filter: blur(7.4px) brightness(0.73); }
            9.33% { opacity: 0.14; transform: translateY(53px) scale(0.814) rotateX(13.6deg); filter: blur(7.3px) brightness(0.735); }
            10.67% { opacity: 0.16; transform: translateY(52px) scale(0.816) rotateX(13.4deg); filter: blur(7.2px) brightness(0.74); }
            12% { opacity: 0.18; transform: translateY(51px) scale(0.818) rotateX(13.2deg); filter: blur(7.1px) brightness(0.745); }
            13.33% { opacity: 0.2; transform: translateY(50px) scale(0.82) rotateX(13deg); filter: blur(7px) brightness(0.75); }
            14.67% { opacity: 0.22; transform: translateY(49px) scale(0.822) rotateX(12.8deg); filter: blur(6.9px) brightness(0.755); }
            16% { opacity: 0.24; transform: translateY(48px) scale(0.824) rotateX(12.6deg); filter: blur(6.8px) brightness(0.76); }
            17.33% { opacity: 0.26; transform: translateY(47px) scale(0.826) rotateX(12.4deg); filter: blur(6.7px) brightness(0.765); }
            18.67% { opacity: 0.28; transform: translateY(46px) scale(0.828) rotateX(12.2deg); filter: blur(6.6px) brightness(0.77); }
            20% { opacity: 0.3; transform: translateY(45px) scale(0.83) rotateX(12deg); filter: blur(6.5px) brightness(0.775); }
            21.33% { opacity: 0.32; transform: translateY(44px) scale(0.832) rotateX(11.8deg); filter: blur(6.4px) brightness(0.78); }
            22.67% { opacity: 0.34; transform: translateY(43px) scale(0.834) rotateX(11.6deg); filter: blur(6.3px) brightness(0.785); }
            24% { opacity: 0.36; transform: translateY(42px) scale(0.836) rotateX(11.4deg); filter: blur(6.2px) brightness(0.79); }
            25.33% { opacity: 0.38; transform: translateY(41px) scale(0.838) rotateX(11.2deg); filter: blur(6.1px) brightness(0.795); }
            26.67% { opacity: 0.4; transform: translateY(40px) scale(0.84) rotateX(11deg); filter: blur(6px) brightness(0.8); }
            28% { opacity: 0.42; transform: translateY(38px) scale(0.85) rotateX(10.5deg); filter: blur(5.7px) brightness(0.81); }
            29.33% { opacity: 0.44; transform: translateY(36px) scale(0.86) rotateX(10deg); filter: blur(5.4px) brightness(0.82); }
            30.67% { opacity: 0.46; transform: translateY(34px) scale(0.87) rotateX(9.5deg); filter: blur(5.1px) brightness(0.83); }
            32% { opacity: 0.48; transform: translateY(32px) scale(0.88) rotateX(9deg); filter: blur(4.8px) brightness(0.84); }
            33.33% { opacity: 0.5; transform: translateY(30px) scale(0.89) rotateX(8.5deg); filter: blur(4.5px) brightness(0.85); }
            34.67% { opacity: 0.52; transform: translateY(28px) scale(0.9) rotateX(8deg); filter: blur(4.2px) brightness(0.86); }
            36% { opacity: 0.54; transform: translateY(26px) scale(0.91) rotateX(7.5deg); filter: blur(3.9px) brightness(0.87); }
            37.33% { opacity: 0.56; transform: translateY(24px) scale(0.92) rotateX(7deg); filter: blur(3.6px) brightness(0.88); }
            38.67% { opacity: 0.58; transform: translateY(22px) scale(0.93) rotateX(6.5deg); filter: blur(3.3px) brightness(0.89); }
            40% { opacity: 0.6; transform: translateY(20px) scale(0.94) rotateX(6deg); filter: blur(3px) brightness(0.9); }
            41.33% { opacity: 0.62; transform: translateY(18px) scale(0.95) rotateX(5.5deg); filter: blur(2.7px) brightness(0.91); }
            42.67% { opacity: 0.64; transform: translateY(16px) scale(0.96) rotateX(5deg); filter: blur(2.4px) brightness(0.92); }
            44% { opacity: 0.66; transform: translateY(14px) scale(0.97) rotateX(4.5deg); filter: blur(2.1px) brightness(0.93); }
            45.33% { opacity: 0.68; transform: translateY(12px) scale(0.98) rotateX(4deg); filter: blur(1.8px) brightness(0.94); }
            46.67% { opacity: 0.7; transform: translateY(10px) scale(0.99) rotateX(3.5deg); filter: blur(1.5px) brightness(0.95); }
            48% { opacity: 0.72; transform: translateY(8px) scale(1) rotateX(3deg); filter: blur(1.2px) brightness(0.96); }
            49.33% { opacity: 0.74; transform: translateY(6px) scale(1.01) rotateX(2.5deg); filter: blur(0.9px) brightness(0.97); }
            50.67% { opacity: 0.76; transform: translateY(4px) scale(1.02) rotateX(2deg); filter: blur(0.6px) brightness(0.98); }
            52% { opacity: 0.78; transform: translateY(2px) scale(1.03) rotateX(1.5deg); filter: blur(0.3px) brightness(0.99); }
            53.33% { opacity: 0.8; transform: translateY(0px) scale(1.04) rotateX(1deg); filter: blur(0px) brightness(1); }
            54.67% { opacity: 0.82; transform: translateY(-2px) scale(1.03) rotateX(0.5deg); filter: blur(0px) brightness(1.01); }
            56% { opacity: 0.84; transform: translateY(-4px) scale(1.02) rotateX(0deg); filter: blur(0px) brightness(1.02); }
            57.33% { opacity: 0.86; transform: translateY(-3px) scale(1.015) rotateX(-0.5deg); filter: blur(0px) brightness(1.03); }
            58.67% { opacity: 0.88; transform: translateY(-2px) scale(1.01) rotateX(-1deg); filter: blur(0px) brightness(1.04); }
            60% { opacity: 0.9; transform: translateY(-1px) scale(1.005) rotateX(-0.5deg); filter: blur(0px) brightness(1.05); }
            61.33% { opacity: 0.92; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1.04); }
            62.67% { opacity: 0.94; transform: translateY(1px) scale(0.995) rotateX(0.5deg); filter: blur(0px) brightness(1.03); }
            64% { opacity: 0.96; transform: translateY(2px) scale(0.99) rotateX(1deg); filter: blur(0px) brightness(1.02); }
            65.33% { opacity: 0.97; transform: translateY(1.5px) scale(0.992) rotateX(0.8deg); filter: blur(0px) brightness(1.015); }
            66.67% { opacity: 0.98; transform: translateY(1px) scale(0.994) rotateX(0.6deg); filter: blur(0px) brightness(1.01); }
            68% { opacity: 0.985; transform: translateY(0.5px) scale(0.996) rotateX(0.4deg); filter: blur(0px) brightness(1.005); }
            69.33% { opacity: 0.99; transform: translateY(0px) scale(0.998) rotateX(0.2deg); filter: blur(0px) brightness(1); }
            70.67% { opacity: 0.995; transform: translateY(0px) scale(0.999) rotateX(0.1deg); filter: blur(0px) brightness(1); }
            72% { opacity: 0.998; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            73.33% { opacity: 0.999; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            74.67% { opacity: 0.9995; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            76% { opacity: 0.9998; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            77.33% { opacity: 0.9999; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            80% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            81.33% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            82.67% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            84% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            85.33% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            86.67% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            88% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            89.33% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            90.67% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            92% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            93.33% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            94.67% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            96% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            97.33% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            98.67% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
            100% { opacity: 1; transform: translateY(0px) scale(1) rotateX(0deg); filter: blur(0px) brightness(1); }
        }

        /* 磁悬浮悬停效果 - 移除绿色阴影，使用中性色 */
        .magnetic-entrance:hover {
            transform: translateY(-3px) scale(1.01);
            box-shadow:
                0 20px 40px rgba(0, 0, 0, 0.08),
                0 8px 16px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* 磁悬浮光晕效果 - 已移除绿色背景，保持简洁白色卡片 */
        .magnetic-entrance::before {
            /* 移除炫目的绿色背景效果，适合加油站户外工作环境 */
            display: none;
        }

        .magnetic-entrance:hover::before {
            /* 移除悬停时的绿色背景效果 */
            display: none;
        }

        /* 悬停时增强动态粒子效果 - 移除绿色发光，使用中性色 */
        .magnetic-entrance:hover::after {
            animation-duration: 1.5s;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.8);
            box-shadow:
                0 0 16px rgba(100, 100, 100, 0.3),
                0 0 32px rgba(150, 150, 150, 0.2);
        }

        /* 悬停时增强边框确认效果 - 已移除绿色效果 */
        .magnetic-entrance:hover .magnetic-border-glow::before {
            /* 移除悬停时的绿色边框效果 */
            display: none;
        }

        /* 磁悬浮动态粒子效果 - 移除绿色，使用中性色 */
        .magnetic-entrance::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 4px;
            background: radial-gradient(
                circle,
                rgba(120, 120, 120, 0.6) 0%,
                rgba(100, 100, 100, 0.3) 50%,
                transparent 100%
            );
            border-radius: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            animation: magneticParticle 2s ease-in-out infinite;
            animation-delay: 0.6s;
            z-index: 2;
            pointer-events: none;
        }

        @keyframes magneticParticle {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
                box-shadow:
                    0 0 0 rgba(76, 175, 80, 0.4),
                    0 0 0 rgba(46, 125, 50, 0.2);
            }
            25% {
                opacity: 0.8;
                transform: translate(-50%, -50%) scale(1.2);
                box-shadow:
                    0 0 8px rgba(76, 175, 80, 0.6),
                    0 0 16px rgba(46, 125, 50, 0.3);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.5);
                box-shadow:
                    0 0 12px rgba(76, 175, 80, 0.8),
                    0 0 24px rgba(46, 125, 50, 0.4);
            }
            75% {
                opacity: 0.6;
                transform: translate(-50%, -50%) scale(1.1);
                box-shadow:
                    0 0 6px rgba(76, 175, 80, 0.5),
                    0 0 12px rgba(46, 125, 50, 0.2);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
                box-shadow:
                    0 0 0 rgba(76, 175, 80, 0.2),
                    0 0 0 rgba(46, 125, 50, 0.1);
            }
        }

        /* 磁悬浮多层视觉系统 - 完成确认效果 */
        .magnetic-border-glow {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 10;
        }

        .magnetic-border-glow::before {
            /* 移除磁悬浮边框发光的绿色背景效果，保持简洁白色卡片 */
            display: none;
        }

        @keyframes magneticComplete {
            /* 移除绿色边框动画，使用中性色 */
            0% {
                opacity: 0;
                border-color: rgba(150, 150, 150, 0.15);
                transform: scale(0.98);
            }
            30% {
                opacity: 0.6;
                border-color: rgba(120, 120, 120, 0.4);
                transform: scale(1.01);
            }
            60% {
                opacity: 1;
                border-color: rgba(100, 100, 100, 0.6);
                transform: scale(1.005);
            }
            100% {
                opacity: 0.25;
                border-color: rgba(150, 150, 150, 0.25);
                transform: scale(1);
            }
        }

        /* 延迟动画类 - 创建波浪式入场效果 */
        .magnetic-entrance.delay-1 { animation-delay: 0.1s; }
        .magnetic-entrance.delay-2 { animation-delay: 0.2s; }
        .magnetic-entrance.delay-3 { animation-delay: 0.3s; }
        .magnetic-entrance.delay-4 { animation-delay: 0.4s; }
        .magnetic-entrance.delay-5 { animation-delay: 0.5s; }

        /* 3. 全息投影矩阵入场特效 - 科幻故障艺术风格 */
        .hologram-matrix-entrance {
            animation: hologramMatrix 1.0s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform-origin: center center;
            will-change: transform, opacity, filter, clip-path;
            position: relative;
            overflow: hidden;
            /* 动画完成后恢复正常状态，允许悬停效果 */
            transform: scale(1) rotateX(0deg) skewX(0deg);
            opacity: 1;
            filter: blur(0px) hue-rotate(0deg) saturate(1) brightness(1);
            clip-path: none;
        }

        /* 全息投影矩阵关键帧动画 - 故障艺术风格 */
        @keyframes hologramMatrix {
            /* 第一阶段：故障启动 (0-20%) */
            0% {
                opacity: 0;
                transform: scale(0.1) rotateX(90deg) skewX(45deg);
                filter: blur(30px) hue-rotate(0deg) saturate(0) brightness(0);
                clip-path: polygon(0% 0%, 0% 0%, 0% 0%, 0% 0%);
            }
            5% {
                opacity: 0.3;
                transform: scale(0.2) rotateX(75deg) skewX(35deg);
                filter: blur(25px) hue-rotate(90deg) saturate(1.5) brightness(0.8);
                clip-path: polygon(0% 0%, 100% 0%, 100% 20%, 0% 20%);
            }
            10% {
                opacity: 0.6;
                transform: scale(0.4) rotateX(60deg) skewX(25deg);
                filter: blur(20px) hue-rotate(180deg) saturate(1.8) brightness(0.9);
                clip-path: polygon(0% 0%, 100% 0%, 100% 40%, 0% 40%);
            }
            15% {
                opacity: 0.8;
                transform: scale(0.6) rotateX(45deg) skewX(15deg);
                filter: blur(15px) hue-rotate(270deg) saturate(2.0) brightness(1.0);
                clip-path: polygon(0% 0%, 100% 0%, 100% 60%, 0% 60%);
            }
            20% {
                opacity: 1;
                transform: scale(0.8) rotateX(30deg) skewX(5deg);
                filter: blur(10px) hue-rotate(360deg) saturate(1.8) brightness(1.1);
                clip-path: polygon(0% 0%, 100% 0%, 100% 80%, 0% 80%);
            }

            /* 第二阶段：矩阵扫描 (20-60%) */
            25% {
                opacity: 0.9;
                transform: scale(0.85) rotateX(25deg) skewX(3deg);
                filter: blur(8px) hue-rotate(45deg) saturate(1.6) brightness(1.08);
                clip-path: polygon(0% 0%, 100% 0%, 100% 85%, 0% 85%);
            }
            30% {
                opacity: 0.95;
                transform: scale(0.9) rotateX(20deg) skewX(2deg);
                filter: blur(6px) hue-rotate(90deg) saturate(1.5) brightness(1.06);
                clip-path: polygon(0% 0%, 100% 0%, 100% 90%, 0% 90%);
            }
            35% {
                opacity: 0.98;
                transform: scale(0.95) rotateX(15deg) skewX(1deg);
                filter: blur(4px) hue-rotate(135deg) saturate(1.4) brightness(1.04);
                clip-path: polygon(0% 0%, 100% 0%, 100% 95%, 0% 95%);
            }
            40% {
                opacity: 1;
                transform: scale(0.98) rotateX(10deg) skewX(0.5deg);
                filter: blur(3px) hue-rotate(180deg) saturate(1.3) brightness(1.03);
                clip-path: polygon(0% 0%, 100% 0%, 100% 98%, 0% 98%);
            }
            50% {
                opacity: 1;
                transform: scale(1.02) rotateX(5deg) skewX(0deg);
                filter: blur(2px) hue-rotate(225deg) saturate(1.2) brightness(1.02);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            60% {
                opacity: 1;
                transform: scale(1.05) rotateX(2deg) skewX(0deg);
                filter: blur(1px) hue-rotate(270deg) saturate(1.1) brightness(1.01);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }

            /* 第三阶段：故障闪烁稳定化 (60-100%) */
            65% {
                opacity: 0.8;
                transform: scale(1.03) rotateX(1deg) skewX(0deg);
                filter: blur(0.5px) hue-rotate(315deg) saturate(1.15) brightness(1.08);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            70% {
                opacity: 1;
                transform: scale(1.01) rotateX(0deg) skewX(0deg);
                filter: blur(0.2px) hue-rotate(360deg) saturate(1.1) brightness(1.05);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            75% {
                opacity: 0.9;
                transform: scale(1.005) rotateX(0deg) skewX(0deg);
                filter: blur(0.1px) hue-rotate(0deg) saturate(1.05) brightness(1.03);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            80% {
                opacity: 1;
                transform: scale(1.002) rotateX(0deg) skewX(0deg);
                filter: blur(0px) hue-rotate(0deg) saturate(1.03) brightness(1.02);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            85% {
                opacity: 0.95;
                transform: scale(1.001) rotateX(0deg) skewX(0deg);
                filter: blur(0px) hue-rotate(0deg) saturate(1.02) brightness(1.01);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            90% {
                opacity: 1;
                transform: scale(1) rotateX(0deg) skewX(0deg);
                filter: blur(0px) hue-rotate(0deg) saturate(1.01) brightness(1.005);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            95% {
                opacity: 0.98;
                transform: scale(1) rotateX(0deg) skewX(0deg);
                filter: blur(0px) hue-rotate(0deg) saturate(1.005) brightness(1.002);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotateX(0deg) skewX(0deg);
                filter: blur(0px) hue-rotate(0deg) saturate(1) brightness(1);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
            }
        }

        /* 全息投影矩阵扫描线效果 */
        .hologram-matrix-entrance::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                rgba(0, 255, 255, 0.03) 1px,
                rgba(0, 255, 255, 0.06) 2px,
                transparent 3px,
                transparent 6px
            );
            z-index: 1;
            opacity: 0;
            animation: hologramScanlines 1.0s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            pointer-events: none;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
        }

        @keyframes hologramScanlines {
            0% { opacity: 0; transform: translateX(-100%); }
            20% { opacity: 1; transform: translateX(-50%); }
            60% { opacity: 0.8; transform: translateX(0%); }
            100% { opacity: 0.4; transform: translateX(0%); }
        }

        /* 全息投影故障效果 */
        .hologram-matrix-entrance::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(0, 255, 65, 0.1) 35%,
                rgba(0, 255, 255, 0.15) 40%,
                transparent 45%,
                transparent 55%,
                rgba(0, 255, 65, 0.08) 60%,
                rgba(0, 255, 255, 0.12) 65%,
                transparent 70%
            );
            z-index: 2;
            opacity: 0;
            animation: hologramGlitch 1.0s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            pointer-events: none;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
        }

        @keyframes hologramGlitch {
            0%, 10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%, 90% {
                opacity: 0;
                transform: translateX(0px) skewX(0deg);
            }
            5%, 15%, 25%, 35%, 45%, 55%, 65%, 75%, 85%, 95% {
                opacity: 0.8;
                transform: translateX(2px) skewX(1deg);
            }
            100% { opacity: 0.2; transform: translateX(0px) skewX(0deg); }
        }

        /* 全息投影故障效果 */
        .hologram-matrix-entrance::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(0, 255, 65, 0.1) 35%,
                rgba(0, 255, 255, 0.15) 40%,
                transparent 45%,
                transparent 55%,
                rgba(0, 255, 65, 0.08) 60%,
                rgba(0, 255, 255, 0.12) 65%,
                transparent 70%
            );
            z-index: 2;
            opacity: 0;
            animation: hologramGlitch 1.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            pointer-events: none;
        }

        @keyframes hologramGlitch {
            0%, 10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%, 90% {
                opacity: 0;
                transform: translateX(0px) skewX(0deg);
            }
            5%, 15%, 25%, 35%, 45%, 55%, 65%, 75%, 85%, 95% {
                opacity: 0.8;
                transform: translateX(2px) skewX(1deg);
            }
            100% { opacity: 0.2; transform: translateX(0px) skewX(0deg); }
        }

        /* 全息投影悬停效果 */
        .hologram-matrix-entrance:hover {
            transform: scale(1.03) rotateY(3deg) skewX(1deg);
            box-shadow:
                0 20px 40px rgba(0, 255, 255, 0.3),
                0 10px 20px rgba(0, 255, 65, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                0 0 30px rgba(0, 255, 255, 0.4);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .hologram-matrix-entrance:hover::before {
            opacity: 0.8;
            animation-duration: 0.5s;
            transition: all 0.3s ease;
        }

        .hologram-matrix-entrance:hover::after {
            opacity: 0.6;
            animation-duration: 0.3s;
            transition: all 0.3s ease;
        }

        /* 全息投影延迟动画类 */
        .hologram-matrix-entrance.delay-1 { animation-delay: 0.05s; }
        .hologram-matrix-entrance.delay-2 { animation-delay: 0.15s; }
        .hologram-matrix-entrance.delay-3 { animation-delay: 0.25s; }
        .hologram-matrix-entrance.delay-4 { animation-delay: 0.35s; }
        .hologram-matrix-entrance.delay-5 { animation-delay: 0.45s; }

        /* 4. 量子粒子聚合入场特效 - 圆形从外面飞入聚合遮罩扩展成卡片 */
        .quantum-particle-entrance {
            animation: quantumCardAppear 1.0s cubic-bezier(0.25, 0.46, 0.45, 0.94) 1.0s forwards;
            transform-origin: center center;
            will-change: transform, opacity, clip-path;
            position: relative;
            overflow: visible; /* 关键：允许圆形在卡片外可见 */
            /* 初始状态：只设置transform，opacity完全由JavaScript控制 */
            transform: scale(0.8);
        }

        /* 卡片显现动画 - 遮罩扩展后的最终成型效果（仅控制transform，opacity由JavaScript控制） */
        @keyframes quantumCardAppear {
            0% {
                transform: scale(0.8);
            }
            40% {
                transform: scale(0.9);
            }
            70% {
                transform: scale(0.98);
            }
            90% {
                transform: scale(1.01);
            }
            100% {
                transform: scale(1);
            }
        }

        /* 量子粒子悬停效果 */
        .quantum-particle-entrance:hover {
            transform: scale(1.02) rotateY(2deg);
            box-shadow:
                0 15px 35px rgba(63, 81, 181, 0.15),
                0 6px 12px rgba(63, 81, 181, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* 量子粒子聚合特效 - 使用JavaScript动态创建粒子 */



        /* 量子粒子延迟动画类 */
        .quantum-particle-entrance.delay-1 { animation-delay: 0.08s; }
        .quantum-particle-entrance.delay-2 { animation-delay: 0.16s; }
        .quantum-particle-entrance.delay-3 { animation-delay: 0.24s; }
        .quantum-particle-entrance.delay-4 { animation-delay: 0.32s; }
        .quantum-particle-entrance.delay-5 { animation-delay: 0.40s; }

        /* 量子粒子动画完成后的状态 - 保持悬停效果 */
        .quantum-particle-completed {
            position: relative;
            overflow: hidden;
            /* 保持基础样式，确保悬停效果正常 */
            transform: scale(1) rotateY(0deg);
            opacity: 1;
            filter: blur(0px) hue-rotate(0deg) saturate(1) brightness(1);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* 量子粒子完成后的悬停效果 */
        .quantum-particle-completed:hover {
            transform: scale(1.02) rotateY(2deg);
            box-shadow:
                0 15px 35px rgba(63, 81, 181, 0.15),
                0 6px 12px rgba(63, 81, 181, 0.1);
        }

        /* 量子粒子多层视觉系统 - 完成确认效果 */
        .quantum-border-glow {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: var(--border-radius-lg);
            pointer-events: none;
            z-index: 10;
        }

        /* 量子边框发光动画 - 只显示边框，不覆盖内容 */
        .quantum-border-glow::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(
                45deg,
                rgba(63, 81, 181, 0.6) 0%,
                rgba(156, 39, 176, 0.4) 25%,
                rgba(33, 150, 243, 0.6) 50%,
                rgba(103, 58, 183, 0.4) 75%,
                rgba(63, 81, 181, 0.6) 100%
            );
            border-radius: calc(var(--border-radius-lg) + 3px);
            opacity: 0;
            animation: quantumBorderGlow 2s ease-in-out infinite;
            z-index: -1;
            /* 确保只显示边框，使用mask遮罩 */
            mask:
                linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
            mask-composite: xor;
            -webkit-mask:
                linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            padding: 3px;
        }

        /* 量子边框发光关键帧 */
        @keyframes quantumBorderGlow {
            0%, 100% {
                opacity: 0;
                transform: scale(1);
                filter: blur(0px);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.02);
                filter: blur(1px);
            }
        }

        /* 全息投影动画完成后的状态 - 保持悬停效果 */
        .hologram-matrix-completed {
            position: relative;
            overflow: hidden;
            /* 确保正常状态 */
            transform: scale(1) rotateX(0deg) skewX(0deg);
            opacity: 1;
            filter: blur(0px) hue-rotate(0deg) saturate(1) brightness(1);
            clip-path: none;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* 全息投影完成后的悬停效果 */
        .hologram-matrix-completed:hover {
            transform: scale(1.03) rotateY(3deg) skewX(1deg);
            box-shadow:
                0 20px 40px rgba(0, 255, 255, 0.3),
                0 10px 20px rgba(0, 255, 65, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                0 0 30px rgba(0, 255, 255, 0.4);
        }

        /* 全息投影多层视觉系统 - 完成确认效果 */
        .hologram-border-glow {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 10;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
        }

        .hologram-border-glow::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: transparent;
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: var(--border-radius-lg);
            opacity: 0;
            animation: hologramComplete 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            animation-delay: 0.8s;
            z-index: -1;
            box-shadow:
                0 0 20px rgba(0, 255, 255, 0.4),
                inset 0 0 20px rgba(0, 255, 65, 0.2);
            overflow: hidden;
        }

        @keyframes hologramComplete {
            0% {
                opacity: 0;
                transform: scale(0.9) skewX(10deg);
                filter: hue-rotate(0deg) brightness(0.5);
            }
            50% {
                opacity: 1;
                transform: scale(1.05) skewX(-5deg);
                filter: hue-rotate(180deg) brightness(1.3);
            }
            100% {
                opacity: 0.8;
                transform: scale(1) skewX(0deg);
                filter: hue-rotate(360deg) brightness(1.1);
            }
        }

        /* 2. 光波扫描入场特效 - 真正的扫描仪效果 */
        .light-scan-entrance {
            position: relative;
            /* 🔧 修复：移除overflow: hidden，避免圆角被裁剪 */
            will-change: clip-path, opacity;
            /* 初始状态：完全隐藏 */
            clip-path: polygon(0 0, var(--scan-progress, 0%) 0, var(--scan-progress, 0%) 100%, 0 100%);
            opacity: 0.3;
            animation: scanProgress 2s linear forwards;
            /* 🔧 修复：确保圆角在动画过程中保持 */
            border-radius: inherit;
        }

        /* 🚀 新算法：主控动画 - 单一动画驱动所有扫描元素完美同步 + 激光束逐渐减弱 */
        @keyframes scanProgress {
            0% { --scan-progress: 0%; --laser-opacity: 1; opacity: 0.3; }
            0.83% { --scan-progress: 0.83%; --laser-opacity: 1; opacity: 0.305; }
            1.67% { --scan-progress: 1.67%; --laser-opacity: 1; opacity: 0.31; }
            2.5% { --scan-progress: 2.5%; --laser-opacity: 1; opacity: 0.315; }
            3.33% { --scan-progress: 3.33%; --laser-opacity: 1; opacity: 0.32; }
            4.17% { --scan-progress: 4.17%; --laser-opacity: 1; opacity: 0.325; }
            5% { --scan-progress: 5%; --laser-opacity: 1; opacity: 0.33; }
            5.83% { --scan-progress: 5.83%; --laser-opacity: 1; opacity: 0.335; }
            6.67% { --scan-progress: 6.67%; --laser-opacity: 1; opacity: 0.34; }
            7.5% { --scan-progress: 7.5%; --laser-opacity: 1; opacity: 0.345; }
            8.33% { --scan-progress: 8.33%; --laser-opacity: 1; opacity: 0.35; }
            9.17% { --scan-progress: 9.17%; --laser-opacity: 1; opacity: 0.355; }
            10% { --scan-progress: 10%; --laser-opacity: 1; opacity: 0.36; }
            10.83% { --scan-progress: 10.83%; --laser-opacity: 1; opacity: 0.365; }
            11.67% { --scan-progress: 11.67%; --laser-opacity: 1; opacity: 0.37; }
            12.5% { --scan-progress: 12.5%; --laser-opacity: 1; opacity: 0.375; }
            13.33% { --scan-progress: 13.33%; --laser-opacity: 1; opacity: 0.38; }
            14.17% { --scan-progress: 14.17%; --laser-opacity: 1; opacity: 0.385; }
            15% { --scan-progress: 15%; --laser-opacity: 1; opacity: 0.39; }
            15.83% { --scan-progress: 15.83%; --laser-opacity: 1; opacity: 0.395; }
            16.67% { --scan-progress: 16.67%; --laser-opacity: 1; opacity: 0.4; }
            17.5% { --scan-progress: 17.5%; --laser-opacity: 1; opacity: 0.41; }
            18.33% { --scan-progress: 18.33%; --laser-opacity: 1; opacity: 0.42; }
            19.17% { --scan-progress: 19.17%; --laser-opacity: 1; opacity: 0.43; }
            20% { --scan-progress: 20%; --laser-opacity: 1; opacity: 0.44; }
            20.83% { --scan-progress: 20.83%; --laser-opacity: 1; opacity: 0.45; }
            21.67% { --scan-progress: 21.67%; --laser-opacity: 1; opacity: 0.46; }
            22.5% { --scan-progress: 22.5%; --laser-opacity: 1; opacity: 0.47; }
            23.33% { --scan-progress: 23.33%; --laser-opacity: 1; opacity: 0.48; }
            24.17% { --scan-progress: 24.17%; --laser-opacity: 1; opacity: 0.49; }
            25% { --scan-progress: 25%; --laser-opacity: 1; opacity: 0.5; }
            25.83% { --scan-progress: 25.83%; --laser-opacity: 1; opacity: 0.52; }
            26.67% { --scan-progress: 26.67%; --laser-opacity: 1; opacity: 0.54; }
            27.5% { --scan-progress: 27.5%; --laser-opacity: 1; opacity: 0.56; }
            28.33% { --scan-progress: 28.33%; --laser-opacity: 1; opacity: 0.58; }
            29.17% { --scan-progress: 29.17%; --laser-opacity: 1; opacity: 0.6; }
            30% { --scan-progress: 30%; --laser-opacity: 1; opacity: 0.62; }
            30.83% { --scan-progress: 30.83%; --laser-opacity: 1; opacity: 0.64; }
            31.67% { --scan-progress: 31.67%; --laser-opacity: 1; opacity: 0.66; }
            32.5% { --scan-progress: 32.5%; --laser-opacity: 1; opacity: 0.68; }
            33.33% { --scan-progress: 33.33%; --laser-opacity: 1; opacity: 0.7; }
            34.17% { --scan-progress: 34.17%; --laser-opacity: 1; opacity: 0.71; }
            35% { --scan-progress: 35%; --laser-opacity: 1; opacity: 0.72; }
            35.83% { --scan-progress: 35.83%; --laser-opacity: 1; opacity: 0.73; }
            36.67% { --scan-progress: 36.67%; --laser-opacity: 1; opacity: 0.74; }
            37.5% { --scan-progress: 37.5%; --laser-opacity: 1; opacity: 0.75; }
            38.33% { --scan-progress: 38.33%; --laser-opacity: 1; opacity: 0.76; }
            39.17% { --scan-progress: 39.17%; --laser-opacity: 1; opacity: 0.77; }
            40% { --scan-progress: 40%; --laser-opacity: 1; opacity: 0.78; }
            40.83% { --scan-progress: 40.83%; --laser-opacity: 1; opacity: 0.79; }
            41.67% { --scan-progress: 41.67%; --laser-opacity: 1; opacity: 0.8; }
            42.5% { --scan-progress: 42.5%; --laser-opacity: 0.98; opacity: 0.81; }
            43.33% { --scan-progress: 43.33%; --laser-opacity: 0.96; opacity: 0.82; }
            44.17% { --scan-progress: 44.17%; --laser-opacity: 0.94; opacity: 0.83; }
            45% { --scan-progress: 45%; --laser-opacity: 0.92; opacity: 0.84; }
            45.83% { --scan-progress: 45.83%; --laser-opacity: 0.9; opacity: 0.85; }
            46.67% { --scan-progress: 46.67%; --laser-opacity: 0.88; opacity: 0.86; }
            47.5% { --scan-progress: 47.5%; --laser-opacity: 0.86; opacity: 0.87; }
            48.33% { --scan-progress: 48.33%; --laser-opacity: 0.84; opacity: 0.88; }
            49.17% { --scan-progress: 49.17%; --laser-opacity: 0.82; opacity: 0.89; }
            50% { --scan-progress: 50%; --laser-opacity: 0.8; opacity: 0.9; }
            50.83% { --scan-progress: 50.83%; --laser-opacity: 0.78; opacity: 0.905; }
            51.67% { --scan-progress: 51.67%; --laser-opacity: 0.76; opacity: 0.91; }
            52.5% { --scan-progress: 52.5%; --laser-opacity: 0.74; opacity: 0.915; }
            53.33% { --scan-progress: 53.33%; --laser-opacity: 0.72; opacity: 0.92; }
            54.17% { --scan-progress: 54.17%; --laser-opacity: 0.7; opacity: 0.925; }
            55% { --scan-progress: 55%; --laser-opacity: 0.68; opacity: 0.93; }
            55.83% { --scan-progress: 55.83%; --laser-opacity: 0.66; opacity: 0.932; }
            56.67% { --scan-progress: 56.67%; --laser-opacity: 0.64; opacity: 0.934; }
            57.5% { --scan-progress: 57.5%; --laser-opacity: 0.62; opacity: 0.936; }
            58.33% { --scan-progress: 58.33%; --laser-opacity: 0.6; opacity: 0.938; }
            59.17% { --scan-progress: 59.17%; --laser-opacity: 0.58; opacity: 0.94; }
            60% { --scan-progress: 60%; --laser-opacity: 0.56; opacity: 0.942; }
            60.83% { --scan-progress: 60.83%; --laser-opacity: 0.54; opacity: 0.944; }
            61.67% { --scan-progress: 61.67%; --laser-opacity: 0.52; opacity: 0.946; }
            62.5% { --scan-progress: 62.5%; --laser-opacity: 0.5; opacity: 0.948; }
            63.33% { --scan-progress: 63.33%; --laser-opacity: 0.48; opacity: 0.95; }
            64.17% { --scan-progress: 64.17%; --laser-opacity: 0.46; opacity: 0.952; }
            65% { --scan-progress: 65%; --laser-opacity: 0.44; opacity: 0.954; }
            65.83% { --scan-progress: 65.83%; --laser-opacity: 0.42; opacity: 0.956; }
            66.67% { --scan-progress: 66.67%; --laser-opacity: 0.4; opacity: 0.958; }
            67.5% { --scan-progress: 67.5%; --laser-opacity: 0.38; opacity: 0.96; }
            68.33% { --scan-progress: 68.33%; --laser-opacity: 0.36; opacity: 0.962; }
            69.17% { --scan-progress: 69.17%; --laser-opacity: 0.34; opacity: 0.964; }
            70% { --scan-progress: 70%; --laser-opacity: 0.32; opacity: 0.966; }
            70.83% { --scan-progress: 70.83%; --laser-opacity: 0.3; opacity: 0.968; }
            71.67% { --scan-progress: 71.67%; --laser-opacity: 0.28; opacity: 0.97; }
            72.5% { --scan-progress: 72.5%; --laser-opacity: 0.26; opacity: 0.972; }
            73.33% { --scan-progress: 73.33%; --laser-opacity: 0.24; opacity: 0.974; }
            74.17% { --scan-progress: 74.17%; --laser-opacity: 0.22; opacity: 0.976; }
            75% { --scan-progress: 75%; --laser-opacity: 0.2; opacity: 0.978; }
            75.83% { --scan-progress: 75.83%; --laser-opacity: 0.19; opacity: 0.98; }
            76.67% { --scan-progress: 76.67%; --laser-opacity: 0.18; opacity: 0.982; }
            77.5% { --scan-progress: 77.5%; --laser-opacity: 0.17; opacity: 0.984; }
            78.33% { --scan-progress: 78.33%; --laser-opacity: 0.16; opacity: 0.986; }
            79.17% { --scan-progress: 79.17%; --laser-opacity: 0.15; opacity: 0.988; }
            80% { --scan-progress: 80%; --laser-opacity: 0.14; opacity: 0.99; }
            80.83% { --scan-progress: 80.83%; --laser-opacity: 0.13; opacity: 0.991; }
            81.67% { --scan-progress: 81.67%; --laser-opacity: 0.12; opacity: 0.992; }
            82.5% { --scan-progress: 82.5%; --laser-opacity: 0.11; opacity: 0.993; }
            83.33% { --scan-progress: 83.33%; --laser-opacity: 0.1; opacity: 0.994; }
            84.17% { --scan-progress: 84.17%; --laser-opacity: 0.09; opacity: 0.995; }
            85% { --scan-progress: 85%; --laser-opacity: 0.08; opacity: 0.996; }
            85.83% { --scan-progress: 85.83%; --laser-opacity: 0.07; opacity: 0.9965; }
            86.67% { --scan-progress: 86.67%; --laser-opacity: 0.06; opacity: 0.997; }
            87.5% { --scan-progress: 87.5%; --laser-opacity: 0.05; opacity: 0.9975; }
            88.33% { --scan-progress: 88.33%; --laser-opacity: 0.04; opacity: 0.998; }
            89.17% { --scan-progress: 89.17%; --laser-opacity: 0.03; opacity: 0.9985; }
            90% { --scan-progress: 90%; --laser-opacity: 0.02; opacity: 0.999; }
            90.83% { --scan-progress: 90.83%; --laser-opacity: 0.018; opacity: 0.9992; }
            91.67% { --scan-progress: 91.67%; --laser-opacity: 0.016; opacity: 0.9994; }
            92.5% { --scan-progress: 92.5%; --laser-opacity: 0.014; opacity: 0.9996; }
            93.33% { --scan-progress: 93.33%; --laser-opacity: 0.012; opacity: 0.9997; }
            94.17% { --scan-progress: 94.17%; --laser-opacity: 0.01; opacity: 0.9998; }
            95% { --scan-progress: 95%; --laser-opacity: 0.008; opacity: 0.9999; }
            95.83% { --scan-progress: 95.83%; --laser-opacity: 0.006; opacity: 0.99995; }
            96.67% { --scan-progress: 96.67%; --laser-opacity: 0.004; opacity: 0.99998; }
            97.5% { --scan-progress: 97.5%; --laser-opacity: 0.002; opacity: 0.99999; }
            98.33% { --scan-progress: 98.33%; --laser-opacity: 0.001; opacity: 1; }
            99.17% { --scan-progress: 99.17%; --laser-opacity: 0; opacity: 1; }
            100% { --scan-progress: 100%; --laser-opacity: 0; opacity: 1; }
        }

        /* 扫描线效果 - 梭形激光束 */
        .light-scan-entrance::before {
            content: '';
            position: absolute;
            top: 0;
            left: calc(var(--scan-progress, 0%) - 3px);  /* 🚀 新算法：直接绑定到扫描进度，保持偏移 */
            width: 3px;
            height: 100%;
            background: linear-gradient(
                to right,
                rgba(139, 195, 74, 0.3) 0%,
                rgba(139, 195, 74, 0.9) 50%,
                rgba(139, 195, 74, 0.3) 100%
            );
            mask: radial-gradient(
                ellipse 100% 75% at center center,
                rgba(0, 0, 0, 1) 0%,
                rgba(0, 0, 0, 0.9) 40%,
                rgba(0, 0, 0, 0.6) 70%,
                rgba(0, 0, 0, 0) 100%
            );
            -webkit-mask: radial-gradient(
                ellipse 100% 75% at center center,
                rgba(0, 0, 0, 1) 0%,
                rgba(0, 0, 0, 0.9) 40%,
                rgba(0, 0, 0, 0.6) 70%,
                rgba(0, 0, 0, 0) 100%
            );
            box-shadow:
                0 0 3px rgba(139, 195, 74, 0.8),
                0 0 6px rgba(139, 195, 74, 0.6),
                0 0 9px rgba(139, 195, 74, 0.4),
                0 0 12px rgba(76, 175, 80, 0.3),
                0 0 15px rgba(76, 175, 80, 0.2);
            /* 🌟 新功能：激光束透明度由CSS变量控制，实现逐渐减弱效果 */
            opacity: var(--laser-opacity, 1);
            z-index: 2;
            pointer-events: none;
        }

        /* 梭形激光束的外层光晕效果 */
        .light-scan-entrance::after {
            content: '';
            position: absolute;
            top: -2px;
            left: calc(var(--scan-progress, 0%) - 4px);  /* 🚀 新算法：直接绑定到扫描进度，保持偏移 */
            width: 5px;
            height: calc(100% + 4px);
            background: radial-gradient(
                ellipse 100% 60% at center center,
                rgba(139, 195, 74, 0.15) 0%,
                rgba(139, 195, 74, 0.08) 50%,
                rgba(76, 175, 80, 0.04) 80%,
                transparent 100%
            );
            /* 🌟 新功能：光晕透明度由CSS变量控制，与激光束同步减弱 */
            opacity: var(--laser-opacity, 1);
            z-index: 1;
            pointer-events: none;
        }

        /* 多层视觉系统 - 边框提示光效果 */
        .scan-border-glow {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 10;
            /* 🔧 确保扫描仪动画也有圆角边框 */
            border-radius: var(--border-radius-lg);
        }

        .scan-border-glow::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            width: 60px;  /* 🔧 修复：固定激光束长度，与动画关键帧保持一致 */
            height: 2px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(139, 195, 74, 0.1) 10%,
                rgba(139, 195, 74, 0.3) 20%,
                rgba(139, 195, 74, 0.5) 30%,
                rgba(76, 175, 80, 0.9) 40%,
                rgba(139, 195, 74, 0.5) 50%,
                rgba(139, 195, 74, 0.3) 60%,
                rgba(139, 195, 74, 0.1) 70%,
                transparent 80%,
                transparent 100%
            );
            border-radius: 1px;
            opacity: 0;
            animation: greenBorderFlow 3s ease-in-out 1 forwards;
            animation-delay: 2.6s;
            z-index: -1;
            pointer-events: none;
        }

        /* 🔧 修复：统一.scan-border-glow::after规则，移除冲突 */
        .scan-border-glow::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg,
                transparent 0%,
                rgba(139, 195, 74, 0.03) 25%,
                rgba(76, 175, 80, 0.06) 50%,
                rgba(139, 195, 74, 0.03) 75%,
                transparent 100%
            );
            border: 1px solid rgba(139, 195, 74, 0.15);
            border-radius: var(--border-radius-lg);
            /* 🔧 修复：确保背景渐变被圆角正确裁剪，避免方角显示 */
            overflow: hidden;
            opacity: 0;
            animation: scanComplete 1.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
            animation-delay: 1.0s;
            z-index: -1;
        }

        @keyframes scanComplete {
            0% {
                opacity: 0;
                border-color: rgba(139, 195, 74, 0.15);
                transform: scale(0.98);
            }
            30% {
                opacity: 0.6;
                border-color: rgba(76, 175, 80, 0.4);
                transform: scale(1.01);
            }
            60% {
                opacity: 1;
                border-color: rgba(76, 175, 80, 0.6);
                transform: scale(1.005);
            }
            100% {
                opacity: 0.25;
                border-color: rgba(139, 195, 74, 0.25);
                transform: scale(1);
            }
        }

        /* 🔧 紫色光线已移除 - 只保留绿色光线 */

        @keyframes greenBorderFlow {
            /* 上边：从左到右 - 固定纤细激光束尺寸 */
            0% {
                top: -2px;
                left: calc(100% * 0.1);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h);
                opacity: 0;  /* 🔧 修复：从透明开始 */
            }
            5% {
                top: -2px;
                left: calc(100% * 0.25);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h);
                opacity: 1;  /* 🔧 修复：快速淡入 */
            }
            /* 上边：加速移动 - 缩短时间提升速度 */
            12% {
                top: -2px;
                left: calc(100% * 0.45);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h);
            }
            /* 🔧 右上角快速过渡 - 保持速度一致性 */
            15% {
                top: -2px;
                left: calc(100% * 0.65);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h);
            }
            18% {
                top: -2px;
                left: calc(100% * 0.85);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h);
            }
            /* 🔧 修复：右上角平滑过渡 */
            19% {
                top: -2px;
                left: calc(100% - 2px);
                width: 2px;
                height: 2px;  /* 🔧 修复：拐角处使用方形过渡 */
                background: radial-gradient(circle, rgba(76, 175, 80, 0.9) 0%, rgba(139, 195, 74, 0.5) 50%, transparent 100%);
            }
            20% {
                top: calc(100% * 0.1);
                left: calc(100% - 2px);
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v);
            }
            /* 右边：加速移动 - 大幅缩短时间提升速度 */
            27% {
                top: calc(100% * 0.35);
                left: calc(100% - 2px);
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v);
            }
            /* 🔧 右下角快速过渡 - 保持速度一致性 */
            30% {
                top: calc(100% * 0.6);
                left: calc(100% - 2px);
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v);
            }
            33% {
                top: calc(100% * 0.85);
                left: calc(100% - 2px);
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v);
            }
            /* 🔧 修复：右下角平滑过渡 */
            34% {
                top: calc(100% - 2px);
                left: calc(100% - 2px);
                width: 2px;
                height: 2px;  /* 🔧 修复：拐角处使用方形过渡 */
                background: radial-gradient(circle, rgba(76, 175, 80, 0.9) 0%, rgba(139, 195, 74, 0.5) 50%, transparent 100%);
            }
            35% {
                top: calc(100% - 2px);
                left: calc(100% * 0.4);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h-reverse);
            }
            /* 下边：匀速移动 - 调整时间点 */
            42% {
                top: calc(100% - 2px);
                left: calc(100% * 0.3);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h-reverse);
            }
            /* 🔧 左下角快速过渡 - 调整时间点 */
            45% {
                top: calc(100% - 2px);
                left: calc(100% * 0.15);
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h-reverse);
            }
            /* 🔧 修复：左下角平滑过渡 */
            47% {
                top: calc(100% - 2px);
                left: -2px;
                width: 2px;
                height: 2px;  /* 🔧 修复：拐角处使用方形过渡 */
                background: radial-gradient(circle, rgba(76, 175, 80, 0.9) 0%, rgba(139, 195, 74, 0.5) 50%, transparent 100%);
            }
            48% {
                top: calc(100% * 0.8);
                left: -2px;
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v-reverse);
            }
            50% {
                top: calc(100% * 0.4);
                left: -2px;
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v-reverse);
            }
            /* 左边：匀速移动 - 调整时间点 */
            57% {
                top: calc(100% * 0.25);
                left: -2px;
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v-reverse);
                opacity: 1;
            }
            /* 🔧 左上角快速过渡 - 调整时间点 */
            60% {
                top: calc(100% * 0.15);
                left: -2px;
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v-reverse);
                opacity: 0.9;
            }
            63% {
                top: calc(100% * 0.05);
                left: -2px;
                width: 2px;
                height: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                background: var(--laser-gradient-v-reverse);
                opacity: 0.7;
            }
            /* 🔧 修复：添加左上角平滑过渡，避免突然跳跃 */
            64% {
                top: -2px;
                left: -2px;
                width: 2px;
                height: 2px;  /* 🔧 修复：拐角处使用方形过渡 */
                background: radial-gradient(circle, rgba(76, 175, 80, 0.9) 0%, rgba(139, 195, 74, 0.5) 50%, transparent 100%);
                opacity: 0.6;
            }
            65% {
                top: -2px;
                left: calc(100% * 0.05);  /* 🔧 修复：从左上角开始，而不是跳到中间 */
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h);
                opacity: 0.5;
            }
            /* 🔧 修复：平滑淡出，与65%关键帧保持一致 */
            100% {
                top: -2px;
                left: calc(100% * 0.05);  /* 🔧 修复：与65%关键帧保持一致，避免位置跳跃 */
                width: 60px;  /* 🔧 修复：固定激光束长度，保持纤细 */
                height: 2px;
                background: var(--laser-gradient-h);
                opacity: 0;
            }
        }

        /* 扫描完成悬停效果 - 多层系统 */
        .light-scan-entrance:hover {
            box-shadow:
                0 8px 25px rgba(76, 175, 80, 0.15),
                0 3px 10px rgba(76, 175, 80, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* 悬停时增强外层光晕效果 */
        .light-scan-entrance:hover::after {
            background: radial-gradient(
                ellipse 100% 60% at center center,
                rgba(139, 195, 74, 0.25) 0%,
                rgba(139, 195, 74, 0.15) 50%,
                rgba(76, 175, 80, 0.08) 80%,
                transparent 100%
            );
        }

        /* 悬停时增强流光边框效果 - 移除发光晕圈保持激光束精细度 */
        .light-scan-entrance:hover .scan-border-glow::before {
            opacity: 1.2;
            animation-duration:
                0.8s,
                2s;
            /* 🔧 移除box-shadow发光效果，保持2px激光束精细度 */
        }

        /* GPU加速优化 */
        .gpu-accelerated {
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* 动画容器 */
        .animation-container {
            perspective: 1200px;
            transform-style: preserve-3d;
        }

        /* ===== 移动端优化 ===== */
        @media (max-width: 768px) {
            /* 移动端减少动画复杂度，保持流畅性 */
            /* 移动端使用统一的magneticFloat动画，不重复定义 */

            .magnetic-entrance {
                animation-duration: 0.25s;
            }

            /* 移动端磁悬浮多层系统优化 */
            .magnetic-border-glow::before {
                animation-delay: 0.8s;
                animation-duration: 1.5s;
            }

            .magnetic-entrance::after {
                animation-delay: 0.5s;
                width: 3px;
                height: 3px;
            }

            .magnetic-entrance:hover {
                transform: translateY(-2px) scale(1.005);
            }

            /* 移动端悬停效果优化 */
            .magnetic-entrance:hover::before {
                opacity: 0.8;
            }

            .magnetic-entrance:hover::after {
                animation-duration: 1.2s;
                transform: translate(-50%, -50%) scale(1.5);
            }

            .magnetic-entrance:hover .magnetic-border-glow::before {
                /* 移动端移除绿色边框效果 */
                display: none;
            }

            /* 🚀 新算法：移动端主控动画 - 单一动画驱动所有扫描元素完美同步 + 激光束逐渐减弱 */
            @keyframes scanProgressMobile {
                0% { --scan-progress: 0%; --laser-opacity: 1; opacity: 0.4; }
                1.11% { --scan-progress: 1.11%; --laser-opacity: 1; opacity: 0.405; }
                2.22% { --scan-progress: 2.22%; --laser-opacity: 1; opacity: 0.41; }
                3.33% { --scan-progress: 3.33%; --laser-opacity: 1; opacity: 0.415; }
                4.44% { --scan-progress: 4.44%; --laser-opacity: 1; opacity: 0.42; }
                5.56% { --scan-progress: 5.56%; --laser-opacity: 1; opacity: 0.425; }
                6.67% { --scan-progress: 6.67%; --laser-opacity: 1; opacity: 0.43; }
                7.78% { --scan-progress: 7.78%; --laser-opacity: 1; opacity: 0.435; }
                8.89% { --scan-progress: 8.89%; --laser-opacity: 1; opacity: 0.44; }
                10% { --scan-progress: 10%; --laser-opacity: 1; opacity: 0.445; }
                11.11% { --scan-progress: 11.11%; --laser-opacity: 1; opacity: 0.45; }
                12.22% { --scan-progress: 12.22%; --laser-opacity: 1; opacity: 0.455; }
                13.33% { --scan-progress: 13.33%; --laser-opacity: 1; opacity: 0.46; }
                14.44% { --scan-progress: 14.44%; --laser-opacity: 1; opacity: 0.465; }
                15.56% { --scan-progress: 15.56%; --laser-opacity: 1; opacity: 0.47; }
                16.67% { --scan-progress: 16.67%; --laser-opacity: 1; opacity: 0.475; }
                17.78% { --scan-progress: 17.78%; --laser-opacity: 1; opacity: 0.48; }
                18.89% { --scan-progress: 18.89%; --laser-opacity: 1; opacity: 0.485; }
                20% { --scan-progress: 20%; --laser-opacity: 1; opacity: 0.49; }
                21.11% { --scan-progress: 21.11%; --laser-opacity: 1; opacity: 0.495; }
                22.22% { --scan-progress: 22.22%; --laser-opacity: 1; opacity: 0.5; }
                23.33% { --scan-progress: 23.33%; --laser-opacity: 1; opacity: 0.51; }
                24.44% { --scan-progress: 24.44%; --laser-opacity: 1; opacity: 0.52; }
                25.56% { --scan-progress: 25.56%; --laser-opacity: 1; opacity: 0.53; }
                26.67% { --scan-progress: 26.67%; --laser-opacity: 1; opacity: 0.54; }
                27.78% { --scan-progress: 27.78%; --laser-opacity: 1; opacity: 0.55; }
                28.89% { --scan-progress: 28.89%; --laser-opacity: 1; opacity: 0.56; }
                30% { --scan-progress: 30%; --laser-opacity: 1; opacity: 0.57; }
                31.11% { --scan-progress: 31.11%; --laser-opacity: 1; opacity: 0.58; }
                32.22% { --scan-progress: 32.22%; --laser-opacity: 1; opacity: 0.59; }
                33.33% { --scan-progress: 33.33%; --laser-opacity: 1; opacity: 0.6; }
                34.44% { --scan-progress: 34.44%; --laser-opacity: 1; opacity: 0.61; }
                35.56% { --scan-progress: 35.56%; --laser-opacity: 1; opacity: 0.62; }
                36.67% { --scan-progress: 36.67%; --laser-opacity: 1; opacity: 0.63; }
                37.78% { --scan-progress: 37.78%; --laser-opacity: 1; opacity: 0.64; }
                38.89% { --scan-progress: 38.89%; --laser-opacity: 1; opacity: 0.65; }
                40% { --scan-progress: 40%; --laser-opacity: 0.98; opacity: 0.66; }
                41.11% { --scan-progress: 41.11%; --laser-opacity: 0.96; opacity: 0.67; }
                42.22% { --scan-progress: 42.22%; --laser-opacity: 0.94; opacity: 0.68; }
                43.33% { --scan-progress: 43.33%; --laser-opacity: 0.92; opacity: 0.69; }
                44.44% { --scan-progress: 44.44%; --laser-opacity: 0.9; opacity: 0.7; }
                45.56% { --scan-progress: 45.56%; --laser-opacity: 0.88; opacity: 0.71; }
                46.67% { --scan-progress: 46.67%; --laser-opacity: 0.86; opacity: 0.72; }
                47.78% { --scan-progress: 47.78%; --laser-opacity: 0.84; opacity: 0.73; }
                48.89% { --scan-progress: 48.89%; --laser-opacity: 0.82; opacity: 0.74; }
                50% { --scan-progress: 50%; --laser-opacity: 0.8; opacity: 0.75; }
                51.11% { --scan-progress: 51.11%; --laser-opacity: 0.78; opacity: 0.76; }
                52.22% { --scan-progress: 52.22%; --laser-opacity: 0.76; opacity: 0.77; }
                53.33% { --scan-progress: 53.33%; --laser-opacity: 0.74; opacity: 0.78; }
                54.44% { --scan-progress: 54.44%; --laser-opacity: 0.72; opacity: 0.79; }
                55.56% { --scan-progress: 55.56%; --laser-opacity: 0.7; opacity: 0.8; }
                56.67% { --scan-progress: 56.67%; --laser-opacity: 0.68; opacity: 0.81; }
                57.78% { --scan-progress: 57.78%; --laser-opacity: 0.66; opacity: 0.82; }
                58.89% { --scan-progress: 58.89%; --laser-opacity: 0.64; opacity: 0.83; }
                60% { --scan-progress: 60%; --laser-opacity: 0.62; opacity: 0.84; }
                61.11% { --scan-progress: 61.11%; --laser-opacity: 0.6; opacity: 0.85; }
                62.22% { --scan-progress: 62.22%; --laser-opacity: 0.58; opacity: 0.86; }
                63.33% { --scan-progress: 63.33%; --laser-opacity: 0.56; opacity: 0.87; }
                64.44% { --scan-progress: 64.44%; --laser-opacity: 0.54; opacity: 0.88; }
                65.56% { --scan-progress: 65.56%; --laser-opacity: 0.52; opacity: 0.89; }
                66.67% { --scan-progress: 66.67%; --laser-opacity: 0.5; opacity: 0.9; }
                67.78% { --scan-progress: 67.78%; --laser-opacity: 0.48; opacity: 0.905; }
                68.89% { --scan-progress: 68.89%; --laser-opacity: 0.46; opacity: 0.91; }
                70% { --scan-progress: 70%; --laser-opacity: 0.44; opacity: 0.915; }
                71.11% { --scan-progress: 71.11%; --laser-opacity: 0.42; opacity: 0.92; }
                72.22% { --scan-progress: 72.22%; --laser-opacity: 0.4; opacity: 0.925; }
                73.33% { --scan-progress: 73.33%; --laser-opacity: 0.38; opacity: 0.93; }
                74.44% { --scan-progress: 74.44%; --laser-opacity: 0.36; opacity: 0.935; }
                75.56% { --scan-progress: 75.56%; --laser-opacity: 0.34; opacity: 0.94; }
                76.67% { --scan-progress: 76.67%; --laser-opacity: 0.32; opacity: 0.945; }
                77.78% { --scan-progress: 77.78%; --laser-opacity: 0.3; opacity: 0.95; }
                78.89% { --scan-progress: 78.89%; --laser-opacity: 0.28; opacity: 0.955; }
                80% { --scan-progress: 80%; --laser-opacity: 0.26; opacity: 0.96; }
                81.11% { --scan-progress: 81.11%; --laser-opacity: 0.24; opacity: 0.965; }
                82.22% { --scan-progress: 82.22%; --laser-opacity: 0.22; opacity: 0.97; }
                83.33% { --scan-progress: 83.33%; --laser-opacity: 0.2; opacity: 0.975; }
                84.44% { --scan-progress: 84.44%; --laser-opacity: 0.18; opacity: 0.98; }
                85.56% { --scan-progress: 85.56%; --laser-opacity: 0.16; opacity: 0.982; }
                86.67% { --scan-progress: 86.67%; --laser-opacity: 0.14; opacity: 0.984; }
                87.78% { --scan-progress: 87.78%; --laser-opacity: 0.12; opacity: 0.986; }
                88.89% { --scan-progress: 88.89%; --laser-opacity: 0.1; opacity: 0.988; }
                90% { --scan-progress: 90%; --laser-opacity: 0.08; opacity: 0.99; }
                91.11% { --scan-progress: 91.11%; --laser-opacity: 0.06; opacity: 0.992; }
                92.22% { --scan-progress: 92.22%; --laser-opacity: 0.04; opacity: 0.994; }
                93.33% { --scan-progress: 93.33%; --laser-opacity: 0.03; opacity: 0.996; }
                94.44% { --scan-progress: 94.44%; --laser-opacity: 0.02; opacity: 0.997; }
                95.56% { --scan-progress: 95.56%; --laser-opacity: 0.015; opacity: 0.998; }
                96.67% { --scan-progress: 96.67%; --laser-opacity: 0.01; opacity: 0.999; }
                97.78% { --scan-progress: 97.78%; --laser-opacity: 0.005; opacity: 0.9995; }
                98.89% { --scan-progress: 98.89%; --laser-opacity: 0.002; opacity: 0.9998; }
                100% { --scan-progress: 100%; --laser-opacity: 0; opacity: 1; }
            }

            .light-scan-entrance {
                animation: scanProgressMobile 1.5s linear forwards;  /* 🔧 修复：使用移动端专用动画名称 */
            }

            .light-scan-entrance::before {
                /* 🚀 新算法：移动端也使用CSS变量控制位置，实现完美同步 */
                width: 2px;
                left: calc(var(--scan-progress, 0%) - 2px);  /* 🚀 移动端激光束绑定到扫描进度 */
                background: linear-gradient(
                    to right,
                    rgba(139, 195, 74, 0.4) 0%,
                    rgba(139, 195, 74, 0.8) 50%,
                    rgba(139, 195, 74, 0.4) 100%
                );
                mask: radial-gradient(
                    ellipse 100% 70% at center center,
                    rgba(0, 0, 0, 1) 0%,
                    rgba(0, 0, 0, 0.8) 50%,
                    rgba(0, 0, 0, 0.4) 80%,
                    rgba(0, 0, 0, 0) 100%
                );
                -webkit-mask: radial-gradient(
                    ellipse 100% 70% at center center,
                    rgba(0, 0, 0, 1) 0%,
                    rgba(0, 0, 0, 0.8) 50%,
                    rgba(0, 0, 0, 0.4) 80%,
                    rgba(0, 0, 0, 0) 100%
                );
                box-shadow:
                    0 0 2px rgba(139, 195, 74, 0.7),
                    0 0 4px rgba(139, 195, 74, 0.5),
                    0 0 6px rgba(139, 195, 74, 0.3),
                    0 0 8px rgba(76, 175, 80, 0.2);
                /* 🌟 新功能：移动端激光束透明度由CSS变量控制，实现逐渐减弱效果 */
                opacity: var(--laser-opacity, 1);
            }

            /* 移动端梭形激光束的外层光晕效果 */
            .light-scan-entrance::after {
                top: -1px;
                left: calc(var(--scan-progress, 0%) - 3px);  /* 🚀 移动端光晕也绑定到扫描进度 */
                width: 4px;
                height: calc(100% + 2px);
                background: radial-gradient(
                    ellipse 100% 55% at center center,
                    rgba(139, 195, 74, 0.12) 0%,
                    rgba(139, 195, 74, 0.06) 60%,
                    rgba(76, 175, 80, 0.03) 85%,
                    transparent 100%
                );
                /* 🌟 新功能：移动端光晕透明度由CSS变量控制，与激光束同步减弱 */
                opacity: var(--laser-opacity, 1);
            }

            /* 移动端多层系统流光边框优化 */
            .scan-border-glow::before {
                animation-delay: 1.5s, 2.2s;
                animation-duration: 0.6s, 4s;
                width: 60px;  /* 🔧 修复：移动端也使用固定激光束长度 */
                height: 2px;
                background: linear-gradient(
                    90deg,
                    transparent 0%,
                    rgba(139, 195, 74, 0.1) 15%,
                    rgba(139, 195, 74, 0.3) 25%,
                    rgba(139, 195, 74, 0.5) 35%,
                    rgba(76, 175, 80, 0.7) 45%,
                    rgba(139, 195, 74, 0.5) 55%,
                    rgba(139, 195, 74, 0.3) 65%,
                    rgba(139, 195, 74, 0.1) 75%,
                    transparent 85%,
                    transparent 100%
                );
            }

            .light-scan-entrance:hover {
                box-shadow:
                    0 4px 15px rgba(76, 175, 80, 0.12),
                    0 2px 8px rgba(76, 175, 80, 0.08);
            }

            /* 移动端悬停效果优化 */
            .light-scan-entrance:hover::after {
                background: radial-gradient(
                    ellipse 100% 55% at center center,
                    rgba(139, 195, 74, 0.18) 0%,
                    rgba(139, 195, 74, 0.10) 60%,
                    rgba(76, 175, 80, 0.05) 85%,
                    transparent 100%
                );
            }

            /* 移动端悬停流光边框增强 - 移除发光晕圈保持激光束精细度 */
            .light-scan-entrance:hover .scan-border-glow::before {
                opacity: 0.9;
                animation-duration: 0.6s, 3s;
                /* 🔧 移除box-shadow发光效果，保持2px激光束精细度 */
            }

            /* 移动端全息投影动画优化 */
            @keyframes hologramMatrixMobile {
                0% {
                    opacity: 0;
                    transform: scale(0.2) rotateX(60deg) skewX(30deg);
                    filter: blur(20px) hue-rotate(0deg) saturate(0) brightness(0);
                    clip-path: polygon(0% 0%, 0% 0%, 0% 0%, 0% 0%);
                }
                20% {
                    opacity: 1;
                    transform: scale(0.8) rotateX(20deg) skewX(5deg);
                    filter: blur(5px) hue-rotate(180deg) saturate(1.4) brightness(1.08);
                    clip-path: polygon(0% 0%, 100% 0%, 100% 80%, 0% 80%);
                }
                60% {
                    opacity: 1;
                    transform: scale(1.02) rotateX(2deg) skewX(0deg);
                    filter: blur(1px) hue-rotate(270deg) saturate(1.2) brightness(1.04);
                    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
                }
                100% {
                    opacity: 1;
                    transform: scale(1) rotateX(0deg) skewX(0deg);
                    filter: blur(0px) hue-rotate(360deg) saturate(1) brightness(1);
                    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
                }
            }

            .hologram-matrix-entrance {
                animation: hologramMatrixMobile 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }

            .hologram-matrix-entrance::before {
                animation-duration: 0.8s;
            }

            .hologram-matrix-entrance::after {
                animation-duration: 0.8s;
            }

            .hologram-border-glow::before {
                animation-delay: 0.6s;
                animation-duration: 1.0s;
            }

            .hologram-matrix-entrance:hover,
            .hologram-matrix-completed:hover {
                transform: scale(1.02) rotateY(1deg) skewX(0.5deg);
                box-shadow:
                    0 15px 30px rgba(0, 255, 255, 0.25),
                    0 5px 15px rgba(0, 255, 65, 0.15),
                    0 0 20px rgba(0, 255, 255, 0.3);
            }

            /* 移动端量子粒子动画优化 - 圆形飞入聚合遮罩扩展成卡片 */
            .quantum-particle-entrance {
                animation: quantumCardAppear 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.8s forwards;
            }

            .quantum-particle-entrance:hover,
            .quantum-particle-completed:hover {
                transform: scale(1.015) rotateY(1deg);
                box-shadow:
                    0 12px 25px rgba(63, 81, 181, 0.12),
                    0 4px 10px rgba(63, 81, 181, 0.08);
            }

        }

        /* ===== 第5个入场特效：数字雨瀑布动画 ===== */

        /* 数字雨瀑布入场动画 - 黑客矩阵风格 */
        .digital-rain-entrance {
            animation: digitalRainCascade 2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            will-change: transform, opacity, clip-path;
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        /* 数字雨边框发光效果 - 随机颜色通过内联样式设置 */
        .digital-rain-border-glow {
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            /* background通过JavaScript内联样式动态设置随机颜色 */
            border-radius: inherit;
            z-index: -1;
            opacity: 0;
            animation: digitalRainGlow 2s ease-in-out forwards;
        }

        /* 数字雨Emoji字符元素 */
        .digital-rain-char {
            position: absolute;
            /* 移除color设置，让Emoji保持原有彩色 */
            font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif;
            font-weight: normal;
            /* 发光效果通过内联样式动态设置随机颜色 */
            pointer-events: none;
            z-index: 15;
            will-change: transform, opacity;
            line-height: 1;
            /* 增强Emoji的可见性 */
            text-rendering: optimizeLegibility;
        }

        /* 数字雨瀑布关键帧动画 - 144帧超高密度 */
        @keyframes digitalRainCascade {
            /* 第一阶段：初始隐藏 (0-5%) */
            0% {
                opacity: 0;
                transform: scale(0.8) rotateX(15deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%);
                filter: blur(10px) brightness(0.3);
            }
            2% {
                opacity: 0.1;
                transform: scale(0.85) rotateX(12deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 5%, 0% 5%);
                filter: blur(8px) brightness(0.4);
            }
            5% {
                opacity: 0.2;
                transform: scale(0.9) rotateX(8deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 10%, 0% 10%);
                filter: blur(6px) brightness(0.5);
            }

            /* 第二阶段：数字雨开始 (5-25%) */
            8% {
                opacity: 0.3;
                transform: scale(0.92) rotateX(6deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 15%, 0% 15%);
                filter: blur(5px) brightness(0.6);
            }
            12% {
                opacity: 0.4;
                transform: scale(0.94) rotateX(4deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 25%, 0% 25%);
                filter: blur(4px) brightness(0.7);
            }
            15% {
                opacity: 0.5;
                transform: scale(0.96) rotateX(3deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 35%, 0% 35%);
                filter: blur(3px) brightness(0.8);
            }
            20% {
                opacity: 0.6;
                transform: scale(0.98) rotateX(2deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%);
                filter: blur(2px) brightness(0.9);
            }
            25% {
                opacity: 0.7;
                transform: scale(0.99) rotateX(1deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 65%, 0% 65%);
                filter: blur(1px) brightness(0.95);
            }


            /* 第三阶段：快速构建 (25-70%) */
            30% {
                opacity: 0.8;
                transform: scale(1) rotateX(0.5deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 75%, 0% 75%);
                filter: blur(0.5px) brightness(1);
            }
            40% {
                opacity: 0.85;
                transform: scale(1) rotateX(0deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 85%, 0% 85%);
                filter: blur(0px) brightness(1);
            }
            50% {
                opacity: 0.9;
                transform: scale(1) rotateX(0deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 92%, 0% 92%);
                filter: blur(0px) brightness(1);
            }
            60% {
                opacity: 0.95;
                transform: scale(1) rotateX(0deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 97%, 0% 97%);
                filter: blur(0px) brightness(1);
            }
            70% {
                opacity: 0.98;
                transform: scale(1) rotateX(0deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
                filter: blur(0px) brightness(1);
            }

            /* 第四阶段：完成显现 (70-100%) */
            80% {
                opacity: 1;
                transform: scale(1) rotateX(0deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
                filter: blur(0px) brightness(1);
            }
            90% {
                opacity: 1;
                transform: scale(1) rotateX(0deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
                filter: blur(0px) brightness(1);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotateX(0deg);
                clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
                filter: blur(0px) brightness(1);
            }
        }

        /* 数字雨边框发光动画 */
        @keyframes digitalRainGlow {
            0% { opacity: 0; }
            20% { opacity: 0.3; }
            50% { opacity: 0.6; }
            80% { opacity: 0.3; }
            100% { opacity: 0; }
        }

        /* 数字雨字符下落动画 - 使用CSS变量动态控制移动距离 */
        @keyframes digitalRainFall {
            0% {
                transform: translateY(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(var(--move-distance, 400px));
                opacity: 0;
            }
        }

        /* 数字雨完成状态悬停效果 - 移除炫目效果，保持简洁清晰 */
        .digital-rain-completed:hover {
            /* 移除绿色发光阴影和3D旋转效果，避免字体虚化和炫目 */
            transform: translateY(-2px);
            box-shadow: var(--shadow-strong);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* ===== 终极庆祝动画样式系统 ===== */

        /* 全屏庆祝容器 */
        .ultimate-celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none;
            overflow: hidden;
        }

        /* 庆祝遮罩层 */
        .celebration-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.1);
            opacity: 0;
            animation: celebrationOverlayFade 4.5s ease-in-out;
        }

        /* 全息故障效果 */
        .celebration-hologram-glitch {
            animation: celebrationGlitch 1s ease-in-out;
        }

        /* 卡片故障效果 */
        .celebration-card-glitch {
            animation: celebrationCardGlitch 1s ease-in-out;
        }

        /* 爆发粒子 */
        .celebration-burst-particle {
            animation: celebrationBurst 1s ease-out forwards;
        }

        /* 庆祝文字层 */
        .celebration-text-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10002;
        }

        /* 磁悬浮庆祝文字 */
        .celebration-magnetic-text {
            text-align: center;
            animation: celebrationMagneticText 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
            /* GPU加速优化 */
            will-change: transform, filter, opacity;
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        .celebration-title {
            font-size: 6rem;
            font-weight: bold;
            color: #ff6b6b;
            text-shadow:
                0 0 40px rgba(255, 107, 107, 0.9),
                0 0 80px rgba(255, 107, 107, 0.6);
            margin-bottom: 2rem;
            line-height: 1.1;
            /* GPU加速优化 */
            will-change: transform, filter;
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        .celebration-subtitle {
            font-size: 3rem;
            color: #4ecdc4;
            text-shadow:
                0 0 35px rgba(78, 205, 196, 0.9),
                0 0 70px rgba(78, 205, 196, 0.6);
            line-height: 1.2;
            /* GPU加速优化 */
            will-change: transform, filter;
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        .celebration-text-fadeout {
            animation: celebrationTextFadeOut 0.5s ease-out forwards;
        }

        /* 庆祝雨滴 */
        .celebration-rain-drop {
            animation: celebrationRainFall 1.5s linear forwards;
        }

        /* ===== 终极庆祝动画关键帧 ===== */

        /* 遮罩层淡入淡出 */
        @keyframes celebrationOverlayFade {
            0% { opacity: 0; }
            20% { opacity: 0.3; }
            80% { opacity: 0.3; }
            100% { opacity: 0; }
        }

        /* 全息故障效果 */
        @keyframes celebrationGlitch {
            0% {
                filter: hue-rotate(0deg) brightness(1) contrast(1);
                transform: translateX(0);
            }
            10% {
                filter: hue-rotate(90deg) brightness(1.2) contrast(1.5);
                transform: translateX(-2px);
            }
            20% {
                filter: hue-rotate(180deg) brightness(0.8) contrast(2);
                transform: translateX(2px);
            }
            30% {
                filter: hue-rotate(270deg) brightness(1.5) contrast(0.8);
                transform: translateX(-1px);
            }
            40% {
                filter: hue-rotate(360deg) brightness(1) contrast(1);
                transform: translateX(1px);
            }
            50% {
                filter: hue-rotate(180deg) brightness(1.3) contrast(1.8);
                transform: translateX(0);
            }
            100% {
                filter: hue-rotate(0deg) brightness(1) contrast(1);
                transform: translateX(0);
            }
        }

        /* 卡片故障效果 */
        @keyframes celebrationCardGlitch {
            0% {
                transform: scale(1) rotateX(0deg);
                filter: hue-rotate(0deg) brightness(1);
            }
            25% {
                transform: scale(1.02) rotateX(2deg);
                filter: hue-rotate(90deg) brightness(1.2);
            }
            50% {
                transform: scale(0.98) rotateX(-1deg);
                filter: hue-rotate(180deg) brightness(0.9);
            }
            75% {
                transform: scale(1.01) rotateX(1deg);
                filter: hue-rotate(270deg) brightness(1.1);
            }
            100% {
                transform: scale(1) rotateX(0deg);
                filter: hue-rotate(360deg) brightness(1);
            }
        }

        /* 粒子爆发动画 */
        @keyframes celebrationBurst {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(calc(var(--end-x) - 50vw), calc(var(--end-y) - 50vh)) scale(0);
                opacity: 0;
            }
        }

        /* 磁悬浮庆祝文字动画 */
        @keyframes celebrationMagneticText {
            0% {
                opacity: 0;
                transform: scale(0.5) rotateX(90deg) translateY(100px);
                filter: blur(20px);
            }
            20% {
                opacity: 0.3;
                transform: scale(0.7) rotateX(45deg) translateY(50px);
                filter: blur(10px);
            }
            50% {
                opacity: 0.8;
                transform: scale(0.9) rotateX(10deg) translateY(10px);
                filter: blur(2px);
            }
            80% {
                opacity: 1;
                transform: scale(1.05) rotateX(-5deg) translateY(-5px);
                filter: blur(0px);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotateX(0deg) translateY(0);
                filter: blur(0px);
            }
        }

        /* 庆祝文字淡出动画 */
        @keyframes celebrationTextFadeOut {
            0% {
                opacity: 1;
                transform: scale(1) rotateX(0deg);
            }
            100% {
                opacity: 0;
                transform: scale(0.8) rotateX(45deg) translateY(-50px);
            }
        }

        /* 庆祝雨滴下落动画 - 优化版：确保落到浏览器视窗底部 */
        @keyframes celebrationRainFall {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 0;
            }
            5% {
                opacity: 1;
            }
            95% {
                opacity: 1;
            }
            100% {
                /* 🎯 优化：确保emoji落到当前浏览器视窗的底部边界 */
                transform: translateY(calc(100vh + 50px)) rotate(360deg);
                opacity: 0;
            }
        }

        /* 移动端优化 - 保持超震撼效果 */
        @media (max-width: 768px) {
            .celebration-title {
                font-size: 4.5rem; /* 移动端超大字体 */
                text-shadow:
                    0 0 30px rgba(255, 107, 107, 0.9),
                    0 0 60px rgba(255, 107, 107, 0.6);
            }

            .celebration-subtitle {
                font-size: 2.5rem; /* 移动端超大副标题 */
                text-shadow:
                    0 0 25px rgba(78, 205, 196, 0.9),
                    0 0 50px rgba(78, 205, 196, 0.6);
            }

            .celebration-burst-particle {
                /* 移动端粒子也要保持超大 */
                min-width: 20px;
                min-height: 20px;
            }

            .celebration-rain-drop {
                font-size: 26px; /* 移动端Emoji也要超大 */
            }
        }

        /* 减少动画偏好设置 */
        @media (prefers-reduced-motion: reduce) {
            .magnetic-entrance,
            .light-scan-entrance,
            .hologram-matrix-entrance {
                animation: fadeInSimple 0.3s ease forwards;
            }

            .quantum-particle-entrance {
                animation: quantumSimple 0.3s ease forwards;
            }

            .digital-rain-entrance {
                animation: digitalRainSimple 0.3s ease forwards;
            }

            @keyframes fadeInSimple {
                from { opacity: 0; }
                to { opacity: 1; }
            }

            @keyframes quantumSimple {
                from { transform: scale(0.8); }
                to { transform: scale(1); }
            }

            @keyframes digitalRainSimple {
                from {
                    opacity: 0;
                    transform: scale(0.9) rotateX(5deg);
                }
                to {
                    opacity: 1;
                    transform: scale(1) rotateX(0deg);
                }
            }

            .magnetic-entrance:hover,
            .light-scan-entrance:hover,
            .hologram-matrix-entrance:hover,
            .hologram-matrix-completed:hover,
            .quantum-particle-entrance:hover,
            .quantum-particle-completed:hover,
            .digital-rain-entrance:hover,
            .digital-rain-completed:hover {
                transform: none;
            }

            .magnetic-entrance::before,
            .magnetic-entrance::after,
            .magnetic-border-glow::before,
            .light-scan-entrance::before,
            .light-scan-entrance::after,
            .scan-border-glow::before,
            .scan-border-glow::after,
            .hologram-matrix-entrance::before,
            .hologram-matrix-entrance::after,
            .hologram-border-glow::before {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- 主应用容器 - 使用新的CSS系统 -->
    <div class="app-container" x-data="gasStationApp()" x-cloak>
        <div class="container">
            <!-- 应用标题卡片 -->
            <div class="card">
                <div class="card-header text-center">
                    <h1 class="text-3xl text-primary mb-auto">
                        🛢️ 加油站销售数据报告生成器
                    </h1>
                    <p class="text-base text-muted">
                        智能解析 · 精确计算 · 标准报告 · 炫酷体验
                    </p>
                </div>
            </div>

            <!--
            Alpine.js应用架构演示卡片 - 已注释保留，未来可恢复
            包含：动画测试按钮、数据架构测试、终极庆祝动画等功能

            <div class="card gpu-accelerated animation-container">
                <div class="card-header">
                    <h2 class="text-xl text-primary">🧠 Alpine.js应用架构</h2>
                </div>
                <div class="card-body">
                    <div class="text-center p-lg">
                        <div class="text-lg text-primary mb-auto" x-text="appStatus.message"></div>

                        <div class="flex justify-center" style="margin-top: var(--spacing-lg);">
                            <button class="btn btn-primary btn-large" @click="testClick()">
                                🚀 测试数据架构和计算
                            </button>
                        </div>

                        任务2.2：现代化动画系统测试区域
                        <div class="flex justify-center flex-wrap" style="margin-top: var(--spacing-lg); gap: var(--spacing-sm);">
                            <button class="btn btn-secondary btn-large" @click="triggerMagneticEntrance()">
                                ✨ 磁悬浮入场特效
                            </button>
                            <button class="btn btn-primary btn-large" @click="triggerLightScanEntrance()">
                                📡 扫描仪入场特效
                            </button>
                            <button class="btn btn-accent btn-large" @click="triggerHologramMatrixEntrance()">
                                🌈 全息投影矩阵
                            </button>
                            <button class="btn btn-info btn-large" @click="triggerQuantumParticleEntrance()">
                                ⚛️ 量子粒子聚合
                            </button>
                            <button class="btn btn-success btn-large" @click="triggerDigitalRainEntrance()">
                                🌧️ 数字雨瀑布
                            </button>
                            <button class="btn btn-outline btn-large" @click="resetAnimations()">
                                🔄 重置动画
                            </button>
                        </div>

                        终极庆祝动画按钮
                        <div class="text-center" style="margin-top: var(--spacing-md);">
                            <button class="btn btn-celebration btn-large" @click="triggerUltimateCelebrationAnimation()">
                                🎉 终极庆祝动画
                            </button>
                            <p class="text-xs text-muted" style="margin-top: var(--spacing-sm);">
                                报告完成时的震撼庆祝特效 - 融合5个顶级特效精华
                            </p>
                        </div>

                        <div class="text-center text-muted" style="margin-top: var(--spacing-md);">
                            <p class="text-sm">🎭 现代化动画系统 - 专业商业风格 (5/5完成) ✅</p>
                            <p class="text-xs">适合加油站户外环境，144fps超高密度关键帧，5个顶级入场特效</p>
                        </div>

                        <div class="text-sm text-muted" style="margin-top: var(--spacing-lg);">
                            当前步骤: <span class="font-semibold text-primary" x-text="currentStep"></span> -
                            <span x-text="steps[currentStep - 1]?.title"></span>
                        </div>
                    </div>
                </div>
            </div>
            -->

            <!-- 步骤导航展示卡片 -->
            <div class="card">
                <div class="card-header">
                    <h2 class="text-xl text-primary">🗺️ 步骤导航系统</h2>
                </div>
                <div class="card-body">
                    <div class="flex flex-col" style="gap: var(--spacing-sm);">
                        <template x-for="step in steps" :key="step.id">
                            <div class="flex justify-between items-center p-sm rounded step-indicator"
                                 :class="step.id === currentStep ? 'bg-primary text-light' : 'bg-background-secondary'"
                                 :data-step="step.id">
                                <span class="text-base">
                                    <span x-text="step.id"></span>. <span x-text="step.title"></span>
                                </span>
                                <span x-show="step.completed" class="text-success">✅</span>
                                <span x-show="step.id === currentStep" class="text-warning">👉</span>
                            </div>
                        </template>
                    </div>

                    <div class="flex justify-center" style="margin-top: var(--spacing-lg); gap: var(--spacing-sm);">
                        <button class="btn btn-outline btn-small" @click="prevStep()" :disabled="currentStep <= 1">
                            ⬅️ 上一步
                        </button>
                        <button class="btn btn-outline btn-small" @click="nextStep()" :disabled="currentStep >= 7">
                            下一步 ➡️
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤内容区域 -->
            <div class="card" x-show="currentStep >= 1">
                <div class="card-header">
                    <h2 class="text-xl text-primary">
                        <span x-text="steps[currentStep - 1]?.title || '步骤内容'"></span>
                    </h2>
                    <div class="text-sm text-muted">
                        步骤 <span x-text="currentStep"></span> / 7
                    </div>
                </div>
                <div class="card-body">
                    <!-- 步骤1: 基础信息 -->
                    <div x-show="currentStep === 1" data-step-content="1">
                        <div class="flex flex-col" style="gap: var(--spacing-lg);">
                            <div class="text-base text-muted">
                                📅 请设置报告日期和基本信息
                            </div>

                            <div class="flex flex-col" style="gap: var(--spacing-md);">
                                <div>
                                    <label class="text-base font-semibold text-primary">报告日期</label>
                                    <input type="date"
                                           class="form-input"
                                           x-model="formData.reportDate"
                                           style="margin-top: var(--spacing-xs);">
                                </div>

                                <div>
                                    <label class="text-base font-semibold text-primary">加油站名称</label>
                                    <input type="text"
                                           class="form-input"
                                           x-model="formData.stationName"
                                           placeholder="请输入加油站名称"
                                           style="margin-top: var(--spacing-xs);">
                                </div>


                            </div>

                            <div class="text-sm text-success">
                                ✅ 完成基础信息设置后，点击"下一步"继续
                            </div>
                        </div>
                    </div>

                    <!-- 步骤2: 昨日数据 -->
                    <div x-show="currentStep === 2" data-step-content="2">
                        <div class="flex flex-col" style="gap: var(--spacing-lg);">
                            <div class="text-base text-muted">
                                📋 粘贴昨日数据（可选，用于自动计算环比）
                            </div>

                            <div>
                                <label class="text-base font-semibold text-primary">昨日数据（微信群消息格式）</label>
                                <textarea class="form-input"
                                          rows="8"
                                          x-model="formData.yesterdayData"
                                          placeholder="请粘贴昨日的微信群数据消息，系统将自动解析..."
                                          style="margin-top: var(--spacing-xs); font-family: monospace; font-size: 14px;"></textarea>
                            </div>

                            <!-- 智能解析按钮 -->
                            <div x-show="formData.yesterdayData && formData.yesterdayData.trim().length > 0">
                                <button type="button"
                                        class="btn btn-primary"
                                        @click="parseYesterdayData()"
                                        style="width: 100%; padding: var(--spacing-md); font-size: var(--font-size-lg); cursor: pointer;">
                                    🔍 智能解析昨日数据
                                </button>
                            </div>

                            <!-- 调试信息 -->
                            <div x-show="formData.yesterdayData && formData.yesterdayData.trim().length > 0" class="text-sm text-info">
                                🔧 调试信息：数据长度 <span x-text="formData.yesterdayData ? formData.yesterdayData.length : 0"></span> 字符
                            </div>

                            <!-- 手动输入表单 -->
                            <div x-show="!formData.yesterdayData || formData.yesterdayData.trim().length === 0" class="card" style="background-color: var(--info-bg); border: 1px solid var(--info-color);">
                                <div class="card-header">
                                    <h3 class="text-info">📝 手动输入昨日数据</h3>
                                </div>
                                <div class="card-body">
                                    <div class="grid grid-cols-1 md:grid-cols-2" style="gap: var(--spacing-md);">
                                        <!-- 昨日销售92#汽油 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日销售92#汽油 (吨)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.gasoline92"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日销售95#汽油 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日销售95#汽油 (吨)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.gasoline95"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日销售98#汽油 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日销售98#汽油 (吨)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.gasoline98"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日销售柴油 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日销售柴油 (吨)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.diesel"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日非油销售 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日非油销售 (元)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.nonOilSales"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日月累计销售汽油 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日月累计销售汽油 (吨)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.monthlyGasoline"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日月累计销售柴油 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日月累计销售柴油 (吨)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.monthlyDiesel"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日本月累计非油销售 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日本月累计非油销售 (元)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.monthlyNonOil"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0.00"
                                                   step="0.01"
                                                   min="0">
                                        </div>

                                        <!-- 昨日累计电子券核销 -->
                                        <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                            <label class="text-base font-semibold text-primary">昨日累计电子券核销 (张)</label>
                                            <input type="number"
                                                   class="form-input"
                                                   x-model.number="yesterdayData.vouchersTotal"
                                                   @input="calculateYesterdayTotals()"
                                                   placeholder="0"
                                                   step="1"
                                                   min="0">
                                        </div>
                                    </div>

                                    <div class="text-sm text-info" style="margin-top: var(--spacing-md);">
                                        💡 提示：输入9个昨日数据字段后，系统将自动计算汇总数据，用于环比分析
                                    </div>
                                </div>
                            </div>

                            <!-- 解析结果预览 -->
                            <div x-show="yesterdayData.parsed" class="card" style="background-color: var(--success-bg); border: 1px solid var(--success-color);">
                                <div class="card-header">
                                    <h3 class="text-success">✅ 昨日数据已准备完成</h3>
                                </div>
                                <div class="card-body">
                                    <div class="grid grid-cols-2 md:grid-cols-3" style="gap: var(--spacing-sm); font-size: var(--font-size-sm);">
                                        <div><strong>昨日销售92#汽油:</strong> <span x-text="yesterdayData.gasoline92.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日销售95#汽油:</strong> <span x-text="yesterdayData.gasoline95.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日销售98#汽油:</strong> <span x-text="yesterdayData.gasoline98.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日销售汽油合计:</strong> <span x-text="yesterdayData.gasolineTotal.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日销售柴油:</strong> <span x-text="yesterdayData.diesel.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日销售柴汽合计:</strong> <span x-text="yesterdayData.totalSales.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日非油销售:</strong> <span x-text="yesterdayData.nonOilSales.toFixed(2)"></span>元</div>
                                        <div><strong>昨日月累计销售汽油:</strong> <span x-text="yesterdayData.monthlyGasoline.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日月累计销售柴油:</strong> <span x-text="yesterdayData.monthlyDiesel.toFixed(2)"></span>吨</div>
                                        <div><strong>昨日本月累计非油销售:</strong> <span x-text="yesterdayData.monthlyNonOil.toFixed(2)"></span>元</div>
                                        <div><strong>昨日累计电子券核销:</strong> <span x-text="yesterdayData.vouchersTotal"></span>张</div>
                                    </div>
                                </div>
                            </div>

                            <div class="text-sm text-info">
                                💡 提示：没有微信消息？直接手动输入昨日数据即可，系统将自动用于环比分析
                            </div>
                        </div>
                    </div>

                    <!-- 步骤3: 油品销售 -->
                    <div x-show="currentStep === 3" data-step-content="3">
                        <div class="flex flex-col" style="gap: var(--spacing-lg);">
                            <div class="text-base text-muted">
                                ⛽ 请输入今日油品销售数据
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2" style="gap: var(--spacing-md);">
                                <!-- 92#汽油 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">92#汽油 (升)</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.gasoline92.liters"
                                           placeholder="0"
                                           step="0.01">
                                </div>

                                <!-- 95#汽油 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">95#汽油 (升)</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.gasoline95.liters"
                                           placeholder="0"
                                           step="0.01">
                                </div>

                                <!-- 98#汽油 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">98#汽油 (升)</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.gasoline98.liters"
                                           placeholder="0"
                                           step="0.01">
                                </div>

                                <!-- 柴油 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">柴油 (升)</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.diesel.liters"
                                           placeholder="0"
                                           step="0.01">
                                </div>
                            </div>

                            <div class="text-sm text-success">
                                ✅ 系统将自动计算升转吨数据
                            </div>
                        </div>
                    </div>

                    <!-- 步骤4: 非油销售 -->
                    <div x-show="currentStep === 4" data-step-content="4">
                        <div class="flex flex-col" style="gap: var(--spacing-lg);">
                            <div class="text-base text-muted">
                                🛒 请输入非油销售数据
                            </div>

                            <div class="flex flex-col" style="gap: var(--spacing-md);">
                                <!-- 当日非油销售 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">当日非油销售 (元)</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.nonOilSales.today"
                                           placeholder="0"
                                           step="0.01">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        包括便利店、洗车、其他服务等所有非油销售
                                    </div>
                                </div>

                                <!-- 本月累计非油销售 - 自动计算 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">本月累计非油销售 (元)</label>
                                    <div class="form-display" style="background-color: var(--background-secondary); border: 2px solid var(--border-color); border-radius: var(--border-radius); padding: var(--spacing-md); margin-top: var(--spacing-xs);">
                                        <span class="text-lg font-bold text-success" x-text="calculatedResults.monthlyNonOilTotal.toFixed(2)"></span>
                                        <div class="text-sm text-muted" style="margin-top: var(--spacing-xs);">
                                            自动计算 = 昨日累计(<span x-text="(yesterdayData.monthlyNonOil || 0).toFixed(2)"></span>元) + 当日销售(<span x-text="(formData.nonOilSales.today || 0).toFixed(2)"></span>元)
                                        </div>
                                    </div>
                                    <div class="text-xs text-info" style="margin-top: var(--spacing-xs);">
                                        💡 此数值由系统自动计算，无需手动输入
                                    </div>
                                </div>

                                <!-- 去年同期非油销售 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">去年同期非油销售 (元)</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.nonOilSales.lastYear"
                                           placeholder="0"
                                           step="0.01">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        用于计算同比数据，可选填写
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 步骤5: 其他数据 -->
                    <div x-show="currentStep === 5" data-step-content="5">
                        <div class="flex flex-col" style="gap: var(--spacing-lg);">
                            <div class="text-base text-muted">
                                📊 请输入其他业务数据
                            </div>

                            <div class="flex flex-col" style="gap: var(--spacing-md);">
                                <!-- 电子券核销 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">当日电子券核销</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.electronicVouchers.today"
                                           placeholder="0">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        单位：张
                                    </div>
                                </div>

                                <!-- 累计电子券核销 - 自动计算 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">累计电子券核销</label>
                                    <div class="form-display" style="background-color: var(--background-secondary); border: 2px solid var(--border-color); border-radius: var(--border-radius); padding: var(--spacing-md); margin-top: var(--spacing-xs);">
                                        <span class="text-lg font-bold text-success" x-text="calculatedResults.cumulativeVouchers"></span>
                                        <div class="text-sm text-muted" style="margin-top: var(--spacing-xs);">
                                            自动计算 = 昨日累计(<span x-text="yesterdayData.vouchersTotal || 0"></span>张) + 当日核销(<span x-text="formData.electronicVouchers.today || 0"></span>张)
                                        </div>
                                    </div>
                                    <div class="text-xs text-info" style="margin-top: var(--spacing-xs);">
                                        💡 此数值由系统自动计算，无需手动输入
                                    </div>
                                </div>

                                <!-- 工行积分兑换 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">工行积分兑换笔数</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.icbcPoints.count"
                                           placeholder="0">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        单位：笔
                                    </div>
                                </div>

                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">工行积分兑换金额</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.icbcPoints.amount"
                                           placeholder="0.00"
                                           step="0.01">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        单位：元
                                    </div>
                                </div>

                                <!-- 工行ETC -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">当日工行ETC</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.icbcETC.count"
                                           placeholder="0">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        单位：单
                                    </div>
                                </div>

                                <!-- 三端订单消费 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">三端订单消费</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.threeEndOrders.count"
                                           placeholder="0">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        单位：笔
                                    </div>
                                </div>

                                <!-- 实际评价数量 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">实际评价数量</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.actualReviews.count"
                                           placeholder="0">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        单位：笔
                                    </div>
                                </div>

                                <!-- 电子卡办理 -->
                                <div class="flex flex-col" style="gap: var(--spacing-sm);">
                                    <label class="text-base font-semibold text-primary">今日办理电子卡</label>
                                    <input type="number"
                                           class="form-input"
                                           x-model.number="formData.electronicCards.count"
                                           placeholder="0">
                                    <div class="text-xs text-muted" style="margin-top: var(--spacing-xs);">
                                        单位：张
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 步骤6: 数据验证 -->
                    <div x-show="currentStep === 6" data-step-content="6">
                        <div class="flex flex-col" style="gap: var(--spacing-lg);">
                            <div class="text-base text-muted">
                                🔍 数据验证和异常检测
                            </div>

                            <!-- 异常检测按钮 -->
                            <div class="flex flex-col" style="gap: var(--spacing-md);">
                                <!-- 首次检测按钮 -->
                                <button type="button"
                                        class="btn btn-info btn-large"
                                        x-show="validationStatus === 'not_checked'"
                                        @click="triggerQuantumParticleEntrance(); detectAnomalies();"
                                        style="width: 100%; padding: var(--spacing-lg); font-size: var(--font-size-lg);">
                                    ⚛️ 执行智能异常检测（量子粒子聚合特效）
                                </button>

                                <!-- 重新检测按钮 -->
                                <button type="button"
                                        class="btn btn-secondary btn-large"
                                        x-show="validationStatus === 'completed'"
                                        @click="triggerQuantumParticleEntrance(); detectAnomalies();"
                                        style="width: 100%; padding: var(--spacing-lg); font-size: var(--font-size-lg);">
                                    🔄 重新执行检测（量子粒子聚合特效）
                                </button>

                                <!-- 检测中状态 -->
                                <div x-show="validationStatus === 'checking'"
                                     class="btn btn-large"
                                     style="width: 100%; padding: var(--spacing-lg); font-size: var(--font-size-lg); background-color: var(--background-secondary); cursor: not-allowed;">
                                    ⏳ 正在检测中，请稍候...
                                </div>

                                <div class="text-sm text-info">
                                    💡 点击执行按钮将触发量子粒子聚合特效，并进行全面的数据验证和异常检测
                                </div>
                            </div>

                            <!-- 数据完整性检查结果 -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>📋 数据完整性检查</h3>
                                </div>
                                <div class="card-body">
                                    <!-- 未检测状态 -->
                                    <div x-show="validationStatus === 'not_checked'" class="text-muted">
                                        🔍 请点击上方按钮执行数据验证
                                    </div>

                                    <!-- 检测中状态 -->
                                    <div x-show="validationStatus === 'checking'" class="text-info">
                                        ⏳ 正在检测数据完整性...
                                    </div>

                                    <!-- 检测完成 - 数据完整 -->
                                    <div x-show="validationStatus === 'completed' && missingFields.length === 0" class="text-success">
                                        ✅ 所有必需数据已填写完整
                                    </div>

                                    <!-- 检测完成 - 数据不完整 -->
                                    <div x-show="validationStatus === 'completed' && missingFields.length > 0" class="text-warning">
                                        ⚠️ 发现 <span x-text="missingFields.length"></span> 个缺失字段：
                                        <ul style="margin-left: var(--spacing-md); margin-top: var(--spacing-xs);">
                                            <template x-for="field in missingFields" :key="field.field">
                                                <li>
                                                    <strong x-text="field.label"></strong>
                                                    (<span x-text="field.stepName"></span>)
                                                </li>
                                            </template>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 异常检测结果 -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>🔍 异常检测结果</h3>
                                </div>
                                <div class="card-body">
                                    <!-- 未检测状态 -->
                                    <div x-show="validationStatus === 'not_checked'" class="text-muted">
                                        🔍 请点击上方按钮执行异常检测
                                    </div>

                                    <!-- 检测中状态 -->
                                    <div x-show="validationStatus === 'checking'" class="text-info">
                                        ⏳ 正在进行异常检测...
                                    </div>

                                    <!-- 检测完成 - 数据不完整时 -->
                                    <div x-show="validationStatus === 'completed' && missingFields.length > 0" class="text-muted">
                                        ⚠️ 数据不完整，请先补充缺失字段后再进行异常检测
                                    </div>

                                    <!-- 检测完成 - 数据完整且无异常 -->
                                    <div x-show="validationStatus === 'completed' && missingFields.length === 0 && anomalies.length === 0" class="text-success">
                                        ✅ 未发现数据异常，所有数据正常
                                    </div>

                                    <!-- 检测完成 - 发现异常 -->
                                    <div x-show="validationStatus === 'completed' && missingFields.length === 0 && anomalies.length > 0" class="flex flex-col" style="gap: var(--spacing-sm);">
                                        <div class="text-warning font-semibold">
                                            ⚠️ 发现 <span x-text="anomalies.length"></span> 个数据异常
                                        </div>

                                        <template x-for="anomaly in anomalies" :key="anomaly.type + anomaly.field">
                                            <div class="card" style="background-color: var(--warning-bg); border: 1px solid var(--warning-color);">
                                                <div class="card-body">
                                                    <div class="flex justify-between items-start">
                                                        <div class="flex flex-col" style="gap: var(--spacing-xs);">
                                                            <div class="font-semibold" x-text="anomaly.message"></div>
                                                            <div class="text-sm text-muted">
                                                                类型：<span x-text="anomaly.type"></span> |
                                                                严重程度：<span x-text="anomaly.severity"></span>
                                                            </div>
                                                        </div>
                                                        <div class="text-warning text-xl">⚠️</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>

                            <!-- 异常检测说明 -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>📊 异常检测规则说明</h3>
                                </div>
                                <div class="card-body">
                                    <div class="text-sm" style="line-height: 1.6;">
                                        <p><strong>智能异常检测包含以下检查：</strong></p>
                                        <ul style="margin-left: var(--spacing-md); margin-top: var(--spacing-sm);">
                                            <li><strong>销量异常检测</strong>：检测今日销量与昨日相比是否变化过大（超过3倍或低于1/3）</li>
                                            <li><strong>环比异常检测</strong>：检测环比变化率是否超过50%</li>
                                            <li><strong>测评率异常检测</strong>：检测测评率是否超过100%或逻辑错误</li>
                                            <li><strong>月累计逻辑检测</strong>：检测月累计数据是否符合逻辑（昨日累计+今日销量）</li>
                                        </ul>
                                        <p style="margin-top: var(--spacing-sm);"><strong>特色功能：</strong></p>
                                        <ul style="margin-left: var(--spacing-md);">
                                            <li>⚛️ 量子粒子聚合特效：检测过程中触发科技感粒子动画</li>
                                            <li>🎯 智能分析：基于历史数据和业务逻辑的智能判断</li>
                                            <li>📊 详细报告：提供异常类型、严重程度和具体数据</li>
                                            <li>🔧 实时检测：数据变化时自动重新检测</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 步骤7: 生成报告 -->
                    <div x-show="currentStep === 7" data-step-content="7">
                        <div class="flex flex-col" style="gap: var(--spacing-lg);">
                            <div class="text-base text-muted">
                                📄 生成标准报告
                            </div>

                            <!-- 生成报告按钮 -->
                            <div class="flex flex-col" style="gap: var(--spacing-md);">
                                <button type="button"
                                        class="btn btn-primary btn-large"
                                        @click="generateFinalReport()"
                                        style="width: 100%; padding: var(--spacing-lg); font-size: var(--font-size-lg);">
                                    🎉 生成标准报告（终极庆祝特效）
                                </button>

                                <div class="text-sm text-info">
                                    💡 点击生成按钮将触发终极庆祝特效，并生成标准格式报告
                                </div>
                            </div>

                            <!-- 报告生成状态 -->
                            <div x-show="reportStatus.message"
                                 :class="reportStatus.success ? 'text-success' : 'text-error'"
                                 class="text-base font-semibold">
                                <span x-text="reportStatus.message"></span>
                            </div>

                            <!-- 生成的报告内容 -->
                            <div x-show="reportStatus.success && reportStatus.report" class="card"
                                 style="background-color: var(--success-bg); border: 1px solid var(--success-color);">
                                <div class="card-header">
                                    <h3 class="text-success">✅ 标准报告生成成功</h3>
                                    <div class="flex" style="gap: var(--spacing-sm);">
                                        <button type="button"
                                                class="btn btn-success btn-small"
                                                @click="copyReportToClipboard()">
                                            📋 一键复制
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="text-sm" style="font-family: monospace; white-space: pre-line; line-height: 1.6; background-color: rgba(255,255,255,0.1); padding: var(--spacing-md); border-radius: var(--border-radius); border: 1px solid rgba(255,255,255,0.2);">
                                        <span x-text="reportStatus.report"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- 复制状态提示 -->
                            <div x-show="copyStatus.message"
                                 :class="copyStatus.success ? 'text-success' : 'text-warning'"
                                 class="text-base font-semibold text-center"
                                 style="padding: var(--spacing-md); border-radius: var(--border-radius); background-color: rgba(255,255,255,0.1);">
                                <span x-text="copyStatus.message"></span>
                            </div>

                            <!-- 报告格式说明 -->
                            <div class="card">
                                <div class="card-header">
                                    <h3>📋 标准报告格式说明</h3>
                                </div>
                                <div class="card-body">
                                    <div class="text-sm" style="line-height: 1.6;">
                                        <p><strong>报告包含8个标准部分：</strong></p>
                                        <ul style="margin-left: var(--spacing-md); margin-top: var(--spacing-sm);">
                                            <li>一、油品销售数据（92#、95#、98#汽油，柴油，月累计）</li>
                                            <li>二、环比昨日数据（总计、汽油、柴油的变化量和变化率）</li>
                                            <li>三、非油销售数据（当日、环比、同比、月累计）</li>
                                            <li>四、电子券核销数据</li>
                                            <li>五、工行积分兑换数据</li>
                                            <li>六、工行ETC数据</li>
                                            <li>七、三端订单和测评数据</li>
                                            <li>八、电子卡办理数据</li>
                                        </ul>
                                        <p style="margin-top: var(--spacing-sm);"><strong>特色功能：</strong></p>
                                        <ul style="margin-left: var(--spacing-md);">
                                            <li>🌧️ 数字雨瀑布特效：生成过程中触发震撼视觉效果</li>
                                            <li>📋 一键复制：兼容所有浏览器的复制功能</li>
                                            <li>🎯 精确计算：自动计算升转吨、环比等数据</li>
                                            <li>📱 移动优化：适配加油站户外环境使用</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-center" style="margin-top: var(--spacing-lg); gap: var(--spacing-sm);">
                        <button class="btn btn-outline btn-small" @click="prevStep()" :disabled="currentStep <= 1">
                            ⬅️ 上一步
                        </button>
                        <button class="btn btn-outline btn-small" @click="nextStep()" :disabled="currentStep >= 7">
                            下一步 ➡️
                        </button>
                    </div>
                </div>
            </div>

            <!-- 开发进度和控制卡片 -->
            <div class="card">
                <div class="card-header">
                    <h2 class="text-xl text-primary">跳过步骤验证</h2>
                </div>
                <div class="card-body">
                    <!-- 演示模式控制 -->
                    <div style="margin-top: var(--spacing-md);">
                        <div class="flex justify-between items-center">
                            <span class="text-base">演示模式</span>
                            <button class="btn btn-small"
                                    :class="demoMode ? 'btn-primary' : 'btn-outline'"
                                    @click="demoMode = !demoMode">
                                <span x-text="demoMode ? '✅ 已启用' : '❌ 已禁用'"></span>
                            </button>
                        </div>
                        <div class="text-sm text-muted" style="margin-top: var(--spacing-xs);">
                            <span x-show="demoMode">演示模式：跳过步骤验证，允许自由导航</span>
                            <span x-show="!demoMode">正式模式：严格验证数据完整性</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <!-- Alpine.js 3.14.9 内联代码 -->
    <script>
(()=>{var nt=!1,it=!1,W=[],ot=-1;function Ut(e){Rn(e)}function Rn(e){W.includes(e)||W.push(e),Mn()}function Wt(e){let t=W.indexOf(e);t!==-1&&t>ot&&W.splice(t,1)}function Mn(){!it&&!nt&&(nt=!0,queueMicrotask(Nn))}function Nn(){nt=!1,it=!0;for(let e=0;e<W.length;e++)W[e](),ot=e;W.length=0,ot=-1,it=!1}var T,N,$,at,st=!0;function Gt(e){st=!1,e(),st=!0}function Jt(e){T=e.reactive,$=e.release,N=t=>e.effect(t,{scheduler:r=>{st?Ut(r):r()}}),at=e.raw}function ct(e){N=e}function Yt(e){let t=()=>{};return[n=>{let i=N(n);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(o=>o())}),e._x_effects.add(i),t=()=>{i!==void 0&&(e._x_effects.delete(i),$(i))},i},()=>{t()}]}function ve(e,t){let r=!0,n,i=N(()=>{let o=e();JSON.stringify(o),r?n=o:queueMicrotask(()=>{t(o,n),n=o}),r=!1});return()=>$(i)}var Xt=[],Zt=[],Qt=[];function er(e){Qt.push(e)}function te(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,Zt.push(t))}function Ae(e){Xt.push(e)}function Oe(e,t,r){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(r)}function lt(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([r,n])=>{(t===void 0||t.includes(r))&&(n.forEach(i=>i()),delete e._x_attributeCleanups[r])})}function tr(e){for(e._x_effects?.forEach(Wt);e._x_cleanups?.length;)e._x_cleanups.pop()()}var ut=new MutationObserver(mt),ft=!1;function ue(){ut.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ft=!0}function dt(){kn(),ut.disconnect(),ft=!1}var le=[];function kn(){let e=ut.takeRecords();le.push(()=>e.length>0&&mt(e));let t=le.length;queueMicrotask(()=>{if(le.length===t)for(;le.length>0;)le.shift()()})}function m(e){if(!ft)return e();dt();let t=e();return ue(),t}var pt=!1,Se=[];function rr(){pt=!0}function nr(){pt=!1,mt(Se),Se=[]}function mt(e){if(pt){Se=Se.concat(e);return}let t=[],r=new Set,n=new Map,i=new Map;for(let o=0;o<e.length;o++)if(!e[o].target._x_ignoreMutationObserver&&(e[o].type==="childList"&&(e[o].removedNodes.forEach(s=>{s.nodeType===1&&s._x_marker&&r.add(s)}),e[o].addedNodes.forEach(s=>{if(s.nodeType===1){if(r.has(s)){r.delete(s);return}s._x_marker||t.push(s)}})),e[o].type==="attributes")){let s=e[o].target,a=e[o].attributeName,c=e[o].oldValue,l=()=>{n.has(s)||n.set(s,[]),n.get(s).push({name:a,value:s.getAttribute(a)})},u=()=>{i.has(s)||i.set(s,[]),i.get(s).push(a)};s.hasAttribute(a)&&c===null?l():s.hasAttribute(a)?(u(),l()):u()}i.forEach((o,s)=>{lt(s,o)}),n.forEach((o,s)=>{Xt.forEach(a=>a(s,o))});for(let o of r)t.some(s=>s.contains(o))||Zt.forEach(s=>s(o));for(let o of t)o.isConnected&&Qt.forEach(s=>s(o));t=null,r=null,n=null,i=null}function Ce(e){return z(B(e))}function k(e,t,r){return e._x_dataStack=[t,...B(r||e)],()=>{e._x_dataStack=e._x_dataStack.filter(n=>n!==t)}}function B(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?B(e.host):e.parentNode?B(e.parentNode):[]}function z(e){return new Proxy({objects:e},Dn)}var Dn={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(r=>Object.prototype.hasOwnProperty.call(r,t)||Reflect.has(r,t))},get({objects:e},t,r){return t=="toJSON"?Pn:Reflect.get(e.find(n=>Reflect.has(n,t))||{},t,r)},set({objects:e},t,r,n){let i=e.find(s=>Object.prototype.hasOwnProperty.call(s,t))||e[e.length-1],o=Object.getOwnPropertyDescriptor(i,t);return o?.set&&o?.get?o.set.call(n,r)||!0:Reflect.set(i,t,r)}};function Pn(){return Reflect.ownKeys(this).reduce((t,r)=>(t[r]=Reflect.get(this,r),t),{})}function Te(e){let t=n=>typeof n=="object"&&!Array.isArray(n)&&n!==null,r=(n,i="")=>{Object.entries(Object.getOwnPropertyDescriptors(n)).forEach(([o,{value:s,enumerable:a}])=>{if(a===!1||s===void 0||typeof s=="object"&&s!==null&&s.__v_skip)return;let c=i===""?o:`${i}.${o}`;typeof s=="object"&&s!==null&&s._x_interceptor?n[o]=s.initialize(e,c,o):t(s)&&s!==n&&!(s instanceof Element)&&r(s,c)})};return r(e)}function Re(e,t=()=>{}){let r={initialValue:void 0,_x_interceptor:!0,initialize(n,i,o){return e(this.initialValue,()=>In(n,i),s=>ht(n,i,s),i,o)}};return t(r),n=>{if(typeof n=="object"&&n!==null&&n._x_interceptor){let i=r.initialize.bind(r);r.initialize=(o,s,a)=>{let c=n.initialize(o,s,a);return r.initialValue=c,i(o,s,a)}}else r.initialValue=n;return r}}function In(e,t){return t.split(".").reduce((r,n)=>r[n],e)}function ht(e,t,r){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=r;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),ht(e[t[0]],t.slice(1),r)}}var ir={};function y(e,t){ir[e]=t}function fe(e,t){let r=Ln(t);return Object.entries(ir).forEach(([n,i])=>{Object.defineProperty(e,`$${n}`,{get(){return i(t,r)},enumerable:!1})}),e}function Ln(e){let[t,r]=_t(e),n={interceptor:Re,...t};return te(e,r),n}function or(e,t,r,...n){try{return r(...n)}catch(i){re(i,e,t)}}function re(e,t,r=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:r}),console.warn(`Alpine Expression Error: ${e.message}

${r?'Expression: "'+r+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var Me=!0;function ke(e){let t=Me;Me=!1;let r=e();return Me=t,r}function R(e,t,r={}){let n;return x(e,t)(i=>n=i,r),n}function x(...e){return sr(...e)}var sr=xt;function ar(e){sr=e}function xt(e,t){let r={};fe(r,e);let n=[r,...B(e)],i=typeof t=="function"?$n(n,t):Fn(n,t,e);return or.bind(null,e,t,i)}function $n(e,t){return(r=()=>{},{scope:n={},params:i=[]}={})=>{let o=t.apply(z([n,...e]),i);Ne(r,o)}}var gt={};function jn(e,t){if(gt[e])return gt[e];let r=Object.getPrototypeOf(async function(){}).constructor,n=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,o=(()=>{try{let s=new r(["__self","scope"],`with (scope) { __self.result = ${n} }; __self.finished = true; return __self.result;`);return Object.defineProperty(s,"name",{value:`[Alpine] ${e}`}),s}catch(s){return re(s,t,e),Promise.resolve()}})();return gt[e]=o,o}function Fn(e,t,r){let n=jn(t,r);return(i=()=>{},{scope:o={},params:s=[]}={})=>{n.result=void 0,n.finished=!1;let a=z([o,...e]);if(typeof n=="function"){let c=n(n,a).catch(l=>re(l,r,t));n.finished?(Ne(i,n.result,a,s,r),n.result=void 0):c.then(l=>{Ne(i,l,a,s,r)}).catch(l=>re(l,r,t)).finally(()=>n.result=void 0)}}}function Ne(e,t,r,n,i){if(Me&&typeof t=="function"){let o=t.apply(r,n);o instanceof Promise?o.then(s=>Ne(e,s,r,n)).catch(s=>re(s,i,t)):e(o)}else typeof t=="object"&&t instanceof Promise?t.then(o=>e(o)):e(t)}var wt="x-";function C(e=""){return wt+e}function cr(e){wt=e}var De={};function d(e,t){return De[e]=t,{before(r){if(!De[r]){console.warn(String.raw`Cannot find directive \`${r}\`. \`${e}\` will use the default order of execution`);return}let n=G.indexOf(r);G.splice(n>=0?n:G.indexOf("DEFAULT"),0,e)}}}function lr(e){return Object.keys(De).includes(e)}function pe(e,t,r){if(t=Array.from(t),e._x_virtualDirectives){let o=Object.entries(e._x_virtualDirectives).map(([a,c])=>({name:a,value:c})),s=Et(o);o=o.map(a=>s.find(c=>c.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),t=t.concat(o)}let n={};return t.map(dr((o,s)=>n[o]=s)).filter(mr).map(zn(n,r)).sort(Kn).map(o=>Bn(e,o))}function Et(e){return Array.from(e).map(dr()).filter(t=>!mr(t))}var yt=!1,de=new Map,ur=Symbol();function fr(e){yt=!0;let t=Symbol();ur=t,de.set(t,[]);let r=()=>{for(;de.get(t).length;)de.get(t).shift()();de.delete(t)},n=()=>{yt=!1,r()};e(r),n()}function _t(e){let t=[],r=a=>t.push(a),[n,i]=Yt(e);return t.push(i),[{Alpine:K,effect:n,cleanup:r,evaluateLater:x.bind(x,e),evaluate:R.bind(R,e)},()=>t.forEach(a=>a())]}function Bn(e,t){let r=()=>{},n=De[t.type]||r,[i,o]=_t(e);Oe(e,t.original,o);let s=()=>{e._x_ignore||e._x_ignoreSelf||(n.inline&&n.inline(e,t,i),n=n.bind(n,e,t,i),yt?de.get(ur).push(n):n())};return s.runCleanups=o,s}var Pe=(e,t)=>({name:r,value:n})=>(r.startsWith(e)&&(r=r.replace(e,t)),{name:r,value:n}),Ie=e=>e;function dr(e=()=>{}){return({name:t,value:r})=>{let{name:n,value:i}=pr.reduce((o,s)=>s(o),{name:t,value:r});return n!==t&&e(n,t),{name:n,value:i}}}var pr=[];function ne(e){pr.push(e)}function mr({name:e}){return hr().test(e)}var hr=()=>new RegExp(`^${wt}([^:^.]+)\\b`);function zn(e,t){return({name:r,value:n})=>{let i=r.match(hr()),o=r.match(/:([a-zA-Z0-9\-_:]+)/),s=r.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=t||e[r]||r;return{type:i?i[1]:null,value:o?o[1]:null,modifiers:s.map(c=>c.replace(".","")),expression:n,original:a}}}var bt="DEFAULT",G=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",bt,"teleport"];function Kn(e,t){let r=G.indexOf(e.type)===-1?bt:e.type,n=G.indexOf(t.type)===-1?bt:t.type;return G.indexOf(r)-G.indexOf(n)}function J(e,t,r={}){e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}function D(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(i=>D(i,t));return}let r=!1;if(t(e,()=>r=!0),r)return;let n=e.firstElementChild;for(;n;)D(n,t,!1),n=n.nextElementSibling}function E(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var _r=!1;function gr(){_r&&E("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),_r=!0,document.body||E("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),J(document,"alpine:init"),J(document,"alpine:initializing"),ue(),er(t=>S(t,D)),te(t=>P(t)),Ae((t,r)=>{pe(t,r).forEach(n=>n())});let e=t=>!Y(t.parentElement,!0);Array.from(document.querySelectorAll(br().join(","))).filter(e).forEach(t=>{S(t)}),J(document,"alpine:initialized"),setTimeout(()=>{Vn()})}var vt=[],xr=[];function yr(){return vt.map(e=>e())}function br(){return vt.concat(xr).map(e=>e())}function Le(e){vt.push(e)}function $e(e){xr.push(e)}function Y(e,t=!1){return j(e,r=>{if((t?br():yr()).some(i=>r.matches(i)))return!0})}function j(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return j(e.parentElement,t)}}function wr(e){return yr().some(t=>e.matches(t))}var Er=[];function vr(e){Er.push(e)}var Hn=1;function S(e,t=D,r=()=>{}){j(e,n=>n._x_ignore)||fr(()=>{t(e,(n,i)=>{n._x_marker||(r(n,i),Er.forEach(o=>o(n,i)),pe(n,n.attributes).forEach(o=>o()),n._x_ignore||(n._x_marker=Hn++),n._x_ignore&&i())})})}function P(e,t=D){t(e,r=>{tr(r),lt(r),delete r._x_marker})}function Vn(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,r,n])=>{lr(r)||n.some(i=>{if(document.querySelector(i))return E(`found "${i}", but missing ${t} plugin`),!0})})}var St=[],At=!1;function ie(e=()=>{}){return queueMicrotask(()=>{At||setTimeout(()=>{je()})}),new Promise(t=>{St.push(()=>{e(),t()})})}function je(){for(At=!1;St.length;)St.shift()()}function Sr(){At=!0}function me(e,t){return Array.isArray(t)?Ar(e,t.join(" ")):typeof t=="object"&&t!==null?qn(e,t):typeof t=="function"?me(e,t()):Ar(e,t)}function Ar(e,t){let r=o=>o.split(" ").filter(Boolean),n=o=>o.split(" ").filter(s=>!e.classList.contains(s)).filter(Boolean),i=o=>(e.classList.add(...o),()=>{e.classList.remove(...o)});return t=t===!0?t="":t||"",i(n(t))}function qn(e,t){let r=a=>a.split(" ").filter(Boolean),n=Object.entries(t).flatMap(([a,c])=>c?r(a):!1).filter(Boolean),i=Object.entries(t).flatMap(([a,c])=>c?!1:r(a)).filter(Boolean),o=[],s=[];return i.forEach(a=>{e.classList.contains(a)&&(e.classList.remove(a),s.push(a))}),n.forEach(a=>{e.classList.contains(a)||(e.classList.add(a),o.push(a))}),()=>{s.forEach(a=>e.classList.add(a)),o.forEach(a=>e.classList.remove(a))}}function X(e,t){return typeof t=="object"&&t!==null?Un(e,t):Wn(e,t)}function Un(e,t){let r={};return Object.entries(t).forEach(([n,i])=>{r[n]=e.style[n],n.startsWith("--")||(n=Gn(n)),e.style.setProperty(n,i)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{X(e,r)}}function Wn(e,t){let r=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",r||"")}}function Gn(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function he(e,t=()=>{}){let r=!1;return function(){r?t.apply(this,arguments):(r=!0,e.apply(this,arguments))}}d("transition",(e,{value:t,modifiers:r,expression:n},{evaluate:i})=>{typeof n=="function"&&(n=i(n)),n!==!1&&(!n||typeof n=="boolean"?Yn(e,r,t):Jn(e,n,t))});function Jn(e,t,r){Or(e,me,""),{enter:i=>{e._x_transition.enter.during=i},"enter-start":i=>{e._x_transition.enter.start=i},"enter-end":i=>{e._x_transition.enter.end=i},leave:i=>{e._x_transition.leave.during=i},"leave-start":i=>{e._x_transition.leave.start=i},"leave-end":i=>{e._x_transition.leave.end=i}}[r](t)}function Yn(e,t,r){Or(e,X);let n=!t.includes("in")&&!t.includes("out")&&!r,i=n||t.includes("in")||["enter"].includes(r),o=n||t.includes("out")||["leave"].includes(r);t.includes("in")&&!n&&(t=t.filter((g,b)=>b<t.indexOf("out"))),t.includes("out")&&!n&&(t=t.filter((g,b)=>b>t.indexOf("out")));let s=!t.includes("opacity")&&!t.includes("scale"),a=s||t.includes("opacity"),c=s||t.includes("scale"),l=a?0:1,u=c?_e(t,"scale",95)/100:1,p=_e(t,"delay",0)/1e3,h=_e(t,"origin","center"),w="opacity, transform",F=_e(t,"duration",150)/1e3,Ee=_e(t,"duration",75)/1e3,f="cubic-bezier(0.4, 0.0, 0.2, 1)";i&&(e._x_transition.enter.during={transformOrigin:h,transitionDelay:`${p}s`,transitionProperty:w,transitionDuration:`${F}s`,transitionTimingFunction:f},e._x_transition.enter.start={opacity:l,transform:`scale(${u})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),o&&(e._x_transition.leave.during={transformOrigin:h,transitionDelay:`${p}s`,transitionProperty:w,transitionDuration:`${Ee}s`,transitionTimingFunction:f},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:l,transform:`scale(${u})`})}function Or(e,t,r={}){e._x_transition||(e._x_transition={enter:{during:r,start:r,end:r},leave:{during:r,start:r,end:r},in(n=()=>{},i=()=>{}){Fe(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},n,i)},out(n=()=>{},i=()=>{}){Fe(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},n,i)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,r,n){let i=document.visibilityState==="visible"?requestAnimationFrame:setTimeout,o=()=>i(r);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(r):o():e._x_transition?e._x_transition.in(r):o();return}e._x_hidePromise=e._x_transition?new Promise((s,a)=>{e._x_transition.out(()=>{},()=>s(n)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(n),queueMicrotask(()=>{let s=Cr(e);s?(s._x_hideChildren||(s._x_hideChildren=[]),s._x_hideChildren.push(e)):i(()=>{let a=c=>{let l=Promise.all([c._x_hidePromise,...(c._x_hideChildren||[]).map(a)]).then(([u])=>u?.());return delete c._x_hidePromise,delete c._x_hideChildren,l};a(e).catch(c=>{if(!c.isFromCancelledTransition)throw c})})})};function Cr(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:Cr(t)}function Fe(e,t,{during:r,start:n,end:i}={},o=()=>{},s=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(r).length===0&&Object.keys(n).length===0&&Object.keys(i).length===0){o(),s();return}let a,c,l;Xn(e,{start(){a=t(e,n)},during(){c=t(e,r)},before:o,end(){a(),l=t(e,i)},after:s,cleanup(){c(),l()}})}function Xn(e,t){let r,n,i,o=he(()=>{m(()=>{r=!0,n||t.before(),i||(t.end(),je()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(s){this.beforeCancels.push(s)},cancel:he(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();o()}),finish:o},m(()=>{t.start(),t.during()}),Sr(),requestAnimationFrame(()=>{if(r)return;let s=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;s===0&&(s=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),m(()=>{t.before()}),n=!0,requestAnimationFrame(()=>{r||(m(()=>{t.end()}),je(),setTimeout(e._x_transitioning.finish,s+a),i=!0)})})}function _e(e,t,r){if(e.indexOf(t)===-1)return r;let n=e[e.indexOf(t)+1];if(!n||t==="scale"&&isNaN(n))return r;if(t==="duration"||t==="delay"){let i=n.match(/([0-9]+)ms/);if(i)return i[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[n,e[e.indexOf(t)+2]].join(" "):n}var I=!1;function A(e,t=()=>{}){return(...r)=>I?t(...r):e(...r)}function Tr(e){return(...t)=>I&&e(...t)}var Rr=[];function H(e){Rr.push(e)}function Mr(e,t){Rr.forEach(r=>r(e,t)),I=!0,kr(()=>{S(t,(r,n)=>{n(r,()=>{})})}),I=!1}var Be=!1;function Nr(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),I=!0,Be=!0,kr(()=>{Zn(t)}),I=!1,Be=!1}function Zn(e){let t=!1;S(e,(n,i)=>{D(n,(o,s)=>{if(t&&wr(o))return s();t=!0,i(o,s)})})}function kr(e){let t=N;ct((r,n)=>{let i=t(r);return $(i),()=>{}}),e(),ct(t)}function ge(e,t,r,n=[]){switch(e._x_bindings||(e._x_bindings=T({})),e._x_bindings[t]=r,t=n.includes("camel")?si(t):t,t){case"value":Qn(e,r);break;case"style":ti(e,r);break;case"class":ei(e,r);break;case"selected":case"checked":ri(e,t,r);break;default:Pr(e,t,r);break}}function Qn(e,t){if(Ot(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=xe(e.value)===t:e.checked=Dr(e.value,t));else if(ze(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(r=>Dr(r,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")oi(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function ei(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=me(e,t)}function ti(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=X(e,t)}function ri(e,t,r){Pr(e,t,r),ii(e,t,r)}function Pr(e,t,r){[null,void 0,!1].includes(r)&&ci(t)?e.removeAttribute(t):(Ir(t)&&(r=t),ni(e,t,r))}function ni(e,t,r){e.getAttribute(t)!=r&&e.setAttribute(t,r)}function ii(e,t,r){e[t]!==r&&(e[t]=r)}function oi(e,t){let r=[].concat(t).map(n=>n+"");Array.from(e.options).forEach(n=>{n.selected=r.includes(n.value)})}function si(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function Dr(e,t){return e==t}function xe(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?Boolean(e):null}var ai=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function Ir(e){return ai.has(e)}function ci(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function Lr(e,t,r){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:jr(e,t,r)}function $r(e,t,r,n=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let i=e._x_inlineBindings[t];return i.extract=n,ke(()=>R(e,i.expression))}return jr(e,t,r)}function jr(e,t,r){let n=e.getAttribute(t);return n===null?typeof r=="function"?r():r:n===""?!0:Ir(t)?!![t,"true"].includes(n):n}function ze(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function Ot(e){return e.type==="radio"||e.localName==="ui-radio"}function Ke(e,t){var r;return function(){var n=this,i=arguments,o=function(){r=null,e.apply(n,i)};clearTimeout(r),r=setTimeout(o,t)}}function He(e,t){let r;return function(){let n=this,i=arguments;r||(e.apply(n,i),r=!0,setTimeout(()=>r=!1,t))}}function Ve({get:e,set:t},{get:r,set:n}){let i=!0,o,s,a=N(()=>{let c=e(),l=r();if(i)n(Ct(c)),i=!1;else{let u=JSON.stringify(c),p=JSON.stringify(l);u!==o?n(Ct(c)):u!==p&&t(Ct(l))}o=JSON.stringify(e()),s=JSON.stringify(r())});return()=>{$(a)}}function Ct(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function Fr(e){(Array.isArray(e)?e:[e]).forEach(r=>r(K))}var Z={},Br=!1;function zr(e,t){if(Br||(Z=T(Z),Br=!0),t===void 0)return Z[e];Z[e]=t,Te(Z[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&Z[e].init()}function Kr(){return Z}var Hr={};function Vr(e,t){let r=typeof t!="function"?()=>t:t;return e instanceof Element?Tt(e,r()):(Hr[e]=r,()=>{})}function qr(e){return Object.entries(Hr).forEach(([t,r])=>{Object.defineProperty(e,t,{get(){return(...n)=>r(...n)}})}),e}function Tt(e,t,r){let n=[];for(;n.length;)n.pop()();let i=Object.entries(t).map(([s,a])=>({name:s,value:a})),o=Et(i);return i=i.map(s=>o.find(a=>a.name===s.name)?{name:`x-bind:${s.name}`,value:`"${s.value}"`}:s),pe(e,i,r).map(s=>{n.push(s.runCleanups),s()}),()=>{for(;n.length;)n.pop()()}}var Ur={};function Wr(e,t){Ur[e]=t}function Gr(e,t){return Object.entries(Ur).forEach(([r,n])=>{Object.defineProperty(e,r,{get(){return(...i)=>n.bind(t)(...i)},enumerable:!1})}),e}var li={get reactive(){return T},get release(){return $},get effect(){return N},get raw(){return at},version:"3.14.9",flushAndStopDeferringMutations:nr,dontAutoEvaluateFunctions:ke,disableEffectScheduling:Gt,startObservingMutations:ue,stopObservingMutations:dt,setReactivityEngine:Jt,onAttributeRemoved:Oe,onAttributesAdded:Ae,closestDataStack:B,skipDuringClone:A,onlyDuringClone:Tr,addRootSelector:Le,addInitSelector:$e,interceptClone:H,addScopeToNode:k,deferMutations:rr,mapAttributes:ne,evaluateLater:x,interceptInit:vr,setEvaluator:ar,mergeProxies:z,extractProp:$r,findClosest:j,onElRemoved:te,closestRoot:Y,destroyTree:P,interceptor:Re,transition:Fe,setStyles:X,mutateDom:m,directive:d,entangle:Ve,throttle:He,debounce:Ke,evaluate:R,initTree:S,nextTick:ie,prefixed:C,prefix:cr,plugin:Fr,magic:y,store:zr,start:gr,clone:Nr,cloneNode:Mr,bound:Lr,$data:Ce,watch:ve,walk:D,data:Wr,bind:Vr},K=li;function Rt(e,t){let r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}var ui="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";var Ls=Rt(ui+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");var Jr=Object.freeze({}),$s=Object.freeze([]);var fi=Object.prototype.hasOwnProperty,ye=(e,t)=>fi.call(e,t),V=Array.isArray,oe=e=>Yr(e)==="[object Map]";var di=e=>typeof e=="string",qe=e=>typeof e=="symbol",be=e=>e!==null&&typeof e=="object";var pi=Object.prototype.toString,Yr=e=>pi.call(e),Mt=e=>Yr(e).slice(8,-1);var Ue=e=>di(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e;var We=e=>{let t=Object.create(null);return r=>t[r]||(t[r]=e(r))},mi=/-(\w)/g,js=We(e=>e.replace(mi,(t,r)=>r?r.toUpperCase():"")),hi=/\B([A-Z])/g,Fs=We(e=>e.replace(hi,"-$1").toLowerCase()),Nt=We(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bs=We(e=>e?`on${Nt(e)}`:""),kt=(e,t)=>e!==t&&(e===e||t===t);var Dt=new WeakMap,we=[],L,Q=Symbol("iterate"),Pt=Symbol("Map key iterate");function _i(e){return e&&e._isEffect===!0}function rn(e,t=Jr){_i(e)&&(e=e.raw);let r=xi(e,t);return t.lazy||r(),r}function nn(e){e.active&&(on(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var gi=0;function xi(e,t){let r=function(){if(!r.active)return e();if(!we.includes(r)){on(r);try{return bi(),we.push(r),L=r,e()}finally{we.pop(),sn(),L=we[we.length-1]}}};return r.id=gi++,r.allowRecurse=!!t.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=e,r.deps=[],r.options=t,r}function on(e){let{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}var se=!0,Lt=[];function yi(){Lt.push(se),se=!1}function bi(){Lt.push(se),se=!0}function sn(){let e=Lt.pop();se=e===void 0?!0:e}function M(e,t,r){if(!se||L===void 0)return;let n=Dt.get(e);n||Dt.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=new Set),i.has(L)||(i.add(L),L.deps.push(i),L.options.onTrack&&L.options.onTrack({effect:L,target:e,type:t,key:r}))}function U(e,t,r,n,i,o){let s=Dt.get(e);if(!s)return;let a=new Set,c=u=>{u&&u.forEach(p=>{(p!==L||p.allowRecurse)&&a.add(p)})};if(t==="clear")s.forEach(c);else if(r==="length"&&V(e))s.forEach((u,p)=>{(p==="length"||p>=n)&&c(u)});else switch(r!==void 0&&c(s.get(r)),t){case"add":V(e)?Ue(r)&&c(s.get("length")):(c(s.get(Q)),oe(e)&&c(s.get(Pt)));break;case"delete":V(e)||(c(s.get(Q)),oe(e)&&c(s.get(Pt)));break;case"set":oe(e)&&c(s.get(Q));break}let l=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:e,key:r,type:t,newValue:n,oldValue:i,oldTarget:o}),u.options.scheduler?u.options.scheduler(u):u()};a.forEach(l)}var wi=Rt("__proto__,__v_isRef,__isVue"),an=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(qe)),Ei=cn();var vi=cn(!0);var Xr=Si();function Si(){let e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){let n=_(this);for(let o=0,s=this.length;o<s;o++)M(n,"get",o+"");let i=n[t](...r);return i===-1||i===!1?n[t](...r.map(_)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){yi();let n=_(this)[t].apply(this,r);return sn(),n}}),e}function cn(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_raw"&&o===(e?t?Bi:dn:t?Fi:fn).get(n))return n;let s=V(n);if(!e&&s&&ye(Xr,i))return Reflect.get(Xr,i,o);let a=Reflect.get(n,i,o);return(qe(i)?an.has(i):wi(i))||(e||M(n,"get",i),t)?a:It(a)?!s||!Ue(i)?a.value:a:be(a)?e?pn(a):et(a):a}}var Ai=Oi();function Oi(e=!1){return function(r,n,i,o){let s=r[n];if(!e&&(i=_(i),s=_(s),!V(r)&&It(s)&&!It(i)))return s.value=i,!0;let a=V(r)&&Ue(n)?Number(n)<r.length:ye(r,n),c=Reflect.set(r,n,i,o);return r===_(o)&&(a?kt(i,s)&&U(r,"set",n,i,s):U(r,"add",n,i)),c}}function Ci(e,t){let r=ye(e,t),n=e[t],i=Reflect.deleteProperty(e,t);return i&&r&&U(e,"delete",t,void 0,n),i}function Ti(e,t){let r=Reflect.has(e,t);return(!qe(t)||!an.has(t))&&M(e,"has",t),r}function Ri(e){return M(e,"iterate",V(e)?"length":Q),Reflect.ownKeys(e)}var Mi={get:Ei,set:Ai,deleteProperty:Ci,has:Ti,ownKeys:Ri},Ni={get:vi,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}};var $t=e=>be(e)?et(e):e,jt=e=>be(e)?pn(e):e,Ft=e=>e,Qe=e=>Reflect.getPrototypeOf(e);function Ge(e,t,r=!1,n=!1){e=e.__v_raw;let i=_(e),o=_(t);t!==o&&!r&&M(i,"get",t),!r&&M(i,"get",o);let{has:s}=Qe(i),a=n?Ft:r?jt:$t;if(s.call(i,t))return a(e.get(t));if(s.call(i,o))return a(e.get(o));e!==i&&e.get(t)}function Je(e,t=!1){let r=this.__v_raw,n=_(r),i=_(e);return e!==i&&!t&&M(n,"has",e),!t&&M(n,"has",i),e===i?r.has(e):r.has(e)||r.has(i)}function Ye(e,t=!1){return e=e.__v_raw,!t&&M(_(e),"iterate",Q),Reflect.get(e,"size",e)}function Zr(e){e=_(e);let t=_(this);return Qe(t).has.call(t,e)||(t.add(e),U(t,"add",e,e)),this}function Qr(e,t){t=_(t);let r=_(this),{has:n,get:i}=Qe(r),o=n.call(r,e);o?un(r,n,e):(e=_(e),o=n.call(r,e));let s=i.call(r,e);return r.set(e,t),o?kt(t,s)&&U(r,"set",e,t,s):U(r,"add",e,t),this}function en(e){let t=_(this),{has:r,get:n}=Qe(t),i=r.call(t,e);i?un(t,r,e):(e=_(e),i=r.call(t,e));let o=n?n.call(t,e):void 0,s=t.delete(e);return i&&U(t,"delete",e,void 0,o),s}function tn(){let e=_(this),t=e.size!==0,r=oe(e)?new Map(e):new Set(e),n=e.clear();return t&&U(e,"clear",void 0,void 0,r),n}function Xe(e,t){return function(n,i){let o=this,s=o.__v_raw,a=_(s),c=t?Ft:e?jt:$t;return!e&&M(a,"iterate",Q),s.forEach((l,u)=>n.call(i,c(l),c(u),o))}}function Ze(e,t,r){return function(...n){let i=this.__v_raw,o=_(i),s=oe(o),a=e==="entries"||e===Symbol.iterator&&s,c=e==="keys"&&s,l=i[e](...n),u=r?Ft:t?jt:$t;return!t&&M(o,"iterate",c?Pt:Q),{next(){let{value:p,done:h}=l.next();return h?{value:p,done:h}:{value:a?[u(p[0]),u(p[1])]:u(p),done:h}},[Symbol.iterator](){return this}}}}function q(e){return function(...t){{let r=t[0]?`on key "${t[0]}" `:"";console.warn(`${Nt(e)} operation ${r}failed: target is readonly.`,_(this))}return e==="delete"?!1:this}}function ki(){let e={get(o){return Ge(this,o)},get size(){return Ye(this)},has:Je,add:Zr,set:Qr,delete:en,clear:tn,forEach:Xe(!1,!1)},t={get(o){return Ge(this,o,!1,!0)},get size(){return Ye(this)},has:Je,add:Zr,set:Qr,delete:en,clear:tn,forEach:Xe(!1,!0)},r={get(o){return Ge(this,o,!0)},get size(){return Ye(this,!0)},has(o){return Je.call(this,o,!0)},add:q("add"),set:q("set"),delete:q("delete"),clear:q("clear"),forEach:Xe(!0,!1)},n={get(o){return Ge(this,o,!0,!0)},get size(){return Ye(this,!0)},has(o){return Je.call(this,o,!0)},add:q("add"),set:q("set"),delete:q("delete"),clear:q("clear"),forEach:Xe(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Ze(o,!1,!1),r[o]=Ze(o,!0,!1),t[o]=Ze(o,!1,!0),n[o]=Ze(o,!0,!0)}),[e,r,t,n]}var[Di,Pi,Ii,Li]=ki();function ln(e,t){let r=t?e?Li:Ii:e?Pi:Di;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(ye(r,i)&&i in n?r:n,i,o)}var $i={get:ln(!1,!1)};var ji={get:ln(!0,!1)};function un(e,t,r){let n=_(r);if(n!==r&&t.call(e,n)){let i=Mt(e);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var fn=new WeakMap,Fi=new WeakMap,dn=new WeakMap,Bi=new WeakMap;function zi(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ki(e){return e.__v_skip||!Object.isExtensible(e)?0:zi(Mt(e))}function et(e){return e&&e.__v_isReadonly?e:mn(e,!1,Mi,$i,fn)}function pn(e){return mn(e,!0,Ni,ji,dn)}function mn(e,t,r,n,i){if(!be(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;let o=i.get(e);if(o)return o;let s=Ki(e);if(s===0)return e;let a=new Proxy(e,s===2?n:r);return i.set(e,a),a}function _(e){return e&&_(e.__v_raw)||e}function It(e){return Boolean(e&&e.__v_isRef===!0)}y("nextTick",()=>ie);y("dispatch",e=>J.bind(J,e));y("watch",(e,{evaluateLater:t,cleanup:r})=>(n,i)=>{let o=t(n),a=ve(()=>{let c;return o(l=>c=l),c},i);r(a)});y("store",Kr);y("data",e=>Ce(e));y("root",e=>Y(e));y("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=z(Hi(e))),e._x_refs_proxy));function Hi(e){let t=[];return j(e,r=>{r._x_refs&&t.push(r._x_refs)}),t}var Bt={};function zt(e){return Bt[e]||(Bt[e]=0),++Bt[e]}function hn(e,t){return j(e,r=>{if(r._x_ids&&r._x_ids[t])return!0})}function _n(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=zt(t))}y("id",(e,{cleanup:t})=>(r,n=null)=>{let i=`${r}${n?`-${n}`:""}`;return Vi(e,i,t,()=>{let o=hn(e,r),s=o?o._x_ids[r]:zt(r);return n?`${r}-${s}-${n}`:`${r}-${s}`})});H((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function Vi(e,t,r,n){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let i=n();return e._x_id[t]=i,r(()=>{delete e._x_id[t]}),i}y("el",e=>e);gn("Focus","focus","focus");gn("Persist","persist","persist");function gn(e,t,r){y(t,n=>E(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,n))}d("modelable",(e,{expression:t},{effect:r,evaluateLater:n,cleanup:i})=>{let o=n(t),s=()=>{let u;return o(p=>u=p),u},a=n(`${t} = __placeholder`),c=u=>a(()=>{},{scope:{__placeholder:u}}),l=s();c(l),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let u=e._x_model.get,p=e._x_model.set,h=Ve({get(){return u()},set(w){p(w)}},{get(){return s()},set(w){c(w)}});i(h)})});d("teleport",(e,{modifiers:t,expression:r},{cleanup:n})=>{e.tagName.toLowerCase()!=="template"&&E("x-teleport can only be used on a <template> tag",e);let i=xn(r),o=e.content.cloneNode(!0).firstElementChild;e._x_teleport=o,o._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),o.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(a=>{o.addEventListener(a,c=>{c.stopPropagation(),e.dispatchEvent(new c.constructor(c.type,c))})}),k(o,{},e);let s=(a,c,l)=>{l.includes("prepend")?c.parentNode.insertBefore(a,c):l.includes("append")?c.parentNode.insertBefore(a,c.nextSibling):c.appendChild(a)};m(()=>{s(o,i,t),A(()=>{S(o)})()}),e._x_teleportPutBack=()=>{let a=xn(r);m(()=>{s(e._x_teleport,a,t)})},n(()=>m(()=>{o.remove(),P(o)}))});var qi=document.createElement("div");function xn(e){let t=A(()=>document.querySelector(e),()=>qi)();return t||E(`Cannot find x-teleport element for selector: "${e}"`),t}var yn=()=>{};yn.inline=(e,{modifiers:t},{cleanup:r})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,r(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};d("ignore",yn);d("effect",A((e,{expression:t},{effect:r})=>{r(x(e,t))}));function ae(e,t,r,n){let i=e,o=c=>n(c),s={},a=(c,l)=>u=>l(c,u);if(r.includes("dot")&&(t=Ui(t)),r.includes("camel")&&(t=Wi(t)),r.includes("passive")&&(s.passive=!0),r.includes("capture")&&(s.capture=!0),r.includes("window")&&(i=window),r.includes("document")&&(i=document),r.includes("debounce")){let c=r[r.indexOf("debounce")+1]||"invalid-wait",l=tt(c.split("ms")[0])?Number(c.split("ms")[0]):250;o=Ke(o,l)}if(r.includes("throttle")){let c=r[r.indexOf("throttle")+1]||"invalid-wait",l=tt(c.split("ms")[0])?Number(c.split("ms")[0]):250;o=He(o,l)}return r.includes("prevent")&&(o=a(o,(c,l)=>{l.preventDefault(),c(l)})),r.includes("stop")&&(o=a(o,(c,l)=>{l.stopPropagation(),c(l)})),r.includes("once")&&(o=a(o,(c,l)=>{c(l),i.removeEventListener(t,o,s)})),(r.includes("away")||r.includes("outside"))&&(i=document,o=a(o,(c,l)=>{e.contains(l.target)||l.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&c(l))})),r.includes("self")&&(o=a(o,(c,l)=>{l.target===e&&c(l)})),(Ji(t)||wn(t))&&(o=a(o,(c,l)=>{Yi(l,r)||c(l)})),i.addEventListener(t,o,s),()=>{i.removeEventListener(t,o,s)}}function Ui(e){return e.replace(/-/g,".")}function Wi(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function tt(e){return!Array.isArray(e)&&!isNaN(e)}function Gi(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Ji(e){return["keydown","keyup"].includes(e)}function wn(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function Yi(e,t){let r=t.filter(o=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(o));if(r.includes("debounce")){let o=r.indexOf("debounce");r.splice(o,tt((r[o+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.includes("throttle")){let o=r.indexOf("throttle");r.splice(o,tt((r[o+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.length===0||r.length===1&&bn(e.key).includes(r[0]))return!1;let i=["ctrl","shift","alt","meta","cmd","super"].filter(o=>r.includes(o));return r=r.filter(o=>!i.includes(o)),!(i.length>0&&i.filter(s=>((s==="cmd"||s==="super")&&(s="meta"),e[`${s}Key`])).length===i.length&&(wn(e.type)||bn(e.key).includes(r[0])))}function bn(e){if(!e)return[];e=Gi(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(r=>{if(t[r]===e)return r}).filter(r=>r)}d("model",(e,{modifiers:t,expression:r},{effect:n,cleanup:i})=>{let o=e;t.includes("parent")&&(o=e.parentNode);let s=x(o,r),a;typeof r=="string"?a=x(o,`${r} = __placeholder`):typeof r=="function"&&typeof r()=="string"?a=x(o,`${r()} = __placeholder`):a=()=>{};let c=()=>{let h;return s(w=>h=w),En(h)?h.get():h},l=h=>{let w;s(F=>w=F),En(w)?w.set(h):a(()=>{},{scope:{__placeholder:h}})};typeof r=="string"&&e.type==="radio"&&m(()=>{e.hasAttribute("name")||e.setAttribute("name",r)});var u=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input";let p=I?()=>{}:ae(e,u,t,h=>{l(Kt(e,t,h,c()))});if(t.includes("fill")&&([void 0,null,""].includes(c())||ze(e)&&Array.isArray(c())||e.tagName.toLowerCase()==="select"&&e.multiple)&&l(Kt(e,t,{target:e},c())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=p,i(()=>e._x_removeModelListeners.default()),e.form){let h=ae(e.form,"reset",[],w=>{ie(()=>e._x_model&&e._x_model.set(Kt(e,t,{target:e},c())))});i(()=>h())}e._x_model={get(){return c()},set(h){l(h)}},e._x_forceModelUpdate=h=>{h===void 0&&typeof r=="string"&&r.match(/\./)&&(h=""),window.fromModel=!0,m(()=>ge(e,"value",h)),delete window.fromModel},n(()=>{let h=c();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(h)})});function Kt(e,t,r,n){return m(()=>{if(r instanceof CustomEvent&&r.detail!==void 0)return r.detail!==null&&r.detail!==void 0?r.detail:r.target.value;if(ze(e))if(Array.isArray(n)){let i=null;return t.includes("number")?i=Ht(r.target.value):t.includes("boolean")?i=xe(r.target.value):i=r.target.value,r.target.checked?n.includes(i)?n:n.concat([i]):n.filter(o=>!Xi(o,i))}else return r.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(r.target.selectedOptions).map(i=>{let o=i.value||i.text;return Ht(o)}):t.includes("boolean")?Array.from(r.target.selectedOptions).map(i=>{let o=i.value||i.text;return xe(o)}):Array.from(r.target.selectedOptions).map(i=>i.value||i.text);{let i;return Ot(e)?r.target.checked?i=r.target.value:i=n:i=r.target.value,t.includes("number")?Ht(i):t.includes("boolean")?xe(i):t.includes("trim")?i.trim():i}}})}function Ht(e){let t=e?parseFloat(e):null;return Zi(t)?t:e}function Xi(e,t){return e==t}function Zi(e){return!Array.isArray(e)&&!isNaN(e)}function En(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}d("cloak",e=>queueMicrotask(()=>m(()=>e.removeAttribute(C("cloak")))));$e(()=>`[${C("init")}]`);d("init",A((e,{expression:t},{evaluate:r})=>typeof t=="string"?!!t.trim()&&r(t,{},!1):r(t,{},!1)));d("text",(e,{expression:t},{effect:r,evaluateLater:n})=>{let i=n(t);r(()=>{i(o=>{m(()=>{e.textContent=o})})})});d("html",(e,{expression:t},{effect:r,evaluateLater:n})=>{let i=n(t);r(()=>{i(o=>{m(()=>{e.innerHTML=o,e._x_ignoreSelf=!0,S(e),delete e._x_ignoreSelf})})})});ne(Pe(":",Ie(C("bind:"))));var vn=(e,{value:t,modifiers:r,expression:n,original:i},{effect:o,cleanup:s})=>{if(!t){let c={};qr(c),x(e,n)(u=>{Tt(e,u,i)},{scope:c});return}if(t==="key")return Qi(e,n);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let a=x(e,n);o(()=>a(c=>{c===void 0&&typeof n=="string"&&n.match(/\./)&&(c=""),m(()=>ge(e,t,c,r))})),s(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};vn.inline=(e,{value:t,modifiers:r,expression:n})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:n,extract:!1})};d("bind",vn);function Qi(e,t){e._x_keyExpression=t}Le(()=>`[${C("data")}]`);d("data",(e,{expression:t},{cleanup:r})=>{if(eo(e))return;t=t===""?"{}":t;let n={};fe(n,e);let i={};Gr(i,n);let o=R(e,t,{scope:i});(o===void 0||o===!0)&&(o={}),fe(o,e);let s=T(o);Te(s);let a=k(e,s);s.init&&R(e,s.init),r(()=>{s.destroy&&R(e,s.destroy),a()})});H((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function eo(e){return I?Be?!0:e.hasAttribute("data-has-alpine-state"):!1}d("show",(e,{modifiers:t,expression:r},{effect:n})=>{let i=x(e,r);e._x_doHide||(e._x_doHide=()=>{m(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{m(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let o=()=>{e._x_doHide(),e._x_isShown=!1},s=()=>{e._x_doShow(),e._x_isShown=!0},a=()=>setTimeout(s),c=he(p=>p?s():o(),p=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,p,s,o):p?a():o()}),l,u=!0;n(()=>i(p=>{!u&&p===l||(t.includes("immediate")&&(p?a():o()),c(p),l=p,u=!1)}))});d("for",(e,{expression:t},{effect:r,cleanup:n})=>{let i=ro(t),o=x(e,i.items),s=x(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},r(()=>to(e,i,o,s)),n(()=>{Object.values(e._x_lookup).forEach(a=>m(()=>{P(a),a.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function to(e,t,r,n){let i=s=>typeof s=="object"&&!Array.isArray(s),o=e;r(s=>{no(s)&&s>=0&&(s=Array.from(Array(s).keys(),f=>f+1)),s===void 0&&(s=[]);let a=e._x_lookup,c=e._x_prevKeys,l=[],u=[];if(i(s))s=Object.entries(s).map(([f,g])=>{let b=Sn(t,g,f,s);n(v=>{u.includes(v)&&E("Duplicate key on x-for",e),u.push(v)},{scope:{index:f,...b}}),l.push(b)});else for(let f=0;f<s.length;f++){let g=Sn(t,s[f],f,s);n(b=>{u.includes(b)&&E("Duplicate key on x-for",e),u.push(b)},{scope:{index:f,...g}}),l.push(g)}let p=[],h=[],w=[],F=[];for(let f=0;f<c.length;f++){let g=c[f];u.indexOf(g)===-1&&w.push(g)}c=c.filter(f=>!w.includes(f));let Ee="template";for(let f=0;f<u.length;f++){let g=u[f],b=c.indexOf(g);if(b===-1)c.splice(f,0,g),p.push([Ee,f]);else if(b!==f){let v=c.splice(f,1)[0],O=c.splice(b-1,1)[0];c.splice(f,0,O),c.splice(b,0,v),h.push([v,O])}else F.push(g);Ee=g}for(let f=0;f<w.length;f++){let g=w[f];g in a&&(m(()=>{P(a[g]),a[g].remove()}),delete a[g])}for(let f=0;f<h.length;f++){let[g,b]=h[f],v=a[g],O=a[b],ee=document.createElement("div");m(()=>{O||E('x-for ":key" is undefined or invalid',o,b,a),O.after(ee),v.after(O),O._x_currentIfEl&&O.after(O._x_currentIfEl),ee.before(v),v._x_currentIfEl&&v.after(v._x_currentIfEl),ee.remove()}),O._x_refreshXForScope(l[u.indexOf(b)])}for(let f=0;f<p.length;f++){let[g,b]=p[f],v=g==="template"?o:a[g];v._x_currentIfEl&&(v=v._x_currentIfEl);let O=l[b],ee=u[b],ce=document.importNode(o.content,!0).firstElementChild,qt=T(O);k(ce,qt,o),ce._x_refreshXForScope=On=>{Object.entries(On).forEach(([Cn,Tn])=>{qt[Cn]=Tn})},m(()=>{v.after(ce),A(()=>S(ce))()}),typeof ee=="object"&&E("x-for key cannot be an object, it must be a string or an integer",o),a[ee]=ce}for(let f=0;f<F.length;f++)a[F[f]]._x_refreshXForScope(l[u.indexOf(F[f])]);o._x_prevKeys=u})}function ro(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,i=e.match(n);if(!i)return;let o={};o.items=i[2].trim();let s=i[1].replace(r,"").trim(),a=s.match(t);return a?(o.item=s.replace(t,"").trim(),o.index=a[1].trim(),a[2]&&(o.collection=a[2].trim())):o.item=s,o}function Sn(e,t,r,n){let i={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(s=>s.trim()).forEach((s,a)=>{i[s]=t[a]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(s=>s.trim()).forEach(s=>{i[s]=t[s]}):i[e.item]=t,e.index&&(i[e.index]=r),e.collection&&(i[e.collection]=n),i}function no(e){return!Array.isArray(e)&&!isNaN(e)}function An(){}An.inline=(e,{expression:t},{cleanup:r})=>{let n=Y(e);n._x_refs||(n._x_refs={}),n._x_refs[t]=e,r(()=>delete n._x_refs[t])};d("ref",An);d("if",(e,{expression:t},{effect:r,cleanup:n})=>{e.tagName.toLowerCase()!=="template"&&E("x-if can only be used on a <template> tag",e);let i=x(e,t),o=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let a=e.content.cloneNode(!0).firstElementChild;return k(a,{},e),m(()=>{e.after(a),A(()=>S(a))()}),e._x_currentIfEl=a,e._x_undoIf=()=>{m(()=>{P(a),a.remove()}),delete e._x_currentIfEl},a},s=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};r(()=>i(a=>{a?o():s()})),n(()=>e._x_undoIf&&e._x_undoIf())});d("id",(e,{expression:t},{evaluate:r})=>{r(t).forEach(i=>_n(e,i))});H((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});ne(Pe("@",Ie(C("on:"))));d("on",A((e,{value:t,modifiers:r,expression:n},{cleanup:i})=>{let o=n?x(e,n):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let s=ae(e,t,r,a=>{o(()=>{},{scope:{$event:a},params:[a]})});i(()=>s())}));rt("Collapse","collapse","collapse");rt("Intersect","intersect","intersect");rt("Focus","trap","focus");rt("Mask","mask","mask");function rt(e,t,r){d(t,n=>E(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,n))}K.setEvaluator(xt);K.setReactivityEngine({reactive:et,effect:rn,release:nn,raw:_});var Vt=K;window.Alpine=Vt;queueMicrotask(()=>{Vt.start()});})();

    </script>
</body>
</html>
